{"version":3,"sources":["Theme.js","Config.js","Utils.js","layouts/Login.js","components/NoteEditDialog.js","components/Doc.js","components/messenger/utils.js","components/ToolsDialog.js","components/DuplicateDocDialog.js","DuplicateHelper.js","layouts/Home.js","layouts/View.js","components/DatePicker.js","layouts/Publish.js","layouts/GetImage.js","components/Header.js","components/Alert.js","components/FBPostEditDialog.js","layouts/Scheduled.js","components/messenger/socket.js","components/messenger/Conversations.jsx","components/messenger/MessageView.jsx","components/messenger/index.js","App.js","landing/home/Guide.js","landing/home/NoPsid.js","landing/home/OldVersion.js","landing/home/Home.js","landing/quiz/Data.js","landing/quiz/Quiz.js","landing/Footer.js","landing/Landing.js","serviceWorker.js","index.js"],"names":["createMuiTheme","palette","primary","main","blueGrey","secondary","error","orange","Config","BACKEND","SOCKETIO","SELF_PAGE_ID","INBOX_TITLE","INBOX_SEND_ABILITY","ORG_CODE","Utils","token","getLocalStorage","window","location","href","name","lastRun","last","now","Date","res","data","removeLocalStorage","reload","value","localStorage","setItem","JSON","stringify","getItem","parse","removeItem","timestamp","date","d","getDate","m","getMonth","y","getFullYear","hh","getHours","mm","getMinutes","text","matched","replace","match","length","uname","_id","url","method","payload","_url","indexOf","axios","doc","org","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","msg","execCommand","console","log","err","removeChild","navigator","clipboard","writeText","then","fallbackCopyTextToClipboard","trim","split","map","item","i","arr","isLast","key","psid","tag","euc","encodeURIComponent","results","RegExp","exec","decodeURIComponent","_psid","getParameterByName","makeRequest","endpoint","a","qs","getToken","post","params","checkError","Login","props","handleChange","event","setState","target","state","changeHeader","this","username","password","showAlert","title","loading","setLocalStorage","classes","input","marginBottom","width","maxWidth","container","display","flexWrap","cardStyle","marginTop","marginRight","marginLeft","CircularProgress","form","Card","CardContent","Typography","variant","component","color","TextField","label","type","onChange","margin","Button","onClick","onLogin","bind","React","Component","NoteEditDialog","comment","onClose","Fragment","Dialog","open","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","multiline","rowsMax","fullWidth","DialogActions","Doc","isNoteEditOpen","isCopied","isExpanded","admin","copyContent","getCopyContent","linkfb","fbusername","extractFacebookUsername","image","publishAction","field","val","success","newDoc","setDoc","trashed","updateDocField","approved","cmt","generateLocationTag","join","description","cleanFBLink","wanted","deadline","benefit","backgroundColor","padding","duplicateHelper","openDuplicateDocDialog","duplicatedDocs","checkDoc","Fab","size","nl2br","getTimeStr","created","getDateStr","getOrgName","feedback","gotoPublish","content","maxHeight","overflow","className","_renderNonAdminInfo","disabled","_renderDuplicatedWarningIcon","plan","toUpperCase","componentDecorator","rel","_renderPostContent","Divider","toggleTrashDoc","toggleApproved","caption","getImageUrl","openToolsDialog","paddingBottom","updateComment","_renderTrashedDoc","_renderMainCard","getMessageDirectionLastData","arg","getMessageDirection","message","senderId","from","isFromPage","mergeNewMessages","oldArr","newArr","addedMessages","isExistInOldArr","some","unshift","mergeNewConversations","convIds","filter","conv","getTargetId","ev","recipient","sender","removeVietnameseTones","str","TEMPLATES","desc","ToolsDialog","showTemplates","sendInboxData","inboxData","isLinkCopied","response","Object","keys","obj","closeToolsDialog","toast","senders","n","toLowerCase","baseUrl","isWithin24HWindow","handleClose","copyTextToClipboard","sendInbox","goToPageInbox","List","ListItem","button","ListItemText","t","protocol","host","onCopy","_renderSendInboxDialogAsk","onEnter","fetchData","onBackdropClick","substr","_renderError","_renderContent","DuplicateDocDialog","docs","selectedDocID","closeDuplicateDocDialog","DuplicateHelper","seen","push","Home","list","toolsDialogOpen","toolsDialogDoc","duplicateDocDialog","loadData","get","forEach","pushDoc","edit","docid","home","View","_renderDocView","_renderDocNotFound","MaterialUIPickers","publish_time","handleDateChange","getTime","utils","DateFnsUtils","KeyboardButtonProps","Publish","completed","stat","scheduled_publish_time","loadStat","loadInbox","imgStyle","height","hash","alt","src","loader","isDateOK","s","DatePicker","Math","round","onClickOK","doPublish","showCancel","messages","_renderComposerCard","_renderPublishCard","_renderStatCard","_renderInboxCard","_renderCompletedCard","_renderMain","imgLoaderStyle","GetImage","showGetToken","access_token","imgs","fetchFacebookApi","fbtoken","feed","full_picture","picture","status","urlNow","setTimeout","e","alert","float","_data","onSaveToken","_renderGetTokenCard","_renderTitleCard","_renderImageCard","styles","root","flexGrow","grow","menuButton","Header","auth","checked","handleMenu","anchorEl","currentTarget","doLogout","Boolean","showBtns","header","AppBar","Toolbar","IconButton","aria-owns","undefined","aria-haspopup","Menu","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","AdaptiveHeader","withRouter","Alert","handleClickOK","handleCancel","show","aria-describedby","autoFocus","FBPostEditDialog","onEditPost","patch","time","Scheduled","deletePost","confirm","delete","onEditDialogClose","shouldReload","editingPost","posts","expanded","substring","preventDefault","p","j","cloned","loadingComponent","_renderMainView","Socket","socket","io","transports","query","on","handler","getSocket","offAny","Conversations","conversations","activeConversationId","next","openConversation","updateActiveConversation","inboxUpdateHandler","limit","prevState","onYReachEnd","loadMoreConversations","subscribeInbox","unsubscribeInbox","after","paging","cursors","loadingMore","message_count","info","snippet","active","TimeAgo","addLocale","en","timeAgo","MessageView","profile","threadInfo","messageAfter","messagePending","originalTitle","tid","newMessages","onYReachStart","reverse","concat","openConversationOnFB","link","openInNewTab","openMainMenu","handleInputChange","v","handleSendMessage","messaging_type","fetchConversation","prevProps","Promise","all","Back","Content","userName","profile_pic","Actions","lastDirection","showTimeHeader","direction","Footer","format","created_time","images","attachments","image_data","getImages","img","model","CustomContent","preview_url","showImages","sentTime","showTextMsg","opacity","onSend","attachButton","sendDisabled","sendOnReturnDisabled","placeholder","_renderHeader","_renderMessages","_renderInput","Messenger","scrollable","MessageTidChanged","path","Main","publishData","Copyright","theme","Theme","CssBaseline","exact","App","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnVisibilityChange","draggable","pauseOnHover","Guide","data-animate-effect","NoPsid","OldVersion","getPsid","role","backgroundImage","Data","parent","options","subtitle","notice","newState","screen","getFormUrl","scrollToTop","option","_renderSmallBtn","_renderLargeBtn","fontSize","Quiz","Landing","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","pathname","ReactDOM","render","getElementById","URL","process","origin","addEventListener","fetch","contentType","headers","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.73c39ce3.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blueGrey from '@material-ui/core/colors/blueGrey';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: { main: blueGrey[700] },\r\n    secondary: { main: blueGrey[200] },\r\n    error: { main: orange[900] }\r\n  }\r\n})","\r\n/*var ConfigDebug = {\r\n  BACKEND: 'http://localhost:5000/tonghopevent'\r\n}\r\nvar ConfigProduction = {\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent'\r\n}\r\n\r\nvar Config = ConfigDebug\r\nvar MODE = process.env.REACT_APP_MODE\r\nif (MODE === 'production')\r\n  Config = ConfigProduction*/\r\n\r\nconst Config = {\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent',\r\n  SOCKETIO: 'https://nuichatbot.herokuapp.com/',\r\n  SELF_PAGE_ID: '242401956152220',\r\n  INBOX_TITLE: 'tonghopevent',\r\n  INBOX_SEND_ABILITY: true,\r\n}\r\n\r\nexport default Config","import React from 'react'\r\nimport axios from 'axios'\r\nimport Config from './Config'\r\n\r\nconst ORG_CODE = {\r\n  'f1': 'Nhóm HS, SV',\r\n  'f2': 'CLB thuộc trường học',\r\n  'f3': 'Trường công lập',\r\n  'f4': 'Tổ chức phi lợi nhuận',\r\n  'p1': 'Tổ chức có lợi nhuận',\r\n}\r\n\r\nclass Utils {\r\n  static getToken() {\r\n    const token = Utils.getLocalStorage('token')\r\n    if (!token) window.location.href = '#/login'\r\n    else return token\r\n  }\r\n\r\n  static checkDebounce(name) {\r\n    if (!window.lastRun) window.lastRun = {}\r\n    const last = window.lastRun[name] || 0\r\n    const now = Date.now()\r\n    if (now - last < 500) {\r\n      return true\r\n    } else {\r\n      window.lastRun[name] = now\r\n    }\r\n  }\r\n\r\n  static checkError(res) {\r\n    if (res && res.data && res.data.error === 'Invalid token') {\r\n      Utils.removeLocalStorage('token')\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  static setLocalStorage(name, value) {\r\n    localStorage.setItem(name, JSON.stringify(value))\r\n  }\r\n  \r\n  static getLocalStorage(name) {\r\n    const item = localStorage.getItem(name) || null\r\n    if (item === null) return null\r\n    return JSON.parse(localStorage.getItem(name))\r\n  }\r\n  \r\n  static removeLocalStorage(name) {\r\n    localStorage.removeItem(name)\r\n  }\r\n  \r\n  static getDateStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let d = date.getDate()\r\n    let m = date.getMonth() + 1\r\n    let y = date.getFullYear()\r\n    return `${d < 10 ? '0' : ''}${d}-${m < 10 ? '0' : ''}${m}-${y}`\r\n  }\r\n\r\n  static getTimeStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let hh = date.getHours()\r\n    let mm = date.getMinutes()\r\n    return `${hh < 10 ? '0' : ''}${hh}h${mm < 10 ? '0' : ''}${mm}`\r\n  }\r\n\r\n  static extractFacebookUsername(text = '') {\r\n    const matched = text.replace('/pg/', '/').match(/[facebok]+\\.com\\/([^?/]+)/)\r\n    if (!matched || matched.length < 1) return null\r\n    const uname = matched[1]\r\n    if (uname === 'events') return null\r\n    const _id = uname.match(/-([0-9]{7,20})$/)\r\n    if (!_id || _id.length < 1) return uname\r\n    else return _id[1]\r\n  }\r\n\r\n  static makeRequest(url, method = 'get', payload = {}) {\r\n    const token = Utils.getLocalStorage('token')\r\n    const _url = url + (url.indexOf('?') !== -1 ? '&' : '?') + 'token=' + token\r\n    return axios[method](_url, payload)\r\n  }\r\n\r\n  static cleanFBLink(url = '') {\r\n    return url.replace(/[&?](__|eid|fref)[^&?\\s]+/g, '')\r\n  }\r\n\r\n  static getOrgName(doc) {\r\n    return ORG_CODE[doc.org]\r\n  }\r\n\r\n  static fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n    \r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n  \r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n  \r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n  \r\n    document.body.removeChild(textArea);\r\n  }\r\n\r\n  static copyTextToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n      Utils.fallbackCopyTextToClipboard(text);\r\n      return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function() {\r\n      console.log('Async: Copying to clipboard was successful!');\r\n    }, function(err) {\r\n      console.error('Async: Could not copy text: ', err);\r\n    });\r\n  }\r\n\r\n  static nl2br(text) {\r\n    return text.trim().replace(/\\r/g, '').split('\\n').map(function(item, i, arr) {\r\n      const isLast = i === arr.length - 1\r\n      return <span key={i}>{item}{!isLast && <br/>}</span>\r\n    })\r\n  }\r\n\r\n  static getFormUrl(psid, tag) {\r\n    const euc = encodeURIComponent;\r\n    return `https://docs.google.com/forms/d/e/1FAIpQLSds9-as5kOcCr9_gtQ-4xic8-CTSmsQaHEajU-OX4xGpz8wHQ/viewform?usp=pp_url&entry.450789842=${euc(psid)}${tag ? '&entry.1699976597=' + euc(tag) : ''}`;\r\n  }\r\n\r\n  static getParameterByName(name) {\r\n    const url = window.location.href;\r\n    /*eslint-disable */\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    /*eslint-enable */\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\r\n    var results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n\r\n  static getPsid() {\r\n    const _id = Utils.getParameterByName('psid_hashed') || '';\r\n    const _psid = _id.match(/[0-9]{3,20}[A-Z]{3,10}/);\r\n    const psid = _psid ? _psid[0] : 'none';\r\n    return psid;\r\n  }\r\n}\r\n\r\n// used by inbox component\r\nexport const makeRequest = async (method, endpoint, qs = {}, body = {}) => {\r\n  qs.token = Utils.getToken()\r\n  endpoint = endpoint.replace('/inbox/', '/inbox2/');\r\n  const res = method === 'post'\r\n    ? await axios.post(`${Config.BACKEND}${endpoint}`, body, { params: qs })\r\n    : await axios[method](`${Config.BACKEND}${endpoint}`, { params: qs })\r\n  Utils.checkError(res)\r\n  return res.data\r\n}\r\n\r\nexport default Utils\r\n","import React from 'react'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {}\r\n    window.changeHeader('Login')\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value })\r\n  }\r\n\r\n  async onLogin() {\r\n    if (this.state.username === '' || this.state.password === '') {\r\n      return window.showAlert({\r\n        title: 'Please fill in',\r\n        text: 'Please fill in your username and password'\r\n      })\r\n    } else {\r\n      this.setState({loading: true})\r\n      const {username, password} = this.state\r\n      const res = await axios.post(`${Config.BACKEND}/login`, {\r\n        username, password\r\n      })\r\n      this.setState({loading: false})\r\n      if (res.data.token) {\r\n        Utils.setLocalStorage('token', res.data.token)\r\n        window.location.href = '#/'\r\n      } else {\r\n        return window.showAlert({\r\n          title: 'Error',\r\n          text: res.data.error\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async onRegister() {}\r\n\r\n  render() {\r\n    var classes = {\r\n      input: {\r\n        marginBottom: '20px',\r\n        width: '500px',\r\n        maxWidth: '100%'\r\n      },\r\n      container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n      },\r\n      cardStyle: {\r\n        maxWidth: '500px',\r\n        marginTop: '20px',\r\n        marginRight: 'auto',\r\n        marginLeft: 'auto',\r\n      }\r\n    }\r\n\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    const form = (\r\n      <div>\r\n        <Card style={classes.cardStyle}>\r\n          <CardContent>\r\n            <Typography variant=\"h5\" component=\"h2\">Admin - TongHopEvent</Typography>\r\n            <Typography color=\"textSecondary\">Please login to continue</Typography>\r\n            <TextField\r\n              label=\"Username\"\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              style={classes.input}\r\n              onChange={this.handleChange('username')}\r\n              margin=\"normal\"\r\n            />\r\n            <TextField\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={this.state.password}\r\n              style={classes.input}\r\n              onChange={this.handleChange('password')}\r\n              margin=\"normal\"\r\n            />\r\n            <div>\r\n              <Button onClick={this.onLogin.bind(this)} color='primary'>Login</Button>\r\n            </div>\r\n          </CardContent>        \r\n        </Card>\r\n      </div>\r\n    )\r\n\r\n    return this.state.loading ? loading : form\r\n  }\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport PropTypes from 'prop-types'\r\n\r\nclass NoteEditDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      comment: props.doc.comment || '',\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    doc: PropTypes.any.isRequired,\r\n  }\r\n\r\n  render() {\r\n    const { comment } = this.state\r\n    const { onClose } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">Ghi chú</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              Bạn có thể để lại ghi chú cho bài viết này. Chỉ có Admin mới nhìn thấy ghi chú.\r\n            </DialogContentText>\r\n            <TextField\r\n              multiline\r\n              rowsMax=\"20\"\r\n              value={comment}\r\n              onChange={event => {this.setState({ comment: event.target.value })}}\r\n              margin=\"normal\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => onClose(false)} color=\"primary\">\r\n              Quay lại\r\n            </Button>\r\n            <Button onClick={() => onClose(comment)} color=\"primary\">\r\n              LƯU GHI CHÚ\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NoteEditDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport Linkify from 'react-linkify'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport CheckIcon from '@material-ui/icons/Check'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\nimport NoteEditDialog from './NoteEditDialog'\r\nimport './Doc.css'\r\n\r\nclass Doc extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: false,\r\n      isNoteEditOpen: false,\r\n      isCopied: false,\r\n      isExpanded: !this.props.admin,\r\n      copyContent: this.props.admin ? this.getCopyContent() : '',\r\n    }\r\n\r\n    if (this.props.doc && this.props.doc.linkfb) {\r\n      this.fbusername = Utils.extractFacebookUsername(this.props.doc.linkfb)\r\n    }\r\n\r\n    if (props.admin) {\r\n      if (props.doc.image)\r\n        this.state.publishAction = 'publish'\r\n      else if (this.fbusername)\r\n        this.state.publishAction = 'getimage'\r\n      else\r\n        this.state.publishAction = null\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    doc: PropTypes.object.isRequired,\r\n  }\r\n\r\n  async updateDocField(field, val, url, data) {\r\n    this.setState({loading: true})\r\n    const {doc} = this.props\r\n    const res = await axios.post(url, data)\r\n    if (res.data.success) {\r\n      const newDoc = JSON.parse(JSON.stringify(doc))\r\n      newDoc[field] = val\r\n      this.props.setDoc(this.props.i, newDoc)\r\n    } else {\r\n      window.showAlert({\r\n        title: 'Error',\r\n        text: res.data.error\r\n      })\r\n    }\r\n    this.setState({loading: false})\r\n  }\r\n\r\n  async toggleTrashDoc() {\r\n    const { doc } = this.props\r\n    const trashed = !doc.trashed\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'trashed', trashed,\r\n      `${Config.BACKEND}/doc/${doc.id}/trashed?token=${token}`, {trashed}\r\n    )\r\n  }\r\n\r\n  async toggleApproved() {\r\n    const {doc} = this.props\r\n    const approved = !doc.approved\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'approved', approved,\r\n      `${Config.BACKEND}/doc/${doc.id}/approved?token=${token}`, {approved}\r\n    )\r\n  }\r\n\r\n  async updateComment(cmt) {\r\n    const {doc} = this.props\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'comment', cmt || '',\r\n      `${Config.BACKEND}/doc/${doc.id}/comment?token=${token}`, {comment: cmt}\r\n    )\r\n  }\r\n\r\n  getCopyContent() {\r\n    const { doc } = this.props\r\n\r\n    const content = `-- ${doc.name} --\\n` +\r\n    `${this.generateLocationTag(doc)} ${doc.type.join(' ')}\\n\\n` +\r\n    `● Mô tả: ${doc.description.trim()}\\n\\n` +\r\n    `● Link facebook: ${Utils.cleanFBLink(doc.linkfb)}\\n` +\r\n    (!!doc.wanted ? '● Yêu cầu đối tượng: ' + doc.wanted.join(', ').trim() + '\\n' : '') + \r\n    (!!doc.deadline ? '● Deadline tuyển nhân sự: ' + doc.deadline.trim() + '\\n' : '') +\r\n    (!!doc.benefit ? '● Quyền lợi khi tham gia dự án:\\n' + doc.benefit.trim() + '\\n' : '') +\r\n    `\\nTrackID:${doc.psid}:${doc.id}`\r\n\r\n    return content.trim()\r\n  }\r\n\r\n  generateLocationTag(doc) {\r\n    const { location } = doc\r\n    if (!location) return ''\r\n    return location === 'Toàn quốc'\r\n      ? `#dự_án_toàn_quốc`\r\n      : `#dự_án_ở_${doc.location.replace(/\\s+/g, '_')}`\r\n  }\r\n\r\n  getImageUrl() {\r\n    const { doc } = this.props\r\n    return doc.image ? 'https://drive.google.com/uc?export=view&id=' + doc.image[0] : null\r\n  }\r\n\r\n  _renderNonAdminInfo() {\r\n    const { doc } = this.props\r\n    return <p style={{\r\n      backgroundColor: doc.trashed ? '#ffa3a3' : '#eee',\r\n      padding: '10px',\r\n      width: '100%'}}\r\n    >\r\n      <center>\r\n        {doc.trashed ? 'Bài viết này đã bị từ chối'\r\n          : (doc.approved\r\n            ? 'Bài viết này đã được duyệt và sẽ sớm đc đăng lên fanpage'\r\n            : 'Bài viết này đang đợi để được kiểm duyệt')\r\n        }\r\n      </center>\r\n    </p>\r\n  }\r\n\r\n  _renderDuplicatedWarningIcon() {\r\n    const { doc, duplicateHelper, openDuplicateDocDialog } = this.props\r\n    if (!duplicateHelper || doc.approved) return null\r\n    const duplicatedDocs = duplicateHelper.checkDoc(doc)\r\n    if (!duplicatedDocs) return null\r\n    else return (\r\n      <Fab\r\n        size=\"small\"\r\n        color=\"primary\"\r\n        style={{marginRight: '15px'}}\r\n        onClick={() => openDuplicateDocDialog(duplicatedDocs, doc.id)}\r\n      >\r\n        <WarningIcon />\r\n      </Fab>\r\n    )\r\n  }\r\n\r\n  _renderPostContent() {\r\n    const { doc } = this.props\r\n    return (\r\n      <React.Fragment>\r\n        <p>{this.generateLocationTag(doc)} {doc.type.join(' ')}</p>\r\n        <p>{Utils.nl2br(doc.description)}</p>\r\n        <p>\r\n          ● Link facebook: {Utils.cleanFBLink(doc.linkfb)}<br/>\r\n          {!!doc.wanted && <span>● Yêu cầu đối tượng: {doc.wanted.join(', ')}<br/></span>}\r\n          {!!doc.deadline && <span>● Deadline tuyển nhân sự: {Utils.nl2br(doc.deadline)}<br/></span>}\r\n          {!!doc.benefit && <span>● Quyền lợi khi tham gia dự án: <br/>{Utils.nl2br(doc.benefit)}<br/></span>}\r\n        </p>\r\n        {this.props.admin && <p>TrackID:{doc.psid}:{doc.id}</p>}\r\n        {!!doc.image && <p>Ảnh tuỳ chọn: {'https://drive.google.com/open?id=' + doc.image[0]}</p>}\r\n        <p>\r\n          (Gửi lúc {Utils.getTimeStr(doc.created)} ngày {Utils.getDateStr(doc.created)})\r\n          {!!doc.org && <span><br/>Đơn vị tổ chức: {Utils.getOrgName(doc)}</span>}\r\n        </p>\r\n        {(!this.props.admin && !!doc.feedback) && <p>● Câu hỏi, góp ý: {doc.feedback}</p>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  _renderMainCard() {\r\n    const { doc } = this.props\r\n    const { isExpanded, copyContent, publishAction, isNoteEditOpen } = this.state\r\n    const gotoPublish = this.props.gotoPublish || (() => {})\r\n\r\n    const componentDecorator = (href, text, key) => (\r\n      <a href={href} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\r\n        {text}\r\n      </a>\r\n    )\r\n\r\n    /* TEXT CONTENT (visible for all) */\r\n\r\n    const content = <div>\r\n      <div style={isExpanded ? null : {maxHeight: '315px', overflow:'hidden', position: 'relative'}} className={isExpanded ? null : 'fade-out'}>\r\n        {!this.props.admin && this._renderNonAdminInfo()}\r\n        <p>\r\n          {doc.approved && <Fab size=\"small\" color=\"primary\" style={{marginRight: '15px'}} disabled>\r\n            <CheckIcon />\r\n          </Fab>}\r\n          {this._renderDuplicatedWarningIcon()}\r\n          <b>-- {doc.name} --</b>\r\n          {doc.plan && <p><span className='doc-plan'>█ Gói {doc.plan.toUpperCase()}</span></p>}\r\n        </p>\r\n        <Linkify componentDecorator={componentDecorator}>\r\n          {this._renderPostContent()}\r\n        </Linkify>\r\n      </div>\r\n      {this.props.admin && <div>\r\n        <center>\r\n          <Button onClick={() => this.setState({isExpanded: !isExpanded})}>\r\n            {isExpanded ? 'Thu gọn' : 'Hiện thêm ...'}\r\n          </Button>\r\n        </center>\r\n      </div>}\r\n      <Divider />\r\n\r\n      {/* ADMIN BUTTONS */}\r\n\r\n      {this.props.admin &&\r\n        <React.Fragment>\r\n          {!this.state.loading ? <div>\r\n            {doc.comment && doc.comment.trim().length > 0 && <p><b>● Ghi chú:</b> {Utils.nl2br(doc.comment)}</p>}\r\n            {!!doc.feedback && <p>● Câu hỏi, góp ý: {doc.feedback}</p>}\r\n            <Button variant=\"outlined\" onClick={this.toggleTrashDoc.bind(this)} color='primary'>Xóa</Button>\r\n            <Button variant=\"outlined\" onClick={this.toggleApproved.bind(this)} color='primary'>Tick</Button>\r\n            {publishAction &&\r\n              <Button variant=\"outlined\" onClick={() => {gotoPublish({\r\n                caption: copyContent,\r\n                url: this.getImageUrl(),\r\n                fbusername: this.fbusername,\r\n                psid: doc.psid,\r\n              }, publishAction)}} color='primary'>Đăng bài</Button>\r\n            }\r\n            <Button variant=\"outlined\" onClick={() => this.setState({isNoteEditOpen: true})} color='primary'>Ghi chú</Button>\r\n            <Button variant=\"outlined\" onClick={() => this.props.openToolsDialog(doc)} color='primary'>+</Button>\r\n          </div>\r\n          : <center>\r\n            <CircularProgress />\r\n          </center>}\r\n        </React.Fragment>\r\n      }\r\n    </div>\r\n\r\n    /* CARD BACKGROUND */\r\n\r\n    return (\r\n      <div style={{paddingBottom: '20px'}}>\r\n        <Card>\r\n          <CardContent\r\n            style={{backgroundColor: (doc.approved && this.props.admin) ? '#cfd8dc' : '#fff'}}\r\n            className={(doc.approved && this.props.admin) ? 'approved' : null}\r\n          >\r\n            {content}\r\n          </CardContent>\r\n        </Card>\r\n        {isNoteEditOpen && <NoteEditDialog doc={doc} onClose={(cmt) => {\r\n          this.setState({isNoteEditOpen: false})\r\n          if (cmt !== false) this.updateComment(cmt)\r\n        }}/>}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderTrashedDoc() {\r\n    const { doc } = this.props\r\n    if (this.state.loading) return <center><CircularProgress /></center>\r\n    else return <p>\r\n      <b>(Đã xóa)</b> {doc.name} &nbsp;&nbsp;&nbsp;\r\n      <Button\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        color=\"primary\"\r\n        className=\"restore-btn\"\r\n        onClick={this.toggleTrashDoc.bind(this)}\r\n      >\r\n        Khôi phục\r\n      </Button>\r\n    </p>\r\n  }\r\n\r\n  render() {\r\n    const { doc, admin } = this.props\r\n    return doc.trashed && admin\r\n      ? this._renderTrashedDoc()\r\n      : this._renderMainCard()\r\n  }\r\n}\r\n\r\nexport default Doc","import Config from '../../Config';\r\n\r\nconst getMessageDirectionLastData = {arg: null, res: null};\r\nexport const getMessageDirection = (message) => {\r\n  if (getMessageDirectionLastData.arg === message) {\r\n    return getMessageDirectionLastData.res;\r\n  } else {\r\n    getMessageDirectionLastData.arg = message;\r\n    const senderId = message.from.id;\r\n    const isFromPage = senderId === Config.SELF_PAGE_ID || senderId === '182794865548469';\r\n    getMessageDirectionLastData.res = isFromPage ? 'outgoing' : 'incoming';\r\n    return getMessageDirectionLastData.res;\r\n  }\r\n};\r\n\r\nexport const mergeNewMessages = (oldArr, newArr) => {\r\n  const addedMessages = [];\r\n  const isExistInOldArr = (id) => oldArr.some(msg => msg.id === id);\r\n  for (const msg of newArr) {\r\n    if (isExistInOldArr(msg.id)) break;\r\n    addedMessages.unshift(msg);\r\n  }\r\n  return [...oldArr, ...addedMessages];\r\n};\r\n\r\nexport const mergeNewConversations = (oldArr, newArr) => {\r\n  const convIds = {};\r\n  return [...newArr, ...oldArr].filter(conv => {\r\n    if (!convIds[conv.id]) {\r\n      convIds[conv.id] = true;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  });\r\n}\r\n\r\nexport const getTargetId = (ev) => {\r\n  if (ev.recipient && ev.recipient.id !== Config.SELF_PAGE_ID) {\r\n    return ev.recipient.id;\r\n  } else if (ev.sender && ev.sender.id !== Config.SELF_PAGE_ID) {\r\n    return ev.sender.id;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n/*eslint-disable */\r\nexport const removeVietnameseTones = (str) => {\r\n  str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,\"a\"); \r\n  str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,\"e\"); \r\n  str = str.replace(/ì|í|ị|ỉ|ĩ/g,\"i\"); \r\n  str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,\"o\"); \r\n  str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,\"u\"); \r\n  str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,\"y\"); \r\n  str = str.replace(/đ/g,\"d\");\r\n  str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, \"A\");\r\n  str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, \"E\");\r\n  str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, \"I\");\r\n  str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, \"O\");\r\n  str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, \"U\");\r\n  str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, \"Y\");\r\n  str = str.replace(/Đ/g, \"D\");\r\n  // Some system encode vietnamese combining accent as individual utf-8 characters\r\n  // Một vài bộ encode coi các dấu mũ, dấu chữ như một kí tự riêng biệt nên thêm hai dòng này\r\n  str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); // ̀ ́ ̃ ̉ ̣  huyền, sắc, ngã, hỏi, nặng\r\n  str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); // ˆ ̆ ̛  Â, Ê, Ă, Ơ, Ư\r\n  // Remove extra spaces\r\n  // Bỏ các khoảng trắng liền nhau\r\n  str = str.replace(/ + /g,\" \");\r\n  str = str.trim();\r\n  // Remove punctuations\r\n  // Bỏ dấu câu, kí tự đặc biệt\r\n  str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\" \");\r\n  return str;\r\n};\r\n/*eslint-enable */","import React from 'react'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Utils from '../Utils'\r\nimport Config from '../Config'\r\nimport PropTypes from 'prop-types'\r\nimport { toast } from 'react-toastify'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport { removeVietnameseTones } from './messenger/utils'\r\nimport './ToolsDialog.css'\r\n\r\nconst copyObj = (obj) => JSON.parse(JSON.stringify(obj))\r\n\r\nconst TEMPLATES = [\r\n  {\r\n    desc: 'Báo trùng bài',\r\n    text: 'Đã có người nhập thông tin của dự án / cuộc thi / sự kiện này. Không biết bạn có muốn bổ sung hay thay đổi gì không nhỉ?\\n\\nNếu không, chúng mình sẽ xóa thông tin bạn đã nhập để không bị trùng với bài đã đăng.'\r\n  },{\r\n    desc: 'Báo bị xóa vì ko phù hợp',\r\n    text: 'Xin chào bạn,\\n\\nDự án / cuộc thi / sự kiện của bạn đã bị xóa do không phù hợp với Điều khoản sử dụng của chúng mình.\\n\\nHãy tham khảo Điều khoản sử dụng của fanpage tại đây: https://sites.google.com/view/tonghopevent'\r\n  }, {\r\n    desc: 'Báo dự án có lợi nhuận',\r\n    text: 'Xin chào bạn,\\n\\nDự án / cuộc thi / sự kiện của bạn được điều hành bởi một tổ chức / cá nhân hoạt động có lợi nhuận. Dựa theo Điều khoản sử dụng của chúng mình, bài của bạn phải trả phí 100.000 VNĐ để có thể được đăng bài lên fanpage nhé.\\n\\nHãy tham khảo Điều khoản sử dụng của fanpage tại đây: https://sites.google.com/view/tonghopevent'\r\n  },\r\n  {\r\n    desc: 'Báo thiếu thông tin',\r\n    text: 'Admin đã xem bài viết của bạn. Tuy nhiên, do bài viết của bạn còn thiếu thông tin, như giới thiệu, ý nghĩa dự án / cuộc thi / sự kiện, nên chúng mình chưa thể phê duyệt được. Bạn hãy điền lại form với đầy đủ thông tin hơn nhé!\\n\\nHãy tham khảo ví dụ sau: https://bit.ly/2TZKbee'\r\n  },\r\n  {\r\n    desc: 'Điền lại (không paste link)',\r\n    text: 'Admin đã xem bài viết của bạn. Tuy nhiên, chúng mình không thể xử lý nếu bạn chỉ copy-paste mỗi link bài viết. Bạn hãy điền lại form thật rõ ràng, bao gồm cả phần giới thiệu, ý nghĩa dự án / cuộc thi / sự kiện nhé.\\n\\nHãy tham khảo ví dụ sau: https://bit.ly/2TZKbee'\r\n  },\r\n]\r\n\r\nclass ToolsDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loading: true,\r\n      error: false,\r\n      showTemplates: true,\r\n      sendInboxData: null,\r\n      inboxData: {},\r\n      isLinkCopied: false,\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    open: PropTypes.bool.isRequired,\r\n    closeToolsDialog: PropTypes.func.isRequired,\r\n    name: PropTypes.string,\r\n    psid: PropTypes.string,\r\n    doc: PropTypes.any.isRequired,\r\n  }\r\n\r\n  async fetchData() {\r\n    this.setState({ error: false, loading: true, showTemplates: true, isLinkCopied: false })\r\n    const response = await Utils.makeRequest(\r\n      `${Config.BACKEND}/inbox/${this.props.psid}`\r\n    )\r\n    const { data } = response\r\n    if (data && Object.keys(data).length > 0) {\r\n      this.setState({\r\n        loading: false,\r\n        error: false,\r\n        inboxData: data,\r\n      })\r\n    } else {\r\n      this.setState({\r\n        loading: false,\r\n        error: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  async sendInbox() {\r\n    const inboxData = copyObj(this.state.sendInboxData)\r\n    this.setState({sendInboxData: null})\r\n    this.props.closeToolsDialog()\r\n    const res = await Utils.makeRequest(\r\n      `${Config.BACKEND}/inbox/${this.props.psid}`,\r\n      'post', { message: '⬢ ' + inboxData.text }\r\n    )\r\n    if (res.data && res.data.success) {\r\n      toast('Đã gửi tin nhắn thành công!')\r\n    } else {\r\n      toast('⚠️⚠️⚠️⚠️ Có lỗi xảy ra, ko thể gửi tin nhắn ⚠️⚠️⚠️⚠️')\r\n    }\r\n  }\r\n\r\n  goToPageInbox() {\r\n    const { inboxData: {id, senders} } = this.state;\r\n    const name = senders.data[0].name;\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-')\r\n    const baseUrl = window.location.href.replace(/#.*/, '');\r\n    window.open(`${baseUrl}#/msg/${id}/${n}`, '_blank').focus();\r\n    this.props.closeToolsDialog();\r\n  }\r\n\r\n  _renderSendInboxDialogAsk() {\r\n    const { sendInboxData } = this.state;\r\n    const isWithin24HWindow = (Date.now() - this.props.doc.created) < (86400 * 1000)\r\n    const handleClose = () => this.setState({sendInboxData: null});\r\n    if (!sendInboxData) return null;\r\n    else return <Dialog open={!!sendInboxData} onClose={handleClose}>\r\n      <DialogTitle id=\"alert-dialog-title\">{sendInboxData.desc}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {\r\n            isWithin24HWindow\r\n             ? 'Gửi tin nhắn có nội dung như sau (có thể sửa):'\r\n             : 'Không thể tự động gửi tin nhắn. Hãy copy-paste và inbox thủ công:'\r\n          }<br/><br/>\r\n          <TextField\r\n            multiline\r\n            rowsMax=\"20\"\r\n            value={sendInboxData.text}\r\n            onChange={event => {this.setState({\r\n              sendInboxData: {\r\n                ...sendInboxData,\r\n                text: event.target.value,\r\n              }\r\n            })}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          />\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\"> Quay lại </Button>\r\n        {!isWithin24HWindow\r\n          && <Button onClick={() => Utils.copyTextToClipboard(sendInboxData.text)} color=\"primary\"> Copy tin nhắn </Button>\r\n        }\r\n        {isWithin24HWindow\r\n          ? <Button onClick={() => this.sendInbox()} color=\"primary\"> GỬI </Button>\r\n          : <Button onClick={() => this.goToPageInbox()} color=\"primary\"> Đi tới inbox </Button>\r\n        }\r\n      </DialogActions>\r\n    </Dialog>\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <List>\r\n        <ListItem button>\r\n          <ListItemText primary=\"(Có lỗi xảy ra)\" />\r\n        </ListItem>\r\n        <ListItem button onClick={this.props.closeToolsDialog}>\r\n          <ListItemText primary=\"Quay lại\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  _renderContent() {\r\n    const { inboxData, showTemplates, isLinkCopied } = this.state\r\n\r\n    return (\r\n      <List>\r\n        <ListItem button onClick={this.goToPageInbox.bind(this)}>\r\n          <ListItemText\r\n            primary=\"Đi tới inbox\"\r\n            secondary={`Tên FB: ${inboxData.senders.data[0].name}`}\r\n          />\r\n        </ListItem>\r\n        <Divider />\r\n        {!showTemplates && <ListItem button onClick={() => this.setState({showTemplates: true})}>\r\n          <ListItemText primary={`💬 (Hiện các mẫu tin nhắn)`} />\r\n        </ListItem>}\r\n        {showTemplates && TEMPLATES.map((t, i) => {\r\n          return <ListItem button onClick={() => this.setState({ sendInboxData: t })} key={i}>\r\n            <ListItemText primary={`💬 ${t.desc}`} />\r\n          </ListItem>\r\n        })}\r\n        <Divider />\r\n          <CopyToClipboard\r\n            text={`${window.location.protocol}//${window.location.host}/data/#/view/${this.props.doc.id}`}\r\n            onCopy={() => this.setState({isLinkCopied: true})}\r\n          >\r\n            <ListItem button>\r\n              <ListItemText primary={isLinkCopied ? \"(Đã copy link)\" : \"Copy link bài viết\"} />\r\n            </ListItem>\r\n          </CopyToClipboard>\r\n        <Divider />\r\n        <ListItem button onClick={this.props.closeToolsDialog}>\r\n          <ListItemText primary=\"Quay lại\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { name, open } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {this._renderSendInboxDialogAsk()}\r\n        <Dialog\r\n          open={open}\r\n          onEnter={this.fetchData.bind(this)}\r\n          onBackdropClick={this.props.closeToolsDialog}\r\n          className=\"tools-dialog\"\r\n          aria-labelledby=\"simple-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"simple-dialog-title\">{name ? name.substr(0,24) : ''}</DialogTitle>\r\n          {this.state.loading\r\n            ? <center><CircularProgress /></center>\r\n            : this.state.error ? this._renderError() : this._renderContent()\r\n          }\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ToolsDialog\r\n","import React from 'react'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport PropTypes from 'prop-types'\r\nimport Utils from '../Utils'\r\n\r\nclass DuplicateDocDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {}\r\n  }\r\n\r\n  static propTypes = {\r\n    docs: PropTypes.any,\r\n    selectedDocID: PropTypes.any,\r\n    closeDuplicateDocDialog: PropTypes.func.isRequired,\r\n  }\r\n\r\n  _renderContent() {\r\n    const { docs, selectedDocID } = this.props\r\n\r\n    return (\r\n      <List>\r\n        {docs.map((doc) => {\r\n          if (doc.id === selectedDocID) return null\r\n          else return <ListItem button onClick={\r\n            () => window.open(`/data/#/view/${doc.id}`, '_blank')\r\n          } key={doc.id}>\r\n            <ListItemText\r\n              primary={doc.name}\r\n              secondary={`${Utils.getDateStr(doc.created)} lúc ${Utils.getTimeStr(doc.created)}`}\r\n            />\r\n          </ListItem>\r\n        })}\r\n        <Divider />\r\n        <ListItem button onClick={this.props.closeDuplicateDocDialog}>\r\n          <ListItemText primary=\"Quay lại\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { docs } = this.props\r\n\r\n    return (\r\n      <Dialog\r\n        open={!!docs}\r\n        aria-labelledby=\"simple-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"simple-dialog-title\">Bài đăng trùng</DialogTitle>\r\n        <DialogContent>\r\n          Bài đăng này có thể bị trùng với những bài sau:\r\n        </DialogContent>\r\n        {docs && this._renderContent()}\r\n      </Dialog>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DuplicateDocDialog\r\n","\r\nimport Utils from './Utils'\r\n\r\nclass DuplicateHelper {\r\n  seen = {}\r\n\r\n  /**\r\n   * Remember that we've seen this doc\r\n   * @param {*} doc \r\n   */\r\n  pushDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    if (!uname) return null\r\n    if (this.seen[uname]) {\r\n      this.seen[uname].push(doc)\r\n    } else {\r\n      this.seen[uname] = [doc]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns arr of docs if doc is seen\r\n   * Returns null if doc isn't seen\r\n   * @param {*} doc \r\n   */\r\n  checkDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    const arr = this.seen[uname]\r\n    return (arr && arr.length > 1) ? arr : null\r\n  }\r\n\r\n  /**\r\n   * Clear all remembered docs\r\n   */\r\n  clear() {\r\n    this.seen = {}\r\n  }\r\n}\r\n\r\nexport default DuplicateHelper","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Doc from '../components/Doc'\r\nimport ToolsDialog from '../components/ToolsDialog'\r\nimport DuplicateDocDialog from '../components/DuplicateDocDialog'\r\nimport DuplicateHelper from '../DuplicateHelper'\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      list: [],\r\n      toolsDialogOpen: false,\r\n      toolsDialogDoc: {},\r\n      duplicateHelper: new DuplicateHelper(),\r\n      duplicateDocDialog: null,\r\n      selectedDocID: '',\r\n    }\r\n    window.changeHeader('Quản lý dữ liệu - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n  }\r\n\r\n  async loadData() {\r\n    const duplicateHelper = new DuplicateHelper()\r\n    const token = Utils.getToken()\r\n    const res = await axios.get(`${Config.BACKEND}/feed?token=${token}`)\r\n    Utils.checkError(res)\r\n    res.data.forEach(doc => duplicateHelper.pushDoc(doc))\r\n    this.setState({\r\n      loading: false,\r\n      list: res.data,\r\n      duplicateHelper\r\n    })\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value })\r\n  }\r\n\r\n  onClickEdit() {\r\n    this.setState({edit: true})\r\n  }\r\n\r\n  setDoc(i, data) {\r\n    this.setState(state => {\r\n      const list = state.list\r\n      list[i] = data\r\n      return {list}\r\n    })\r\n  }\r\n\r\n  openToolsDialog(doc) {\r\n    this.setState({\r\n      toolsDialogOpen: true,\r\n      toolsDialogDoc: doc\r\n    })\r\n  }\r\n\r\n  openDuplicateDocDialog(docs, docid) {\r\n    this.setState({\r\n      duplicateDocDialog: docs,\r\n      selectedDocID: docid,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    var classes = {\r\n      input: {\r\n        marginBottom: '20px',\r\n        width: '500px',\r\n        maxWidth: '100%'\r\n      },\r\n      container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n      },\r\n      cardStyle: {\r\n        //maxWidth: '800px',\r\n        marginTop: '20px',\r\n        marginRight: '1em',\r\n        marginLeft: '1em',\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n      }\r\n    }\r\n\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    const { gotoPublish } = this.props\r\n    const { duplicateDocDialog, duplicateHelper, selectedDocID } = this.state\r\n    const home = (\r\n      <React.Fragment>\r\n        <div style={classes.cardStyle} className=\"bootstrap-wrapper no-gutters\">\r\n          {\r\n            this.state.list.length === 0 && <center><h2>Chưa có bài đăng nào</h2></center>\r\n          }\r\n          {this.state.list.map((doc, i) => {\r\n            return doc ? (\r\n              <div key={doc.id} className=\"col col-xl-4 col-lg-6 col-sm-12\">\r\n                <Doc\r\n                  doc={doc}\r\n                  setDoc={this.setDoc.bind(this)}\r\n                  i={i}\r\n                  admin\r\n                  gotoPublish={gotoPublish}\r\n                  openToolsDialog={this.openToolsDialog.bind(this)}\r\n                  openDuplicateDocDialog={this.openDuplicateDocDialog.bind(this)}\r\n                  duplicateHelper={duplicateHelper}\r\n                />\r\n              </div>\r\n            ) : null\r\n          })}\r\n        </div>\r\n        <ToolsDialog\r\n          open={this.state.toolsDialogOpen}\r\n          closeToolsDialog={() => this.setState({toolsDialogOpen: false})}\r\n          name={this.state.toolsDialogDoc.name}\r\n          psid={this.state.toolsDialogDoc.psid}\r\n          doc={this.state.toolsDialogDoc}\r\n        />\r\n        <DuplicateDocDialog\r\n          docs={duplicateDocDialog}\r\n          selectedDocID={selectedDocID}\r\n          closeDuplicateDocDialog={() => this.setState({duplicateDocDialog: null})}\r\n        />\r\n      </React.Fragment>\r\n    )\r\n\r\n    return this.state.loading ? loading : home\r\n  }\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Doc from '../components/Doc'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass View extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      doc: {},\r\n    }\r\n    window.changeHeader('Quản lý dữ liệu - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n  }\r\n\r\n  async loadData() {\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${Config.BACKEND}/doc/${this.props.id}?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, doc: null})\r\n    else\r\n      this.setState({loading: false, doc: res.data})\r\n  }\r\n\r\n  _renderDocView() {\r\n    return (\r\n      <div style={classes.cardStyle}>\r\n        <Doc doc={this.state.doc || {}} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderDocNotFound() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>Có lỗi xảy ra</h2>\r\n        Bài đăng này không tồn tại hoặc đã bị xoá<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    return this.state.loading ? loading : \r\n      this.state.doc ? this._renderDocView() : this._renderDocNotFound()\r\n  }\r\n}\r\n\r\nexport default View","import 'date-fns';\r\nimport React from 'react';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nclass MaterialUIPickers extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      publish_time: new Date(\r\n        Date.now() + 20 * 60 * 1000\r\n      )\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.handleDateChange(this.state.publish_time.getTime() / 1000)\r\n  }\r\n\r\n  handleDateChange(date) {\r\n    this.setState({publish_time: date})\r\n    this.props.handleDateChange(date.getTime() / 1000)\r\n  }\r\n\r\n  render() {\r\n    const { publish_time } = this.state;\r\n\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          margin=\"normal\"\r\n          id=\"mui-pickers-date\"\r\n          label=\"Date picker\"\r\n          value={publish_time}\r\n          onChange={this.handleDateChange.bind(this)}\r\n          KeyboardButtonProps={{\r\n            'aria-label': 'change date',\r\n          }}\r\n        />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        <KeyboardTimePicker\r\n          margin=\"normal\"\r\n          id=\"mui-pickers-time\"\r\n          label=\"Time picker\"\r\n          value={publish_time}\r\n          onChange={this.handleDateChange.bind(this)}\r\n          KeyboardButtonProps={{\r\n            'aria-label': 'change time',\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MaterialUIPickers;","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Img from 'react-image'\r\nimport DatePicker from '../components/DatePicker'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass Publish extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      completed: false,\r\n      loading: true,\r\n      stat: {},\r\n      inboxData: null,\r\n    }\r\n    if (props.data) {\r\n      this.state.caption = props.data.caption\r\n      this.state.url = props.data.url\r\n      this.state.psid = props.data.psid\r\n      this.state.scheduled_publish_time = 0\r\n    }\r\n    window.changeHeader('Công cụ đăng bài - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadStat()\r\n    this.loadInbox()\r\n  }\r\n\r\n  async loadStat() {\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${Config.BACKEND}/publish/stat?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, stat: []})\r\n    else\r\n      this.setState({loading: false, stat: res.data})\r\n  }\r\n\r\n  async loadInbox() {\r\n    const { data } = await Utils.makeRequest(`${Config.BACKEND}/inbox/${this.state.psid}`)\r\n    if (data && Object.keys(data).length > 0) {\r\n      this.setState({ inboxData: data })\r\n    }\r\n  }\r\n  \r\n  async doPublish() {\r\n    this.setState({loading: true})\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.post(`${Config.BACKEND}/publish?token=${token}`, {\r\n      caption: this.state.caption,\r\n      url: this.state.url,\r\n      scheduled_publish_time: this.state.scheduled_publish_time\r\n    })\r\n    if (res.data.id)\r\n      this.setState({loading: false, completed: true})\r\n    else\r\n      window.showAlert({\r\n        title: 'Không thể đăng bài',\r\n        text: 'Có lỗi xảy ra'\r\n      })\r\n  }\r\n\r\n  _renderComposerCard() {\r\n    const imgStyle = {\r\n      height: '300px',\r\n      maxWidth: '100%',\r\n    }\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/'}>Trở về</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Soạn bài đăng</b>\r\n          </p>\r\n          <center>\r\n            <Img alt=''\r\n              src={this.state.url}\r\n              style={imgStyle}\r\n              loader={<div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>}\r\n            />  \r\n          </center>\r\n          <TextField\r\n            label=\"Nội dung bài đăng\"\r\n            multiline\r\n            rowsMax=\"20\"\r\n            value={this.state.caption}\r\n            onChange={event => {this.setState({ caption: event.target.value });}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          />\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderPublishCard() {\r\n    const { scheduled_publish_time } = this.state\r\n    const isDateOK = (scheduled_publish_time - (Date.now() / 1000)) > 15*60\r\n    const s = scheduled_publish_time * 1000\r\n\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p><b>Lên lịch bài đăng</b></p>\r\n          <DatePicker\r\n            handleDateChange={(date) => this.setState({ scheduled_publish_time: Math.round(date) })}\r\n          />\r\n          <br/><br/>\r\n          {isDateOK && <Button variant='outlined' onClick={() => {\r\n            window.showAlert({\r\n              title: 'Xác nhận đăng bài',\r\n              text: `Đăng bài vào lúc ${Utils.getTimeStr(s)} ngày ${Utils.getDateStr(s)} ?`,\r\n              onClickOK: this.doPublish.bind(this),\r\n              showCancel: true\r\n            })\r\n          }}>Đăng bài</Button>}\r\n          {!isDateOK && <p style={{color: 'red'}}>Giờ đăng bài phải cách hiện tại ít nhất 15 phút</p>}\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderCompletedCard() {\r\n    const { scheduled_publish_time } = this.state\r\n    const s = scheduled_publish_time * 1000\r\n\r\n    return (\r\n      <div style={classes.cardStyle}>\r\n        <Card>\r\n          <CardContent>\r\n            <h2>Đăng bài thành công</h2>\r\n            <p>Bài viết đã được đặt giờ để đăng vào lúc {Utils.getTimeStr(s)} ngày {Utils.getDateStr(s)}</p>\r\n            <Button\r\n              variant='outlined'\r\n              onClick={() => window.location.hash = '#/'}>Trở về trang chủ</Button>\r\n          </CardContent>\r\n        </Card>\r\n      <br/><br/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderStatCard() {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p><b>Các bài đăng đã lên lịch</b></p>\r\n          <ul>\r\n            {this.state.stat.map(s => {\r\n              return <li key={s}>{Utils.getTimeStr(s)} ngày {Utils.getDateStr(s)}</li>\r\n            })}\r\n          </ul>\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderInboxCard() {\r\n    const { inboxData } = this.state;\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          {!inboxData && <center><CircularProgress /></center>}\r\n          {inboxData && <>\r\n            <b>Tin nhắn mới nhất</b> (ở trên là mới, dưới là cũ)<br/>\r\n            {inboxData.messages.data.map(msg => <p key={msg.id}>\r\n              <b>{msg.from.name}</b>: {msg.message}\r\n            </p>)}\r\n          </>}\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderMain() {\r\n    return (\r\n      <React.Fragment>\r\n        <div style={classes.cardStyle}>\r\n          {this._renderComposerCard()}\r\n        </div>\r\n        <div style={classes.cardStyle}>\r\n          {this._renderPublishCard()}\r\n        </div>\r\n        <div style={classes.cardStyle}>\r\n          {this._renderStatCard()}\r\n        </div>\r\n        <div style={classes.cardStyle}>\r\n          {this._renderInboxCard()}\r\n        </div>\r\n        <br />\r\n        <br />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>Có lỗi xảy ra</h2>\r\n        Hãy vào trang chủ và thử lại<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    if (this.state.loading) return loading\r\n    if (this.state.completed) return this._renderCompletedCard()\r\n\r\n    return this.props.data ? this._renderMain() : this._renderError()\r\n  }\r\n}\r\n\r\nexport default Publish","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Img from 'react-image'\r\n\r\nconst imgStyle = {\r\n  maxHeight: '300px',\r\n  maxWidth: '100%',\r\n}\r\n\r\nconst imgLoaderStyle = {\r\n  height: '300px',\r\n  width: '100%',\r\n}\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass GetImage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      showGetToken: false,\r\n      access_token: '',\r\n      completed: false,\r\n      loading: true,\r\n      imgs: [],\r\n    }\r\n    if (props.data) {\r\n      this.state.caption = props.data.caption\r\n      this.state.fbusername = props.data.fbusername\r\n    } else {\r\n      this.state.error = 'Hãy về trang chủ và thử lại'\r\n    }\r\n    window.changeHeader('Chọn ảnh bài đăng - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchFacebookApi()\r\n  }\r\n\r\n  async fetchFacebookApi() {\r\n    const fbtoken = Utils.getLocalStorage('fbtoken')\r\n    try {\r\n      const res = await axios.get(`https://graph.facebook.com/${this.state.fbusername}?fields=feed.limit(20)%7Bfull_picture%7D%2Cpicture.width(720)%7Burl%7D&access_token=${fbtoken}`)\r\n      if (res.data.error) {\r\n        this.setState({loading: false, showGetToken: true})\r\n      } else {\r\n        const imgs = res.data.feed.data.map(post => post.full_picture)\r\n        imgs.unshift(res.data.picture.data.url)\r\n        this.setState({\r\n          loading: false,\r\n          showGetToken: false,\r\n          imgs: imgs,\r\n        })\r\n      }\r\n    } catch (e) {\r\n      if (e.response.status === 404) {\r\n        this.setState({loading: false, error: 'Không thể mở trang facebook này'})\r\n      } else {\r\n        this.setState({loading: false, showGetToken: true})\r\n      }\r\n    }\r\n  }\r\n\r\n  onSaveToken() {\r\n    let fbtoken = this.state.access_token\r\n    fbtoken = fbtoken.match(/EA[a-zA-Z0-9]+/)\r\n    try {\r\n      Utils.setLocalStorage('fbtoken', fbtoken[0])\r\n      const urlNow = window.location.hash\r\n      window.location.hash = '#/reload'\r\n      setTimeout(() => { window.location.hash = urlNow }, 50)\r\n    } catch (e) {\r\n      window.alert('token không hợp lệ')\r\n    }\r\n  }\r\n\r\n  _renderTitleCard() {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/'}>Trở về</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Chọn ảnh cho bài đăng</b>\r\n          </p>\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderImageCard(url) {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <center>\r\n            <Img alt=''\r\n              src={url}\r\n              style={imgStyle}\r\n              loader={<div style={imgLoaderStyle}><center><br/><br/><CircularProgress /></center></div>}\r\n            />  \r\n          </center>\r\n          <Button\r\n              variant='outlined'\r\n              size='small'\r\n              style={{ float: 'right', margin: '10px' }}\r\n              onClick={() => {\r\n                const _data = JSON.parse(JSON.stringify(this.props.data))\r\n                _data.url = url\r\n                this.props.gotoPublish(_data, 'publish')\r\n              }}>Chọn ảnh này</Button>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderGetTokenCard() {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/'}\r\n            >Trở về</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Lấy token</b><br/>\r\n            <br/>\r\n            Bạn chưa có token hoặc token đã bị hết hạn. Hãy làm theo hướng dẫn này để lấy token: <a href=\"https://blog.ngxson.com/tonghopevent/#lay-token\" target=\"_blank\" rel=\"noopener noreferrer\">[Bấm vào đây]</a><br/>\r\n            Lưu ý: token sẽ đc lưu trên máy này. Bạn có thể lấy token từ máy tính để dùng trên ĐT.<br/>\r\n            Điền token của bạn vào ô dưới đây:<br/>\r\n          </p>\r\n          <TextField\r\n            multiline\r\n            rowsMax=\"5\"\r\n            value={this.state.access_token}\r\n            onChange={event => {this.setState({ access_token: event.target.value });}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          /><br/>\r\n          <Button\r\n            variant='outlined'\r\n            onClick={this.onSaveToken.bind(this)}\r\n          >Tiếp tục</Button>\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderMain() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.showGetToken &&\r\n          <div style={classes.cardStyle}>\r\n            {this._renderGetTokenCard()}\r\n          </div>\r\n        }\r\n        {!this.state.showGetToken &&\r\n          <div style={classes.cardStyle}>\r\n            {this._renderTitleCard()}\r\n          </div>\r\n        }\r\n        {!this.state.showGetToken &&\r\n          this.state.imgs.map((url, i) =>\r\n            <div style={classes.cardStyle} key={i}>\r\n              {this._renderImageCard(url)}\r\n            </div>\r\n          )\r\n        }\r\n        <br />\r\n        <br />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>Có lỗi xảy ra</h2>\r\n        {this.state.error}<br/><br/>\r\n        <Button\r\n          variant='outlined'\r\n          size='small'\r\n          onClick={() => window.location.hash = '#/'}\r\n        >Trở về</Button>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    if (this.state.loading) return loading\r\n    if (this.state.error) return this._renderError()\r\n\r\n    return this._renderMain()\r\n  }\r\n}\r\n\r\nexport default GetImage","import React from 'react'\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Menu from '@material-ui/core/Menu'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport AccountCircle from '@material-ui/icons/AccountCircle'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport PropTypes from 'prop-types'\r\nimport { withRouter } from 'react-router'\r\nimport Utils from '../Utils'\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n  },\r\n};\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      anchorEl: null\r\n    }\r\n    this.token = Utils.getLocalStorage('token')\r\n  }\r\n\r\n  static propTypes = {\r\n    match: PropTypes.object.isRequired,\r\n    location: PropTypes.object.isRequired,\r\n    history: PropTypes.object.isRequired\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.setState({ auth: event.target.checked })\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ anchorEl: event.currentTarget })\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null })\r\n  }\r\n\r\n  doLogout = () => {\r\n    Utils.removeLocalStorage('token')\r\n    window.location.href = '#/login'\r\n  }\r\n\r\n  render() {\r\n    const { anchorEl } = this.state\r\n    const open = Boolean(anchorEl)\r\n\r\n    const showBtns = !!this.token\r\n    var title = this.props.header\r\n\r\n    return (\r\n      <div style={styles.root}>\r\n        <AppBar position=\"static\" color=\"primary\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" color=\"inherit\" style={styles.grow}>\r\n              {title}\r\n            </Typography>\r\n\r\n            { showBtns ? <div>\r\n              <IconButton\r\n                aria-owns={open ? 'menu-appbar' : undefined}\r\n                aria-haspopup=\"true\"\r\n                onClick={this.handleMenu}\r\n                color=\"inherit\"\r\n              > \r\n                <AccountCircle />\r\n              </IconButton>\r\n              <Menu\r\n                id=\"menu-appbar\"\r\n                anchorEl={anchorEl}\r\n                anchorOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                transformOrigin={{\r\n                  vertical: 'top',\r\n                  horizontal: 'right',\r\n                }}\r\n                open={open}\r\n                onClose={this.handleClose}\r\n              >\r\n                <MenuItem onClick={() => {window.location.href = '#/'}}>Quản lý</MenuItem>\r\n                <MenuItem onClick={() => {window.location.href = '#/msg'}}>Inbox</MenuItem>\r\n                <MenuItem onClick={() => {window.location.href = '#/scheduled'}}>Bài đã lên lịch</MenuItem>\r\n                <MenuItem onClick={() => {window.location.href = 'https://blog.ngxson.com/tonghopevent/'}}>Hướng dẫn</MenuItem>\r\n                <MenuItem onClick={() => {window.location.href = 'https://sites.google.com/view/tonghopevent'}}>Điều khoản SD</MenuItem>\r\n                <MenuItem onClick={this.doLogout.bind(this)}>Logout</MenuItem>\r\n              </Menu>\r\n            </div> : null}\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst AdaptiveHeader = withRouter(Header)\r\n\r\nexport default AdaptiveHeader","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nclass Alert extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      onClickOK: null\r\n    }\r\n    window.showAlert = this.show.bind(this)\r\n  }\r\n\r\n  show(data) {\r\n    this.setState({\r\n      open: true,\r\n      title: data.title,\r\n      text: data.text,\r\n      onClickOK: data.onClickOK || null,\r\n      showCancel: data.showCancel\r\n    })\r\n  }\r\n\r\n  handleClickOK = () => {\r\n    if (this.state.onClickOK) {\r\n      this.state.onClickOK();\r\n      this.setState({ onClickOK: null });\r\n    }\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleCancel}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">{this.state.title}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n              {this.state.text}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleClickOK.bind(this)} color=\"primary\" autoFocus>OK</Button>\r\n            {this.state.showCancel\r\n              ? <Button onClick={this.handleCancel.bind(this)} color=\"primary\" autoFocus>Cancel</Button>\r\n              : null}\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Alert;","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport PropTypes from 'prop-types'\r\nimport Utils from '../Utils'\r\n\r\nclass FBPostEditDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    console.log(props.post)\r\n    this.state = {\r\n      title: props.post.message.split('\\n')[0] || '',\r\n      message: props.post.message,\r\n      loading: false,\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    post: PropTypes.any.isRequired,\r\n  }\r\n\r\n  onEditPost = async () => {\r\n    const { message } = this.state\r\n    const { post, onClose } = this.props\r\n    this.setState({ loading: true })\r\n    const token = Utils.getLocalStorage('token')\r\n    await axios.patch(`${Config.BACKEND}/publish/post/${post.id}?token=${token}`, {\r\n      message: message\r\n    })\r\n    onClose(true);\r\n  }\r\n\r\n  render() {\r\n    const { title, message, loading } = this.state\r\n    const { post, onClose } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\r\n          {loading ? <center><br/><br/><CircularProgress /><br/><br/></center> : <>\r\n            <DialogTitle id=\"form-dialog-title\">Sửa bài viết</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText>\r\n                Bài viết: {title}<br/>\r\n                Đăng lúc: {Utils.getTimeStr(post.time)} ngày {Utils.getDateStr(post.time)}\r\n              </DialogContentText>\r\n              <TextField\r\n                multiline\r\n                rowsMax=\"20\"\r\n                value={message}\r\n                onChange={event => {this.setState({ message: event.target.value })}}\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n              />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={() => onClose(false)} color=\"primary\">\r\n                Quay lại\r\n              </Button>\r\n              <Button onClick={this.onEditPost} color=\"primary\">\r\n                LƯU POST\r\n              </Button>\r\n            </DialogActions>\r\n          </>}\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FBPostEditDialog\r\n","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport FBPostEditDialog from '../components/FBPostEditDialog'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass Scheduled extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      posts: [],\r\n      editingPost: null,\r\n    }\r\n    window.changeHeader('Bài đã lên lịch - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n  }\r\n\r\n  async loadData() {\r\n    this.setState({loading: true, editingPost: null})\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${Config.BACKEND}/publish/scheduled?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, posts: []})\r\n    else\r\n      this.setState({loading: false, posts: res.data})\r\n  }\r\n\r\n  deletePost = (post) => async () => {\r\n    if (window.confirm('Bạn có chắc chắn xóa?')) {\r\n      this.setState({loading: true})\r\n      const token = Utils.getLocalStorage('token')\r\n      await axios.delete(`${Config.BACKEND}/publish/post/${post.id}?token=${token}`)\r\n      this.loadData()\r\n    }\r\n  }\r\n\r\n  onEditDialogClose = (shouldReload) => {\r\n    if (shouldReload) {\r\n      this.loadData()\r\n    } else {\r\n      this.setState({editingPost: null})\r\n    }\r\n  }\r\n\r\n  _renderMainView() {\r\n    return this.state.posts.map((post, i) => (\r\n      <div style={classes.cardStyle} key={post.id}>\r\n        <Card>\r\n          <CardContent>\r\n            <p><b>{Utils.getTimeStr(post.time)} ngày {Utils.getDateStr(post.time)}</b></p>\r\n            <p>\r\n              {Utils.nl2br(post.expanded ? post.message : post.message.substring(0, 250))}\r\n              <br/>\r\n              <a href=\"#/scheduled\" onClick={(e) => {\r\n                e.preventDefault()\r\n                this.setState({posts: this.state.posts.map((p, j) => {\r\n                  const cloned = JSON.parse(JSON.stringify(p))\r\n                  if (i === j) cloned.expanded = !cloned.expanded\r\n                  return cloned\r\n                })})\r\n              }}>{post.expanded ? 'Thu gọn' : '... Đọc thêm'}</a><br/>\r\n            </p>\r\n            <p>\r\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.deletePost(post)}>Xóa</Button>\r\n              &nbsp;&nbsp;\r\n              <Button color=\"primary\" variant=\"outlined\" onClick={() => this.setState({ editingPost: post })}>Sửa</Button>\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  _renderDocNotFound() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        (Chưa có bài đăng nào được hẹn giờ)<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { editingPost, loading, posts } = this.state\r\n\r\n    const loadingComponent = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    return <>\r\n      {editingPost && <FBPostEditDialog\r\n        post={editingPost}\r\n        onClose={this.onEditDialogClose}\r\n      />}\r\n      {loading ? loadingComponent : \r\n        posts.length > 0 ? this._renderMainView() : this._renderDocNotFound()\r\n      }\r\n    </>\r\n  }\r\n}\r\n\r\nexport default Scheduled","import { io } from 'socket.io-client';\r\nimport Utils from '../../Utils';\r\nimport Config from '../../Config';\r\n\r\nclass Socket {\r\n  static socket = null;\r\n  static getSocket() {\r\n    if (!Config.SOCKETIO) return null;\r\n    if (!Socket.socket) {\r\n      Socket.socket = io(Config.SOCKETIO, {\r\n        transports: ['websocket'],\r\n        query: `module=tonghopevent&token=${Utils.getToken()}`,\r\n      });\r\n      Socket.socket.on('connect', () => console.log('connected'));\r\n    }\r\n    return Socket.socket;\r\n  }\r\n\r\n  static subscribeInbox(handler) {\r\n    const socket = Socket.getSocket();\r\n    if (socket) socket.on('inbox', handler);\r\n  }\r\n\r\n  static unsubscribeInbox(handler) {\r\n    const socket = Socket.getSocket();\r\n    if (socket) socket.offAny(handler);\r\n  }\r\n}\r\n\r\nexport default Socket;","import React from 'react';\r\nimport {\r\n  ConversationList,\r\n  Conversation,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { removeVietnameseTones, mergeNewConversations } from './utils';\r\nimport { makeRequest } from '../../Utils';\r\nimport Socket from './socket';\r\n\r\nclass Conversations extends React.Component {\r\n  state = {\r\n    loading: false,\r\n    conversations: [],\r\n    activeConversationId: null,\r\n    next: null,\r\n  };\r\n\r\n  openConversation = (id, name) => () => {\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\r\n    window.location.hash = `#/msg/${id}/${n}`;\r\n    this.updateActiveConversation();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadMoreConversations();\r\n    this.updateActiveConversation();\r\n    Socket.subscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  updateActiveConversation = () => {\r\n    const matched = window.location.href.match(/#\\/msg\\/([a-z0-9_-]+)/);\r\n    this.setState({ activeConversationId: matched ? matched[1] : null });\r\n  };\r\n\r\n  inboxUpdateHandler = async (ev) => {\r\n    const { data: newArr } = await makeRequest('get', '/inbox/conversations', {limit: 5});\r\n    this.setState((prevState) => ({\r\n      conversations: mergeNewConversations(prevState.conversations, newArr),\r\n    }));\r\n  }\r\n\r\n  async loadMoreConversations() {\r\n    if (!this.state.loading) {\r\n      this.setState({ loading: true });\r\n\r\n      const qs = {};\r\n      if (this.state.next) qs.after = this.state.next;\r\n      const { data, paging } = await makeRequest('get', '/inbox/conversations', qs);\r\n\r\n      if (data) this.setState({\r\n        conversations: [...this.state.conversations, ...data],\r\n        loading: false,\r\n        next: (paging?.next) ? (paging?.cursors?.after) : null,\r\n      });\r\n    }\r\n  }\r\n\r\n  onYReachEnd = () => {\r\n    if (this.state.next && !this.state.loading) {\r\n      this.loadMoreConversations();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ConversationList loadingMore={this.state.loading} onYReachEnd={this.onYReachEnd}>\r\n        {this.state.conversations.map(conv => {\r\n          const name = conv.senders.data[0].name;\r\n          return (\r\n            <Conversation\r\n              key={conv.id}\r\n              name={`${name} (${conv.message_count})`}\r\n              info={conv.snippet}\r\n              onClick={this.openConversation(conv.id, name)}\r\n              active={this.state.activeConversationId === conv.id}\r\n            ></Conversation>\r\n          );\r\n        })}\r\n      </ConversationList>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Conversations;","import React from 'react';\r\nimport {\r\n  ConversationHeader,\r\n  Avatar,\r\n  InfoButton,\r\n  MessageList,\r\n  ChatContainer,\r\n  Message,\r\n  MessageInput,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { makeRequest } from '../../Utils';\r\nimport { getMessageDirection, getTargetId, mergeNewMessages } from './utils';\r\nimport TimeAgo from 'javascript-time-ago';\r\nimport en from 'javascript-time-ago/locale/en';\r\nimport Socket from './socket';\r\nimport Config from '../../Config';\r\nimport './styles.css';\r\n\r\nTimeAgo.addLocale(en);\r\nconst timeAgo = new TimeAgo('en-US');\r\n\r\nclass MessageView extends React.Component {\r\n  state = {\r\n    loading: true,\r\n    loadingMore: false,\r\n    psid: null,\r\n    profile: {},\r\n    threadInfo: {},\r\n    messages: [],\r\n    messageAfter: null,\r\n    messagePending: null,\r\n    input: '',\r\n  }\r\n  originalTitle = document.title;\r\n\r\n  componentDidMount() {\r\n    this.fetchConversation(this.props.tid);\r\n    Socket.subscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.tid !== this.props.tid) {\r\n      this.fetchConversation(this.props.tid);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.title = this.originalTitle;\r\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  inboxUpdateHandler = async (ev) => {\r\n    const { psid, messagePending } = this.state;\r\n    const tid = this.props.tid;\r\n    if (getTargetId(ev) === psid) {\r\n      const { data: newMessages } = await makeRequest('get', '/inbox/thread/messages', {tid, limit: 5});\r\n      this.setState((prevState) => ({\r\n        messages: mergeNewMessages(prevState.messages, newMessages),\r\n      }));\r\n    }\r\n    if (ev.message?.text === messagePending) {\r\n      this.setState({ messagePending: null });\r\n    }\r\n  }\r\n\r\n  async fetchConversation(tid) {\r\n    document.title = Config.INBOX_TITLE;\r\n    this.setState({ loading: true });\r\n    const [threadInfo, messages] = await Promise.all([\r\n      makeRequest('get', '/inbox/thread/info', {tid}),\r\n      makeRequest('get', '/inbox/thread/messages', {tid}),\r\n    ]);\r\n    messages.data = messages.data.reverse();\r\n    const psid = threadInfo.senders.data[0].id;\r\n    const profile = await makeRequest('get', '/inbox/profile', { psid });\r\n    this.setState({\r\n      threadInfo,\r\n      psid,\r\n      profile,\r\n      messages: messages.data,\r\n      messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\r\n      loading: false,\r\n    });\r\n    document.title = `${profile.name} - ${Config.INBOX_TITLE}`;\r\n  }\r\n\r\n  onYReachStart = async () => {\r\n    const {messageAfter, loadingMore} = this.state;\r\n    if (messageAfter && !loadingMore) {\r\n      this.setState({ loadingMore: true });\r\n      const messages = await makeRequest('get', '/inbox/thread/messages', {\r\n        tid: this.props.tid,\r\n        after: messageAfter,\r\n      });\r\n      this.setState((prevState) => {\r\n        const newMsgArr = messages.data.reverse().concat(prevState.messages);\r\n        return {\r\n          messages: newMsgArr,\r\n          messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\r\n          loadingMore: false,\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  openConversationOnFB = () => {\r\n    window.open(`https://fb.com${this.state.threadInfo.link}`, '_blank');\r\n  }\r\n\r\n  openInNewTab = (url) => () => {\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openMainMenu = () => {\r\n    window.location.hash = '#/';\r\n  }\r\n\r\n  _renderHeader() {\r\n    const {loading, profile} = this.state;\r\n    return loading ? (\r\n      <ConversationHeader>\r\n        <ConversationHeader.Back onClick={this.openMainMenu} />\r\n        <ConversationHeader.Content userName=\"Loading...\" />        \r\n      </ConversationHeader>\r\n    ) : (\r\n      <ConversationHeader>\r\n        <ConversationHeader.Back onClick={this.openMainMenu} />\r\n        <Avatar\r\n          src={profile.profile_pic}\r\n          name={profile.name}\r\n          onClick={this.openConversationOnFB}\r\n        />\r\n        <ConversationHeader.Content userName={profile.name} />\r\n        <ConversationHeader.Actions>\r\n          <InfoButton onClick={this.openConversationOnFB} />\r\n        </ConversationHeader.Actions>          \r\n      </ConversationHeader>\r\n    );\r\n  }\r\n\r\n  _renderMessages() {\r\n    const {loading, messages, messagePending, loadingMore} = this.state;\r\n    if (loading) return <MessageList loading/>\r\n\r\n    let lastDirection = '';\r\n    const showTimeHeader = (msg) => {\r\n      const direction = getMessageDirection(msg);\r\n      if (lastDirection !== direction) {\r\n        lastDirection = direction;\r\n        return <Message.Footer sender={timeAgo.format(new Date(msg.created_time))} />\r\n      } else {\r\n        return null;\r\n      }\r\n    };\r\n\r\n    const showTextMsg = (msg) => <Message key={msg.id} model={{\r\n      message: msg.message,\r\n      sentTime: timeAgo.format(new Date(msg.created_time)),\r\n      sender: msg.from.name,\r\n      direction: getMessageDirection(msg),\r\n      position: 'single',\r\n    }}>\r\n      {showTimeHeader(msg)}\r\n    </Message>\r\n\r\n    const getImages = (msg) => (msg.attachments?.data || [])\r\n      .filter(a => !!a.image_data)\r\n      .map(a => a.image_data);\r\n\r\n    const showImages = (msg, images) => images.map((img, i) => (\r\n      <Message key={msg.id + i} type=\"image\" model={{\r\n        direction: getMessageDirection(msg),\r\n        type: 'custom',\r\n      }}>\r\n        {showTimeHeader(msg)}\r\n        <Message.CustomContent>\r\n          <img src={img.preview_url} alt=\"\" onClick={this.openInNewTab(img.url)} style={{width: '200px'}}></img>\r\n        </Message.CustomContent>\r\n      </Message>\r\n    ));\r\n\r\n    const showPendingMsg = () => <Message model={{\r\n      message: messagePending,\r\n      sender: Config.INBOX_TITLE,\r\n      direction: 'outgoing',\r\n      position: 'single',\r\n    }} className=\"pending\" />\r\n\r\n    return (\r\n      <MessageList loadingMore={loadingMore} onYReachStart={this.onYReachStart}>\r\n        {messages.map(msg => {\r\n          const images = getImages(msg);\r\n          if (images.length > 0) {\r\n            return <>\r\n              {showImages(msg, images)}\r\n            </>\r\n          } else {\r\n            return showTextMsg(msg);\r\n          }\r\n        })}\r\n        {messagePending && showPendingMsg()}\r\n        {!Config.INBOX_SEND_ABILITY && // add margin bottom\r\n          <Message style={{ marginBottom: '2em', opacity: '0' }} />\r\n        }\r\n      </MessageList>\r\n    );\r\n  }\r\n\r\n  handleInputChange = (v) => this.setState({ input: v });\r\n  handleSendMessage = async () => {\r\n    const messagePending = this.state.input.trim()\r\n    this.setState({ messagePending, input: '' });\r\n    await makeRequest('post', '/inbox/messages', {}, {\r\n      messaging_type: 'RESPONSE',\r\n      recipient: { id: this.state.psid },\r\n      message: { text: messagePending },\r\n    });\r\n  };\r\n  _renderInput() {\r\n    const { input, messagePending } = this.state;\r\n    return <MessageInput\r\n      value={input}\r\n      onChange={this.handleInputChange}\r\n      onSend={this.handleSendMessage}\r\n      attachButton={false}\r\n      disabled={!!messagePending}\r\n      sendDisabled={!!messagePending && input.length > 0}\r\n      sendOnReturnDisabled={true}\r\n      placeholder=\"Type here...\"\r\n    />\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <ChatContainer>\r\n        {this._renderHeader()}\r\n        {this._renderMessages()}\r\n        {Config.INBOX_SEND_ABILITY && this._renderInput()}\r\n      </ChatContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageView;","import React from 'react';\r\nimport Conversations from './Conversations';\r\nimport MessageView from './MessageView';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\r\nimport {\r\n  MainContainer,\r\n  Sidebar,\r\n  ChatContainer,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\n\r\nclass Messenger extends React.Component {\r\n  state = { tid: null };\r\n\r\n  MessageView = () => {\r\n    const tid = this.state.tid;\r\n    return <div style={{ position: \"relative\", height: \"100vh\" }} className={!tid ? 'home' : 'chat'}>\r\n      <MainContainer>\r\n        <Sidebar position=\"left\" scrollable={true}>\r\n          <Conversations />\r\n        </Sidebar>\r\n        {tid\r\n          ? <MessageView tid={tid} />\r\n          : <ChatContainer />\r\n        }\r\n      </MainContainer>\r\n    </div>;\r\n  }\r\n\r\n  MessageTidChanged = ({match}) => {\r\n    if (match.params.tid !== this.state.tid)\r\n      this.setState({ tid: match.params.tid });\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <HashRouter>\r\n        <Route path=\"/msg\" component={this.MessageView} />\r\n        <Route path=\"/msg/:tid/:name\" component={this.MessageTidChanged} />\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Messenger;","import React from 'react';\r\nimport Theme from './Theme';\r\nimport LoginLayout from './layouts/Login';\r\nimport HomeLayout from './layouts/Home';\r\nimport ViewLayout from './layouts/View';\r\nimport PublishLayout from './layouts/Publish';\r\nimport GetImageLayout from './layouts/GetImage';\r\nimport './App.css';\r\nimport './bootstrap.css';\r\nimport Header from './components/Header';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport Alert from './components/Alert';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.min.css';\r\nimport Scheduled from './layouts/Scheduled';\r\nimport Messenger from './components/messenger';\r\n\r\nclass Main extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      header: 'Home',\r\n      publishData: null,\r\n    }\r\n  }\r\n\r\n  changeHeader(header) {\r\n    if (this.state.header === header) return\r\n    else this.setState({header})\r\n  }\r\n\r\n  gotoPublish(data, publishAction) {\r\n    this.setState({publishData: data})\r\n    window.location.hash = '#/' + publishAction\r\n  }\r\n\r\n  Login = () => {\r\n    return <LoginLayout />\r\n  }\r\n\r\n  Scheduled = () => {\r\n    return <Scheduled />\r\n  }\r\n\r\n  Home = () => {\r\n    return <HomeLayout\r\n      gotoPublish={this.gotoPublish.bind(this)}\r\n    />\r\n  }\r\n\r\n  View = ({match}) => {\r\n    return <ViewLayout\r\n      id={match.params.id}\r\n    />\r\n  }\r\n\r\n  Publish = () => {\r\n    return <PublishLayout\r\n      data={this.state.publishData}\r\n    />\r\n  }\r\n\r\n  GetImage = () => {\r\n    return <GetImageLayout\r\n      data={this.state.publishData}\r\n      gotoPublish={this.gotoPublish.bind(this)}\r\n    />\r\n  }\r\n\r\n  Copyright = () => {\r\n    return <center>\r\n      Developed by&nbsp;\r\n      <b><a href=\"https://ngxson.com\" target=\"_blank\" rel=\"noopener noreferrer\">Nui</a></b><br/>\r\n      Version 4.12\r\n      <br/><br/>\r\n    </center>\r\n  }\r\n\r\n  render() {\r\n    window.changeHeader = this.changeHeader.bind(this)\r\n\r\n    return (\r\n      <MuiThemeProvider theme={Theme}>\r\n        <React.Fragment>\r\n          <CssBaseline />\r\n          <Header header={this.state.header}/>\r\n          <div className=\"mainView\">\r\n            <Route exact path=\"/\" component={this.Home} />\r\n            <Route path=\"/login\" component={this.Login} />\r\n            <Route path=\"/view/:id\" component={this.View} />\r\n            <Route path=\"/publish\" component={this.Publish} />\r\n            <Route path=\"/getimage\" component={this.GetImage} />\r\n            <Route path=\"/scheduled\" component={this.Scheduled} />\r\n            <this.Copyright />\r\n          </div>\r\n          <Alert />\r\n        </React.Fragment>\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <HashRouter>\r\n      <Switch>\r\n        <Route path=\"/msg\" component={Messenger} />\r\n        <Route component={Main} />\r\n      </Switch>\r\n      <ToastContainer\r\n        position=\"bottom-left\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnVisibilityChange\r\n        draggable\r\n        pauseOnHover\r\n      />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\n\r\nclass Guide extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n        <div className=\"gtco-container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n              <h2>Những lưu ý dành cho bạn</h2>\r\n              <p>Được lập ra nhằm mục đích tổng hợp, phân loại các dự án, những cuộc thi đang diễn ra trong cộng đồng giới trẻ, chúng mình hi vọng sẽ giúp đỡ được các bạn trẻ tìm kiếm thành công những hoạt động phù hợp nhất với bản thân mình.<br /></p>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>NHẬP THÔNG TIN</h3>\r\n                  <p>Hãy chú ý nhập đầy đủ các thông tin có trong form.</p>\r\n                </div>\r\n              </div>\r\n      \r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>ĐỢI DUYỆT</h3>\r\n                  <p>Admin sẽ phê duyệt bài của bạn.<br />\r\n                    Bạn sẽ nhận được thông báo ngay sau khi bài đăng được đặt lịch để đăng lên page.</p>\r\n                </div>\r\n              </div>\r\n      \r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>ĐĂNG VÀO GIỜ VÀNG</h3>\r\n                  <p>Bài của bạn sẽ được hẹn giờ để up vào khung giờ vàng (20h - 21h).<br />\r\n                    Vì vậy nếu chưa thấy bài của bạn chưa được đăng ngay, <b>đừng vội</b> gửi lại bài cho chúng mình nhé!</p>\r\n                </div>\r\n              </div>\r\n      \r\n            </div>\r\n      \r\n            <div className=\"col-md-12\">\r\n              <center>\r\n                <p><br /><br />Bằng việc bấm nút &quot;Tiếp tục&quot;, bạn đồng ý với các <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">điều khoản sử dụng</a> của fanpage</p>\r\n                <a className=\"btn btn-block btn-primary\" href=\"#/next\">TIẾP TỤC ➜</a>\r\n                <br />\r\n                Nếu bạn gặp lỗi, hãy thông báo cho admin tại: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br />\r\n              </center>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Guide;","import React from 'react';\r\n\r\nclass NoPsid extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Hướng dẫn</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\tĐể đăng dự án, cuộc thi lên fanpage, bạn hãy thực hiện theo hướng dẫn sau:<br/>\r\n\t    \t\t\t\t\tBạn hãy inbox vào fanpage tại: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br/>\r\n\t    \t\t\t\t\tSau đó bấm vào nút <b>Đăng dự án/cuộc thi</b> ở menu nhé!<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<small>Nếu bạn gặp lỗi, hãy thông báo cho admin tại thông qua inbox fanpage</small>\r\n\t    \t\t\t\t</p>\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NoPsid;","import React from 'react';\r\n\r\nclass OldVersion extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Hướng dẫn</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\tBạn dùng link tới phiên bản cũ của fanpage<br/>\r\n\t    \t\t\t\t\tHãy bấm nút <b>Đăng dự án/cuộc thi</b> ở trong menu inbox để nhận link mới nhé!<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<small>Nếu bạn gặp lỗi, hãy thông báo cho admin tại: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a></small>\r\n\t    \t\t\t\t</p>\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OldVersion;","import React from 'react';\r\nimport Guide from './Guide';\r\nimport NoPsid from './NoPsid';\r\nimport OldVersion from './OldVersion';\r\nimport Utils from '../../Utils';\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.psid = Utils.getPsid();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <header id=\"gtco-header\" className=\"gtco-cover\" role=\"banner\" style={{backgroundImage: `url(theme/images/img_bg_1.jpg`}}>\r\n          <div className=\"gtco-container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 col-md-offset-2 text-center\">\r\n                <div className=\"display-t\">\r\n                  <div className=\"display-tc animate-box\" data-animate-effect=\"fadeIn\">\r\n                    <h1>Đăng dự án</h1>\r\n                    <h2>Tổng hợp các dự án và cuộc thi dành cho học sinh, sinh viên</h2>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {this.psid !== 'none'\r\n          ? <Guide />\r\n          : !Utils.getParameterByName('psid') ? <NoPsid /> : <OldVersion />\r\n        }\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nconst Data = [\r\n\r\n  // INDEX 0\r\n  (parent) => {\r\n    return {\r\n      type: 'small',\r\n      title: 'Bạn muốn đăng bài về',\r\n      options: [\r\n        { text: 'Dự án', subtitle: 'Hoạt động ngoại khóa', value: 'Dự án' },\r\n        { text: 'Cuộc thi', subtitle: 'Dành cho HS, SV', value: 'Cuộc thi' },\r\n        { text: 'Sự kiện', subtitle: 'Dành cho HS, SV' , value: 'Sự kiện' },\r\n      ],\r\n      notice: 'Lưu ý: Fanpage không nhận đăng bài về tuyển dụng việc làm.',\r\n      next: (value) => {\r\n        const newState = {\r\n          screen: 1,\r\n          type: value,\r\n        };\r\n        if (value === 'Cuộc thi') newState.tag = '#cuộc_thi';\r\n        else if (value === 'Sự kiện') newState.tag = '#sự_kiện';\r\n        parent.setState(newState);\r\n      }\r\n    };\r\n  },\r\n\r\n  // INDEX 1\r\n  (parent) => {\r\n    return {\r\n      type: 'long',\r\n      title: <React.Fragment>{parent.state.type} của bạn được <b>điều hành bởi</b></React.Fragment>,\r\n      options: [\r\n        { text: 'Một nhóm học sinh, sinh viên', subtitle: 'Hoạt động phi lợi nhuận', value: 'F1' },\r\n        { text: 'Một câu lạc bộ trong trường học', subtitle: 'Hoạt động phi lợi nhuận', value: 'F2' },\r\n        { text: 'Một trường học công lập', subtitle: 'VD: trường THCS, THPT, ĐH, Cao đẳng,...', value: 'F3' },\r\n        { text: 'Một tổ chức phi lợi nhuận', subtitle: 'VD: AIESEC, VOGE, SOTB,...', value: 'F4' },\r\n        { text: 'Tổ chức hoạt động có lợi nhuận', subtitle: 'VD: trung tâm ngoại ngữ, cửa hàng,...', value: 'P1' },\r\n      ],\r\n      next: (value) => {\r\n        if (value === 'P1') {\r\n          parent.setState({ screen: 2 });\r\n        } else {\r\n          window.location.replace(parent.getFormUrl(value));\r\n        }\r\n      }\r\n    };\r\n  },\r\n\r\n  // INDEX 2\r\n  (parent) => {\r\n    return {\r\n      type: 'basic',\r\n      title: <React.Fragment>\r\n        Dựa theo <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">điều khoản sử dụng</a> của chúng mình, {parent.state.type.toLowerCase()} được tổ chức hoặc được điều hành bởi một hoặc nhiều doanh nghiệp, tổ chức hay cá nhân <b>hoạt động có lợi nhuận</b> phải trả phí theo <b>Gói P1</b><br/>\r\n        <br/>\r\n        Gói P1 có giá là 100.000 VNĐ / 1 bài đăng [<a href=\"https://sites.google.com/view/tonghopevent/gói-p1\" target=\"_blank\" rel=\"noopener noreferrer\">Bấm đây để xem chi tiết</a>]<br/>\r\n        <br/>\r\n        Để tiếp tục, bạn hãy nhập thông tin vào form sau:\r\n        &nbsp;\r\n        <button className=\"btn btn-small btn-primary\"\r\n          style={{padding: '4px'}}\r\n          onClick={() => {\r\n            window.location.replace(parent.getFormUrl('P1'));\r\n          }}\r\n        >Tới Form ➜</button><br/>\r\n        Sau đó, hướng dẫn thanh toán sẽ được gửi tới inbox của bạn.\r\n      </React.Fragment>\r\n    };\r\n  },\r\n];\r\n\r\nexport default Data;","import React from 'react';\r\nimport Data from './Data';\r\nimport Utils from '../../Utils';\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const _psid = Utils.getPsid();\r\n    this.psid = _psid !== 'none' ? _psid : null;\r\n    this.state = {\r\n      screen: 0,\r\n      tag: null,\r\n    };\r\n  }\r\n\r\n  getFormUrl(plan) {\r\n    const psid = `${this.psid}${plan ? ';' + plan : ''}`;\r\n    return Utils.getFormUrl(psid, this.state.tag);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(window.scrollToTop, 50);\r\n  }\r\n\r\n  _renderSmallBtn(data) {\r\n    return data.options.map((option, i) => {\r\n      return (\r\n        <button\r\n          key={option.value + i}\r\n          className=\"btn btn-default btn-proj-cate\"\r\n          onClick={() => data.next(option.value)}\r\n        >{option.text}</button>\r\n      );\r\n    });\r\n  }\r\n\r\n  _renderLargeBtn(data) {\r\n    return data.options.map((option, i) => {\r\n      return (\r\n        <button\r\n          key={option.value + i}\r\n          className=\"btn btn-default btn-proj-type\"\r\n          onClick={() => data.next(option.value)}\r\n        >\r\n          <b>{option.text}</b><br/>\r\n          <small>{option.subtitle}</small>\r\n        </button>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const data = Data[this.state.screen](this);\r\n\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Thông tin chung</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\t{data.title}\r\n\t    \t\t\t\t</p>\r\n              {data.type !== 'basic' && <p>\r\n                {data.type === 'small'\r\n                  ? this._renderSmallBtn(data)\r\n                  : this._renderLargeBtn(data)\r\n                }\r\n              </p>}\r\n              {data.notice && <p style={{fontSize: '0.8em'}}>\r\n                {data.notice}\r\n              </p>}\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer id=\"gtco-footer\" role=\"contentinfo\">\r\n      <div className=\"gtco-container\">\r\n        <div className=\"row copyright\">\r\n          <div className=\"col-md-12\">\r\n            <p className=\"pull-left\">\r\n              <small className=\"block\">Lập trình bởi <a rel=\"noopener noreferrer\" href=\"https://ngxson.com\" target=\"_blank\">Nui</a></small>\r\n              <small className=\"block\">Theme by <a rel=\"noopener noreferrer\" href=\"http://gettemplates.co/\" target=\"_blank\">GetTemplates.co</a></small>\r\n            </p>\r\n            <div className=\"pull-right\">\r\n              <ul className=\"gtco-social-icons pull-right\">\r\n                <li><a href=\"https://www.facebook.com/tonghopevent/\"><i className=\"icon-facebook\"></i></a></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport Home from './home/Home';\r\nimport Quiz from './quiz/Quiz';\r\nimport Footer from './Footer';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport './Landing.css';\r\n\r\nclass Main extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n  }\r\n\r\n  Home = () => {\r\n    return <Home />;\r\n  };\r\n\r\n  Quiz = () => {\r\n    return <Quiz />;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Route exact path=\"/\" component={this.Home} />\r\n        <Route path=\"/next\" component={this.Quiz} />\r\n        <Footer />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nfunction Landing() {\r\n  return (\r\n    <HashRouter>\r\n      <Main />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `/data/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport Landing from './landing/Landing';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nif (window.location.pathname.match(/\\/data/)) {\r\n  ReactDOM.render(<App />, document.getElementById('root'));\r\n  serviceWorker.register();\r\n} else {\r\n  ReactDOM.render(<Landing />, document.getElementById('root'));\r\n}\r\n"],"sourceRoot":""}