(this["webpackJsonptonghopevent-frontend"]=this["webpackJsonptonghopevent-frontend"]||[]).push([[0],{170:function(e,t,n){},171:function(e,t,n){},5442:function(e,t,n){e.exports=n(5516)},5447:function(e,t,n){},5492:function(e,t,n){},5502:function(e,t,n){},5511:function(e,t,n){},5514:function(e,t,n){},5515:function(e,t,n){},5516:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(14),i=n.n(r),o=(n(5447),n(216)),s=n(139),c=n.n(s),m=n(181),h=n.n(m),d=Object(o.a)({palette:{primary:{main:c.a[700]},secondary:{main:c.a[200]},error:{main:h.a[900]}}}),u=n(5568),p=n(76),g=n(5569),E=n(5593),b=n(5572),f=n(5565),v=n(21),y=n.n(v),k=n(182),w=n.n(k),C=n(183),x=n.n(C);const D={arg:null,res:null},S=e=>{if(D.arg===e)return D.res;{D.arg=e;const t=e.from.id,n=t===j.SELF_PAGE_ID||"182794865548469"===t;return D.res=n?"outgoing":"incoming",D.res}},T=(e,t)=>{const n=[],a=t=>e.some(e=>e.id===t);for(const l of t){if(a(l.id))break;n.unshift(l)}return[...e,...n]},N=(e,t)=>{const n={};return[...t,...e].filter(e=>!n[e.id]&&(n[e.id]=!0,!0))},_=e=>{if(!e.senders)return e.recipient&&e.recipient.id!==j.SELF_PAGE_ID?e.recipient.id:e.sender&&e.sender.id!==j.SELF_PAGE_ID?e.sender.id:null;for(const t of e.senders.data)if(t.id!==j.SELF_PAGE_ID)return t.id},O=e=>e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\xc0|\xc1|\u1ea0|\u1ea2|\xc3|\xc2|\u1ea6|\u1ea4|\u1eac|\u1ea8|\u1eaa|\u0102|\u1eb0|\u1eae|\u1eb6|\u1eb2|\u1eb4/g,"A")).replace(/\xc8|\xc9|\u1eb8|\u1eba|\u1ebc|\xca|\u1ec0|\u1ebe|\u1ec6|\u1ec2|\u1ec4/g,"E")).replace(/\xcc|\xcd|\u1eca|\u1ec8|\u0128/g,"I")).replace(/\xd2|\xd3|\u1ecc|\u1ece|\xd5|\xd4|\u1ed2|\u1ed0|\u1ed8|\u1ed4|\u1ed6|\u01a0|\u1edc|\u1eda|\u1ee2|\u1ede|\u1ee0/g,"O")).replace(/\xd9|\xda|\u1ee4|\u1ee6|\u0168|\u01af|\u1eea|\u1ee8|\u1ef0|\u1eec|\u1eee/g,"U")).replace(/\u1ef2|\xdd|\u1ef4|\u1ef6|\u1ef8/g,"Y")).replace(/\u0110/g,"D")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/ + /g," ")).trim()).replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," "),I={f1:"Nh\xf3m HS, SV",f2:"CLB thu\u1ed9c tr\u01b0\u1eddng h\u1ecdc",f3:"Tr\u01b0\u1eddng c\xf4ng l\u1eadp",f4:"T\u1ed5 ch\u1ee9c phi l\u1ee3i nhu\u1eadn",p1:"T\u1ed5 ch\u1ee9c c\xf3 l\u1ee3i nhu\u1eadn"};class B{static loadSettings(){j.INBOX_MARK_READ_ON_OPEN=B.settings.markReadOnOpenInbox}static getToken(){const e=B.getLocalStorage("token");if(e)return e;window.location.href="#/login"}static checkDebounce(e){window.lastRun||(window.lastRun={});const t=window.lastRun[e]||0,n=Date.now();if(n-t<500)return!0;window.lastRun[e]=n}static checkError(e){e&&e.data&&"Invalid token"===e.data.error&&(B.removeLocalStorage("token"),window.location.href="#/",window.location.reload())}static setLocalStorage(e,t){localStorage.setItem("tonghopevent:"+e,JSON.stringify(t))}static getLocalStorage(e){const t=localStorage.getItem("tonghopevent:"+e)||null;return null===t?null:JSON.parse(t)}static removeLocalStorage(e){localStorage.removeItem("tonghopevent:"+e)}static getDateStr(e,t){let n=new Date(e||1);if(t){const a=6e4*n.getTimezoneOffset();n=new Date(e+a+3600*t*1e3)}let a=n.getDate(),l=n.getMonth()+1;return`${a<10?"0":""}${a}-${l<10?"0":""}${l}-${n.getFullYear()}`}static getTimeStr(e,t){let n=new Date(e||1);if(t){const a=6e4*n.getTimezoneOffset();n=new Date(e+a+3600*t*1e3)}let a=n.getHours(),l=n.getMinutes();return`${a<10?"0":""}${a}h${l<10?"0":""}${l}`}static extractFacebookUsername(e=""){const t=e.replace("/pg/","/").match(/[facebok]+\.com\/([^?/]+)/);if(!t||t.length<1)return null;const n=t[1];if("events"===n)return null;const a=n.match(/-([0-9]{7,20})$/);return!a||a.length<1?n:a[1]}static makeRequest(e,t="get",n={}){const a=B.getLocalStorage("token"),l=e+(-1!==e.indexOf("?")?"&":"?")+"token="+a;return y.a[t](l,n)}static cleanFBLink(e=""){return e.replace(/[&?](__|eid|fref)[^&?\s]+/g,"")}static getOrgName(e){return I[e.org]}static fallbackCopyTextToClipboard(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(a){console.error("Fallback: Oops, unable to copy",a)}document.body.removeChild(t)}static copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):B.fallbackCopyTextToClipboard(e)}static nl2br(e){return e.trim().replace(/\r/g,"").split("\n").map((function(e,t,n){const a=t===n.length-1;return l.a.createElement("span",{key:t},e,!a&&l.a.createElement("br",null))}))}static getParameterByName(e){const t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}static getPsid(){const e=(B.getParameterByName("psid_hashed")||"").match(/[0-9]{3,20}[A-Z]{3,10}/);return e?e[0]:"none"}static goToInbox(e){const{id:t,senders:n}=e,a=n.data[0].name,l=O(a.toLowerCase()).replace(/[^a-z0-9]+/g,"-"),r=window.location.href.replace(/#.*/,"");window.open(`${r}#/msg/${t}/${l}`,"_blank").focus()}static setSettings(e){B.setLocalStorage("settings",e),B.settings={...e},B.loadSettings()}}B.settings={markReadOnOpenInbox:!1,...B.getLocalStorage("settings")||{}};const P=async(e,t,n={},a={})=>{n.token=B.getToken(),t=t.replace("/inbox/","/inbox2/");const l="post"===e?await y.a.post(`${j.BACKEND}${t}`,a,{params:n}):await y.a[e](`${j.BACKEND}${t}`,{params:n});return B.checkError(l),l.data};var A=B;function H({children:e}){return l.a.createElement("div",{style:{padding:"10px",marginBottom:"10px",border:"#cecece solid 2px",position:"relative"}},e)}class L extends l.a.Component{constructor(...e){super(...e),this.state={templates:[],loading:!0,editingIndex:null,editingText:null,showing:!1},this.openTemplateDialog=()=>{this.setState({showing:!0})},this.loadTemplates=async()=>{this.setState({loading:!0});let e=await P("get","/inbox/templates");e=Object.keys(e).map(t=>({id:t,...e[t]})),this.setState({templates:e,loading:!1,editingIndex:null,editingText:null})},this.save=async()=>{const{templates:e,editingIndex:t,editingText:n}=this.state;this.setState({loading:!0}),await P("post","/inbox/templates",{},{id:e[t].id,text:n||"(empty)"}),this.loadTemplates()},this.fillToInput=e=>()=>{window.setMessageInput(e.text),this.setState({showing:!1})}}componentDidMount(){this.loadTemplates(),window.openTemplateDialog=this.openTemplateDialog}render(){const{loading:e,templates:t,editingIndex:n,editingText:a,showing:r}=this.state;return r?l.a.createElement("div",{style:{position:"fixed",maxWidth:"100vw",width:"600px",height:"80vh",Maxheight:"80vh",background:"white",zIndex:"100",top:"50%",left:"50%",transform:"translate(-50%, -50%)",border:"#bbb solid 2px",padding:"10px",overflow:"auto"}},l.a.createElement("button",{style:{position:"absolute",right:"10px"},onClick:()=>this.setState({showing:!1})},"[x] Tho\xe1t"),l.a.createElement("br",null),l.a.createElement("br",null),!e&&t.map((e,t)=>n===t?l.a.createElement(H,{key:t},l.a.createElement("textarea",{style:{width:"100%"},value:a,onChange:e=>this.setState({editingText:e.target.value}),rows:5}),l.a.createElement("button",{onClick:this.save},"Save"),"  ",l.a.createElement("button",{onClick:()=>this.setState({editingIndex:null,editingText:null})},"Cancel")):l.a.createElement(H,{key:t},l.a.createElement("p",{style:{cursor:"pointer"},onClick:this.fillToInput(e)},w()(e.text)),l.a.createElement("button",{onClick:()=>this.setState({editingIndex:t,editingText:e.text})},"Edit"),"  ",l.a.createElement("button",{onClick:this.fillToInput(e)},"COPY & PASTE"),"  ")),e&&l.a.createElement("center",null,l.a.createElement(x.a,null))):null}}var j={PROD:!0,BACKEND:"https://nuichatbot.herokuapp.com/tonghopevent",SOCKETIO:"https://nuichatbot.herokuapp.com/",SOCKETIO_MODULE:"tonghopevent",SELF_PAGE_ID:"242401956152220",INBOX_TITLE:"tonghopevent",INBOX_SEND_ABILITY:!0,INBOX_UNREAD_ABILITY:!0,INBOX_IGNORED_CONVERSATION:"t_229190944264162",INBOX_MARK_READ_ON_OPEN:!1,VERSION:"5.2",CustomMessengerWidget:L};class $ extends l.a.Component{constructor(e){super(),this.handleChange=e=>t=>{this.setState({[e]:t.target.value})},this.props=e,this.state={},window.changeHeader("Login")}async onLogin(){if(""===this.state.username||""===this.state.password)return window.showAlert({title:"Please fill in",text:"Please fill in your username and password"});{this.setState({loading:!0});const{username:e,password:t}=this.state,n=await y.a.post(j.BACKEND+"/login",{username:e,password:t});if(this.setState({loading:!1}),!n.data.token)return window.showAlert({title:"Error",text:n.data.error});A.setLocalStorage("token",n.data.token),window.location.href="#/"}}async onRegister(){}render(){var e={input:{marginBottom:"20px",width:"500px",maxWidth:"100%"},container:{display:"flex",flexWrap:"wrap"},cardStyle:{maxWidth:"500px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}};const t=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null))),n=l.a.createElement("div",null,l.a.createElement(u.a,{style:e.cardStyle},l.a.createElement(g.a,null,l.a.createElement(p.a,{variant:"h5",component:"h2"},"Admin - TongHopEvent"),l.a.createElement(p.a,{color:"textSecondary"},"Please login to continue"),l.a.createElement(E.a,{label:"Username",type:"text",value:this.state.username,style:e.input,onChange:this.handleChange("username"),margin:"normal"}),l.a.createElement(E.a,{label:"Password",type:"password",value:this.state.password,style:e.input,onChange:this.handleChange("password"),margin:"normal"}),l.a.createElement("div",null,l.a.createElement(b.a,{onClick:this.onLogin.bind(this),color:"primary"},"Login")))));return this.state.loading?t:n}}var M=$,F=n(184),R=n.n(F),V=n(5578),G=n(5579),K=n(109),W=n.n(K),U=n(108),z=n.n(U),q=n(5574),X=n(5573),J=n(5577),Q=n(5575),Y=n(5576);class Z extends l.a.Component{constructor(e){super(e),this.state={comment:e.doc.comment||""}}render(){const{comment:e}=this.state,{onClose:t}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.a,{fullWidth:!0,open:!0,onClose:()=>t(!1),"aria-labelledby":"form-dialog-title"},l.a.createElement(q.a,{id:"form-dialog-title"},"Ghi ch\xfa"),l.a.createElement(Q.a,null,l.a.createElement(Y.a,null,"B\u1ea1n c\xf3 th\u1ec3 \u0111\u1ec3 l\u1ea1i ghi ch\xfa cho b\xe0i vi\u1ebft n\xe0y. Ch\u1ec9 c\xf3 Admin m\u1edbi nh\xecn th\u1ea5y ghi ch\xfa."),l.a.createElement(E.a,{multiline:!0,rowsMax:"20",value:e,onChange:e=>{this.setState({comment:e.target.value})},margin:"normal",variant:"outlined",fullWidth:!0})),l.a.createElement(J.a,null,l.a.createElement(b.a,{onClick:()=>t(!1),color:"primary"},"Quay l\u1ea1i"),l.a.createElement(b.a,{onClick:()=>t(e),color:"primary"},"L\u01afU GHI CH\xda"))))}}var ee=Z;n(5492);class te extends l.a.Component{constructor(e){super(),this.getImageUrl=()=>{const{doc:{image:e}}=this.props;return e&&0!==e.length?e[0].startsWith("http")?e[0]:"https://drive.google.com/uc?export=view&id="+e[0]:null},this.props=e,this.state={loading:!1,isNoteEditOpen:!1,isCopied:!1,isExpanded:!this.props.admin,copyContent:this.props.admin?this.getCopyContent():""},this.props.doc&&this.props.doc.linkfb&&(this.fbusername=A.extractFacebookUsername(this.props.doc.linkfb)),e.admin&&(e.doc.image?this.state.publishAction="publish":this.fbusername?this.state.publishAction="getimage":this.state.publishAction=null)}async updateDocField(e,t,n,a){this.setState({loading:!0});const{doc:l}=this.props,r=await y.a.post(n,a);if(r.data.success){const n=JSON.parse(JSON.stringify(l));n[e]=t,this.props.setDoc(this.props.i,n)}else window.showAlert({title:"Error",text:r.data.error});this.setState({loading:!1})}async toggleTrashDoc(){const{doc:e}=this.props,t=!e.trashed,n=A.getLocalStorage("token");await this.updateDocField("trashed",t,`${j.BACKEND}/doc/${e.id}/trashed?token=${n}`,{trashed:t})}async toggleApproved(){const{doc:e}=this.props,t=!e.approved,n=A.getLocalStorage("token");await this.updateDocField("approved",t,`${j.BACKEND}/doc/${e.id}/approved?token=${n}`,{approved:t})}async updateComment(e){const{doc:t}=this.props,n=A.getLocalStorage("token");await this.updateDocField("comment",e||"",`${j.BACKEND}/doc/${t.id}/comment?token=${n}`,{comment:e})}getCopyContent(){const{doc:e}=this.props;return(`-- ${e.name} --\n${this.generateLocationTag(e)} ${e.type.join(" ")}\n\n\u25cf M\xf4 t\u1ea3: ${e.description.trim()}\n\n\u25cf Link facebook: ${A.cleanFBLink(e.linkfb)}\n`+(e.wanted&&e.wanted.length>0?"\u25cf Y\xeau c\u1ea7u \u0111\u1ed1i t\u01b0\u1ee3ng: "+e.wanted.join(", ").trim()+"\n":"")+(e.deadline?"\u25cf Deadline tuy\u1ec3n nh\xe2n s\u1ef1: "+e.deadline.trim()+"\n":"")+(e.benefit?"\u25cf Quy\u1ec1n l\u1ee3i khi tham gia d\u1ef1 \xe1n:\n"+e.benefit.trim()+"\n":"")+`\nTrackID:${e.psid}:${e.id}`).trim()}generateLocationTag(e){const{location:t,locations:n}=e,a=[];console.log(e);const l=e=>{a.push("To\xe0n qu\u1ed1c"===e?"#d\u1ef1_\xe1n_to\xe0n_qu\u1ed1c":"#d\u1ef1_\xe1n_\u1edf_"+e.replace(/\s+/g,"_"))};return t&&l(t),n&&n.forEach(l),a.join(" ")}_renderNonAdminInfo(){const{doc:e}=this.props;return l.a.createElement("p",{style:{backgroundColor:e.trashed?"#ffa3a3":"#eee",padding:"10px",width:"100%"}},l.a.createElement("center",null,e.trashed?"B\xe0i vi\u1ebft n\xe0y \u0111\xe3 b\u1ecb t\u1eeb ch\u1ed1i":e.approved?"B\xe0i vi\u1ebft n\xe0y \u0111\xe3 \u0111\u01b0\u1ee3c duy\u1ec7t v\xe0 s\u1ebd s\u1edbm \u0111c \u0111\u0103ng l\xean fanpage":"B\xe0i vi\u1ebft n\xe0y \u0111ang \u0111\u1ee3i \u0111\u1ec3 \u0111\u01b0\u1ee3c ki\u1ec3m duy\u1ec7t"))}_renderDuplicatedWarningIcon(){const{doc:e,duplicateHelper:t,openDuplicateDocDialog:n}=this.props;if(!t||e.approved)return null;const a=t.checkDoc(e);return a?l.a.createElement(V.a,{size:"small",color:"primary",style:{marginRight:"15px"},onClick:()=>n(a,e.id)},l.a.createElement(z.a,null)):null}_renderPostContent(){const{doc:e}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,this.generateLocationTag(e)," ",e.type.join(" ")),l.a.createElement("p",null,A.nl2br(e.description)),l.a.createElement("p",null,"\u25cf Link facebook: ",A.cleanFBLink(e.linkfb),l.a.createElement("br",null),e.wanted&&e.wanted.length>0&&l.a.createElement("span",null,"\u25cf Y\xeau c\u1ea7u \u0111\u1ed1i t\u01b0\u1ee3ng: ",e.wanted.join(", "),l.a.createElement("br",null)),!!e.deadline&&l.a.createElement("span",null,"\u25cf Deadline tuy\u1ec3n nh\xe2n s\u1ef1: ",A.nl2br(e.deadline),l.a.createElement("br",null)),!!e.benefit&&l.a.createElement("span",null,"\u25cf Quy\u1ec1n l\u1ee3i khi tham gia d\u1ef1 \xe1n: ",l.a.createElement("br",null),A.nl2br(e.benefit),l.a.createElement("br",null))),this.props.admin&&l.a.createElement("p",null,"TrackID:",e.psid,":",e.id),!!e.image&&l.a.createElement("p",null,"\u1ea2nh tu\u1ef3 ch\u1ecdn: ",l.a.createElement("a",{href:this.getImageUrl(),target:"_blank",rel:"noopener noreferrer"},"B\u1ea5m v\xe0o \u0111\xe2y")),l.a.createElement("p",null,"(G\u1eedi l\xfac ",A.getTimeStr(e.created)," ng\xe0y ",A.getDateStr(e.created),")",!!e.org&&l.a.createElement("span",null,l.a.createElement("br",null),"\u0110\u01a1n v\u1ecb t\u1ed5 ch\u1ee9c: ",A.getOrgName(e))),!this.props.admin&&!!e.feedback&&l.a.createElement("p",null,"\u25cf C\xe2u h\u1ecfi, g\xf3p \xfd: ",e.feedback))}_renderMainCard(){const{doc:e}=this.props,{isExpanded:t,copyContent:n,publishAction:a,isNoteEditOpen:r}=this.state,i=this.props.gotoPublish||(()=>{}),o=l.a.createElement("div",null,l.a.createElement("div",{style:t?null:{maxHeight:"315px",overflow:"hidden",position:"relative"},className:t?null:"fade-out"},!this.props.admin&&this._renderNonAdminInfo(),l.a.createElement("p",null,e.approved&&l.a.createElement(V.a,{size:"small",color:"primary",style:{marginRight:"15px"},disabled:!0},l.a.createElement(W.a,null)),this._renderDuplicatedWarningIcon(),l.a.createElement("b",null,"-- ",e.name," --"),e.plan&&l.a.createElement("p",null,l.a.createElement("span",{className:"doc-plan"},"\u2588 G\xf3i ",e.plan.toUpperCase()))),l.a.createElement(R.a,{componentDecorator:(e,t,n)=>l.a.createElement("a",{href:e,key:n,target:"_blank",rel:"noopener noreferrer"},t)},this._renderPostContent())),this.props.admin&&l.a.createElement("div",null,l.a.createElement("center",null,l.a.createElement(b.a,{onClick:()=>this.setState({isExpanded:!t})},t?"Thu g\u1ecdn":"Hi\u1ec7n th\xeam ..."))),l.a.createElement(G.a,null),this.props.admin&&l.a.createElement(l.a.Fragment,null,this.state.loading?l.a.createElement("center",null,l.a.createElement(f.a,null)):l.a.createElement("div",null,e.comment&&e.comment.trim().length>0&&l.a.createElement("p",null,l.a.createElement("b",null,"\u25cf Ghi ch\xfa:")," ",A.nl2br(e.comment)),!!e.feedback&&l.a.createElement("p",null,"\u25cf C\xe2u h\u1ecfi, g\xf3p \xfd: ",e.feedback),l.a.createElement(b.a,{variant:"outlined",onClick:this.toggleTrashDoc.bind(this),color:"primary"},"X\xf3a"),l.a.createElement(b.a,{variant:"outlined",onClick:this.toggleApproved.bind(this),color:"primary"},"Tick"),a&&l.a.createElement(b.a,{variant:"outlined",onClick:()=>{i({id:e.id,caption:n,url:this.getImageUrl(),fbusername:this.fbusername,psid:e.psid,feedback:e.feedback},a)},color:"primary"},"\u0110\u0103ng b\xe0i"),l.a.createElement(b.a,{variant:"outlined",onClick:()=>this.setState({isNoteEditOpen:!0}),color:"primary"},"Ghi ch\xfa"),l.a.createElement(b.a,{variant:"outlined",onClick:()=>this.props.openToolsDialog(e),color:"primary"},"+"))));return l.a.createElement("div",{style:{paddingBottom:"20px"}},l.a.createElement(u.a,null,l.a.createElement(g.a,{style:{backgroundColor:e.approved&&this.props.admin?"#cfd8dc":"#fff"},className:e.approved&&this.props.admin?"approved":null},o)),r&&l.a.createElement(ee,{doc:e,onClose:e=>{this.setState({isNoteEditOpen:!1}),!1!==e&&this.updateComment(e)}}))}_renderTrashedDoc(){const{doc:e}=this.props;return this.state.loading?l.a.createElement("center",null,l.a.createElement(f.a,null)):l.a.createElement("p",null,l.a.createElement("b",null,"(\u0110\xe3 x\xf3a)")," ",e.name," \xa0\xa0\xa0",l.a.createElement(b.a,{variant:"outlined",size:"small",color:"primary",className:"restore-btn",onClick:this.toggleTrashDoc.bind(this)},"Kh\xf4i ph\u1ee5c"))}render(){const{doc:e,admin:t}=this.props;return e.trashed&&t?this._renderTrashedDoc():this._renderMainCard()}}var ne=te,ae=n(5571),le=n(5580),re=n(5581),ie=n(185);n(5502);const oe=[{desc:"B\xe1o tr\xf9ng b\xe0i",text:"\u0110\xe3 c\xf3 ng\u01b0\u1eddi nh\u1eadp th\xf4ng tin c\u1ee7a d\u1ef1 \xe1n / cu\u1ed9c thi / s\u1ef1 ki\u1ec7n n\xe0y. Kh\xf4ng bi\u1ebft b\u1ea1n c\xf3 mu\u1ed1n b\u1ed5 sung hay thay \u0111\u1ed5i g\xec kh\xf4ng nh\u1ec9?\n\nN\u1ebfu kh\xf4ng, ch\xfang m\xecnh s\u1ebd x\xf3a th\xf4ng tin b\u1ea1n \u0111\xe3 nh\u1eadp \u0111\u1ec3 kh\xf4ng b\u1ecb tr\xf9ng v\u1edbi b\xe0i \u0111\xe3 \u0111\u0103ng."},{desc:"B\xe1o b\u1ecb x\xf3a v\xec ko ph\xf9 h\u1ee3p",text:"Xin ch\xe0o b\u1ea1n,\n\nD\u1ef1 \xe1n / cu\u1ed9c thi / s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n \u0111\xe3 b\u1ecb x\xf3a do kh\xf4ng ph\xf9 h\u1ee3p v\u1edbi \u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng c\u1ee7a ch\xfang m\xecnh.\n\nH\xe3y tham kh\u1ea3o \u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng c\u1ee7a fanpage t\u1ea1i \u0111\xe2y: https://sites.google.com/view/tonghopevent"},{desc:"B\xe1o d\u1ef1 \xe1n c\xf3 l\u1ee3i nhu\u1eadn",text:"Xin ch\xe0o b\u1ea1n,\n\nD\u1ef1 \xe1n / cu\u1ed9c thi / s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\xe0nh b\u1edfi m\u1ed9t t\u1ed5 ch\u1ee9c / c\xe1 nh\xe2n ho\u1ea1t \u0111\u1ed9ng c\xf3 l\u1ee3i nhu\u1eadn. D\u1ef1a theo \u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng c\u1ee7a ch\xfang m\xecnh, b\xe0i c\u1ee7a b\u1ea1n ph\u1ea3i tr\u1ea3 ph\xed 100.000 VN\u0110 \u0111\u1ec3 c\xf3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u0103ng b\xe0i l\xean fanpage nh\xe9.\n\nH\xe3y tham kh\u1ea3o \u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng c\u1ee7a fanpage t\u1ea1i \u0111\xe2y: https://sites.google.com/view/tonghopevent"},{desc:"B\xe1o thi\u1ebfu th\xf4ng tin",text:"Admin \u0111\xe3 xem b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n. Tuy nhi\xean, do b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n c\xf2n thi\u1ebfu m\u1ed9t s\u1ed1 th\xf4ng tin n\xean ch\xfang m\xecnh ch\u01b0a th\u1ec3 ph\xea duy\u1ec7t \u0111\u01b0\u1ee3c. B\u1ea1n h\xe3y \u0111i\u1ec1n l\u1ea1i form v\u1edbi \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin h\u01a1n nh\xe9!\n\nH\xe3y tham kh\u1ea3o v\xed d\u1ee5 sau: https://bit.ly/2TZKbee"},{desc:"\u0110i\u1ec1n l\u1ea1i (kh\xf4ng paste link)",text:"Admin \u0111\xe3 xem b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n. Tuy nhi\xean, ch\xfang m\xecnh kh\xf4ng th\u1ec3 x\u1eed l\xfd n\u1ebfu b\u1ea1n ch\u1ec9 copy-paste m\u1ed7i link b\xe0i vi\u1ebft. B\u1ea1n h\xe3y \u0111i\u1ec1n l\u1ea1i form th\u1eadt r\xf5 r\xe0ng, bao g\u1ed3m c\u1ea3 ph\u1ea7n gi\u1edbi thi\u1ec7u, \xfd ngh\u0129a d\u1ef1 \xe1n / cu\u1ed9c thi / s\u1ef1 ki\u1ec7n nh\xe9.\n\nH\xe3y tham kh\u1ea3o v\xed d\u1ee5 sau: https://bit.ly/2TZKbee"}];class se extends l.a.Component{constructor(e){super(e),this.state={loading:!0,error:!1,showTemplates:!0,sendInboxData:null,inboxData:{},isLinkCopied:!1}}async fetchData(){this.setState({error:!1,loading:!0,showTemplates:!0,isLinkCopied:!1});const e=await A.makeRequest(`${j.BACKEND}/inbox/${this.props.psid}`),{data:t}=e;t&&Object.keys(t).length>0?this.setState({loading:!1,error:!1,inboxData:t}):this.setState({loading:!1,error:!0})}async sendInbox(){const e=(t=this.state.sendInboxData,JSON.parse(JSON.stringify(t)));var t;this.setState({sendInboxData:null}),this.props.closeToolsDialog();const n=await A.makeRequest(`${j.BACKEND}/inbox/${this.props.psid}`,"post",{message:"\u2b22 "+e.text});n.data&&n.data.success?window.toastr.success("\u0110\xe3 g\u1eedi tin nh\u1eafn th\xe0nh c\xf4ng!"):window.toastr.error("\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f C\xf3 l\u1ed7i x\u1ea3y ra, ko th\u1ec3 g\u1eedi tin nh\u1eafn \u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f")}goToPageInbox(){A.goToInbox(this.state.inboxData),this.props.closeToolsDialog()}_renderSendInboxDialogAsk(){const{sendInboxData:e}=this.state,t=Date.now()-this.props.doc.created<864e5,n=()=>this.setState({sendInboxData:null});return e?l.a.createElement(X.a,{open:!!e,onClose:n},l.a.createElement(q.a,{id:"alert-dialog-title"},e.desc),l.a.createElement(Q.a,null,l.a.createElement(Y.a,{id:"alert-dialog-description"},t?"G\u1eedi tin nh\u1eafn c\xf3 n\u1ed9i dung nh\u01b0 sau (c\xf3 th\u1ec3 s\u1eeda):":"Kh\xf4ng th\u1ec3 t\u1ef1 \u0111\u1ed9ng g\u1eedi tin nh\u1eafn. H\xe3y copy-paste v\xe0 inbox th\u1ee7 c\xf4ng:",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(E.a,{multiline:!0,rowsMax:"20",value:e.text,onChange:t=>{this.setState({sendInboxData:{...e,text:t.target.value}})},margin:"normal",variant:"outlined",fullWidth:!0}))),l.a.createElement(J.a,null,l.a.createElement(b.a,{onClick:n,color:"primary"}," Quay l\u1ea1i "),!t&&l.a.createElement(b.a,{onClick:()=>A.copyTextToClipboard(e.text),color:"primary"}," Copy tin nh\u1eafn "),t?l.a.createElement(b.a,{onClick:()=>this.sendInbox(),color:"primary"}," G\u1eecI "):l.a.createElement(b.a,{onClick:()=>this.goToPageInbox(),color:"primary"}," \u0110i t\u1edbi inbox "))):null}_renderError(){return l.a.createElement(ae.a,null,l.a.createElement(le.a,{button:!0},l.a.createElement(re.a,{primary:"(C\xf3 l\u1ed7i x\u1ea3y ra)"})),l.a.createElement(le.a,{button:!0,onClick:this.props.closeToolsDialog},l.a.createElement(re.a,{primary:"Quay l\u1ea1i"})))}_renderContent(){const{inboxData:e,showTemplates:t,isLinkCopied:n}=this.state;return l.a.createElement(ae.a,null,l.a.createElement(le.a,{button:!0,onClick:this.goToPageInbox.bind(this)},l.a.createElement(re.a,{primary:"\u0110i t\u1edbi inbox",secondary:"T\xean FB: "+e.senders.data[0].name})),l.a.createElement(G.a,null),!t&&l.a.createElement(le.a,{button:!0,onClick:()=>this.setState({showTemplates:!0})},l.a.createElement(re.a,{primary:"\ud83d\udcac (Hi\u1ec7n c\xe1c m\u1eabu tin nh\u1eafn)"})),t&&oe.map((e,t)=>l.a.createElement(le.a,{button:!0,onClick:()=>this.setState({sendInboxData:e}),key:t},l.a.createElement(re.a,{primary:"\ud83d\udcac "+e.desc}))),l.a.createElement(G.a,null),l.a.createElement(ie.CopyToClipboard,{text:`${window.location.protocol}//${window.location.host}/data/#/view/${this.props.doc.id}`,onCopy:()=>this.setState({isLinkCopied:!0})},l.a.createElement(le.a,{button:!0},l.a.createElement(re.a,{primary:n?"(\u0110\xe3 copy link)":"Copy link b\xe0i vi\u1ebft"}))),l.a.createElement(G.a,null),l.a.createElement(le.a,{button:!0,onClick:this.props.closeToolsDialog},l.a.createElement(re.a,{primary:"Quay l\u1ea1i"})))}render(){const{name:e,open:t}=this.props;return l.a.createElement(l.a.Fragment,null,this._renderSendInboxDialogAsk(),l.a.createElement(X.a,{open:t,onEnter:this.fetchData.bind(this),onBackdropClick:this.props.closeToolsDialog,className:"tools-dialog","aria-labelledby":"simple-dialog-title"},l.a.createElement(q.a,{id:"simple-dialog-title"},e?e.substr(0,24):""),this.state.loading?l.a.createElement("center",null,l.a.createElement(f.a,null)):this.state.error?this._renderError():this._renderContent()))}}var ce=se;class me extends l.a.Component{constructor(e){super(e),this.state={}}_renderContent(){const{docs:e,selectedDocID:t}=this.props,n=Date.now();return l.a.createElement(ae.a,null,e.map(e=>{if(e.id===t)return null;const a=Math.floor((n-e.created)/86400/1e3);return l.a.createElement(le.a,{button:!0,onClick:()=>window.open("/data/#/view/"+e.id,"_blank"),key:e.id},l.a.createElement(re.a,{primary:e.name,secondary:`${A.getDateStr(e.created)} l\xfac ${A.getTimeStr(e.created)} ${a>0?` (${a} ng\xe0y tr\u01b0\u1edbc)`:""}`}))}),l.a.createElement(G.a,null),l.a.createElement(le.a,{button:!0,onClick:this.props.closeDuplicateDocDialog},l.a.createElement(re.a,{primary:"Quay l\u1ea1i"})))}render(){const{docs:e}=this.props;return l.a.createElement(X.a,{open:!!e,"aria-labelledby":"simple-dialog-title"},l.a.createElement(q.a,{id:"simple-dialog-title"},"B\xe0i \u0111\u0103ng tr\xf9ng"),l.a.createElement(Q.a,null,"B\xe0i \u0111\u0103ng n\xe0y c\xf3 th\u1ec3 b\u1ecb tr\xf9ng v\u1edbi nh\u1eefng b\xe0i sau:"),e&&this._renderContent())}}var he=me;var de=class{constructor(){this.seen={}}pushLookbackData(e){for(const t of e){const{fbname:e}=t;this.seen[e]?this.seen[e].push(t):this.seen[e]=[t]}}pushDoc(e){const t=A.extractFacebookUsername(e.linkfb);if(!t)return null;this.seen[t]?this.seen[t].push(e):this.seen[t]=[e]}checkDoc(e){const t=A.extractFacebookUsername(e.linkfb),n=this.seen[t];return n&&n.length>1?n:null}clear(){this.seen={}}},ue=n(93);class pe extends l.a.Component{constructor(e){super(),this.markDocApproved=e=>{window.DOCID_APPROVED||(window.DOCID_APPROVED={}),window.DOCID_APPROVED[e]=!0,this.dispatchDocApproved()},this.dispatchDocApproved=()=>{window.DOCID_APPROVED||(window.DOCID_APPROVED={}),this.setState(e=>({list:e.list.map(e=>(window.DOCID_APPROVED[e.id]&&(e.approved=!0),e))}))},this.handleChange=e=>t=>{this.setState({[e]:t.target.value})},this.props=e,this.state={loading:!0,list:[],toolsDialogOpen:!1,toolsDialogDoc:{},duplicateHelper:new de,duplicateDocDialog:null,selectedDocID:""},window.changeHeader("Qu\u1ea3n l\xfd d\u1eef li\u1ec7u - TongHopEvent")}componentDidMount(){this.loadData(),window.markDocApproved=this.markDocApproved}componentWillUnmount(){window.markDocApproved=null}async loadData(){const e=new de,t=A.getToken(),[n,{data:a}]=await Promise.all([y.a.get(`${j.BACKEND}/feed?token=${t}`),y.a.get(`${j.BACKEND}/lookback?token=${t}`)]);A.checkError(n),e.pushLookbackData(a),this.setState({loading:!1,list:n.data,duplicateHelper:e}),this.dispatchDocApproved()}onClickEdit(){this.setState({edit:!0})}setDoc(e,t){this.setState(n=>{const a=n.list;return a[e]=t,{list:a}})}openToolsDialog(e){this.setState({toolsDialogOpen:!0,toolsDialogDoc:e})}openDuplicateDocDialog(e,t){this.setState({duplicateDocDialog:e,selectedDocID:t})}render(){const e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null))),{gotoPublish:t}=this.props,{duplicateDocDialog:n,duplicateHelper:a,selectedDocID:r}=this.state,i=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{marginTop:"20px",marginRight:"20px",marginLeft:"20px"}},0===this.state.list.length&&l.a.createElement("center",null,l.a.createElement("h2",null,"Ch\u01b0a c\xf3 b\xe0i \u0111\u0103ng n\xe0o")),l.a.createElement(ue.a,{columnsCountBreakPoints:{350:1,1e3:2,1550:3}},l.a.createElement(ue.b,{gutter:"10px"},this.state.list.map((e,n)=>e?l.a.createElement("div",{key:e.id},l.a.createElement(ne,{doc:e,setDoc:this.setDoc.bind(this),i:n,admin:!0,gotoPublish:t,openToolsDialog:this.openToolsDialog.bind(this),openDuplicateDocDialog:this.openDuplicateDocDialog.bind(this),duplicateHelper:a})):null)))),l.a.createElement(ce,{open:this.state.toolsDialogOpen,closeToolsDialog:()=>this.setState({toolsDialogOpen:!1}),name:this.state.toolsDialogDoc.name,psid:this.state.toolsDialogDoc.psid,doc:this.state.toolsDialogDoc}),l.a.createElement(he,{docs:n,selectedDocID:r,closeDuplicateDocDialog:()=>this.setState({duplicateDocDialog:null})}));return this.state.loading?e:i}}var ge=pe;const Ee={cardStyle:{maxWidth:"800px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}};class be extends l.a.Component{constructor(e){super(),this.props=e,this.state={loading:!0,doc:{}},window.changeHeader("Qu\u1ea3n l\xfd d\u1eef li\u1ec7u - TongHopEvent")}componentDidMount(){this.loadData()}async loadData(){const e=A.getLocalStorage("token"),t=await y.a.get(`${j.BACKEND}/doc/${this.props.id}?token=${e}`);t.data.error?this.setState({loading:!1,doc:null}):this.setState({loading:!1,doc:t.data})}_renderDocView(){return l.a.createElement("div",{style:Ee.cardStyle},l.a.createElement(ne,{doc:this.state.doc||{}}))}_renderDocNotFound(){return l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",null,"C\xf3 l\u1ed7i x\u1ea3y ra"),"B\xe0i \u0111\u0103ng n\xe0y kh\xf4ng t\u1ed3n t\u1ea1i ho\u1eb7c \u0111\xe3 b\u1ecb xo\xe1",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}render(){const e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null)));return this.state.loading?e:this.state.doc?this._renderDocView():this._renderDocNotFound()}}var fe=be,ve=n(89),ye=n.n(ve),ke=n(214),we=n(130);class Ce extends l.a.Component{constructor(e){super(e),this.state={publish_time:new Date(Date.now()+12e5)}}componentDidMount(){this.props.handleDateChange(this.state.publish_time.getTime()/1e3)}handleDateChange(e){this.setState({publish_time:e}),this.props.handleDateChange(e.getTime()/1e3)}render(){const{publish_time:e}=this.state;return l.a.createElement(we.c,{utils:ke.a},l.a.createElement(we.a,{margin:"normal",id:"mui-pickers-date",label:"Date picker",value:e,onChange:this.handleDateChange.bind(this),KeyboardButtonProps:{"aria-label":"change date"}}),"\xa0\xa0\xa0\xa0\xa0",l.a.createElement(we.b,{margin:"normal",id:"mui-pickers-time",label:"Time picker",value:e,onChange:this.handleDateChange.bind(this),KeyboardButtonProps:{"aria-label":"change time"}}))}}var xe=Ce;const De=[{hrs:6,min:0,priority:3},{hrs:6,min:20,priority:2},{hrs:6,min:40,priority:1},{hrs:7,min:0,priority:1},{hrs:19,min:0,priority:3},{hrs:19,min:30,priority:4},{hrs:20,min:0,priority:7},{hrs:20,min:30,priority:7},{hrs:20,min:45,priority:4},{hrs:21,min:0,priority:9},{hrs:21,min:15,priority:4},{hrs:21,min:30,priority:8},{hrs:21,min:50,priority:4},{hrs:22,min:10,priority:1}].map(e=>({...e,timeInDay:1e3*(3600*e.hrs+60*e.min)})),Se=e=>{const t=e.match(/([0-9]+)\/([0-9]+)/);if(console.log(t),!t)return 0;const n=new Date(2021,parseInt(t[2])-1,parseInt(t[1]),0,0,0,0);return n.setTime(n.getTime()+6e4*n.getTimezoneOffset()- -252e5),console.log(n),n.getTime()},Te=({stat:e})=>{const t=JSON.parse(JSON.stringify(e)).sort();return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"C\xe1c b\xe0i \u0111\u0103ng \u0111\xe3 l\xean l\u1ecbch")),l.a.createElement("ul",null,t.map(e=>l.a.createElement("li",{key:e},A.getTimeStr(e)," ng\xe0y ",A.getDateStr(e)))))},Ne=({statArr:e,value:t,onChange:n,feedback:r})=>{const[i,o]=Object(a.useState)(!1),[s,c]=Object(a.useState)(!1),[m]=Object(a.useState)((()=>{const e=Date.now(),t=864e5*Math.floor(e/864e5),n=[];let a=0;for(;n.length<7;){const l=t+864e5*a+-252e5,r=[];for(const t of De){const n=l+t.timeInDay;n-e>12e5&&r.push({...t,time:n})}r.length>2&&n.push({startAt:l- -252e5,slotsOfDay:r}),a++}return n})()),[h,d]=Object(a.useState)({}),[u,p]=Object(a.useState)(null),g=1e3*t;return Object(a.useEffect)(()=>{const t=JSON.parse(JSON.stringify(e));d(((e,t)=>{const n={};for(const{slotsOfDay:a}of t)for(const{time:t}of a){e.some(e=>e-6e5<t&&t<e+6e5)&&(n[t]=!0)}return n})(t,m));const a=((e,t,n)=>{const a=Se(n),l=JSON.parse(JSON.stringify(e));for(const{slotsOfDay:r}of l){r.sort((e,t)=>e.priority<t.priority?1:-1);for(const{time:e}of r)if(!t[e]&&e>a)return e}return null})(m,h,r);a&&(p(a),setTimeout(()=>n(Math.round(a/1e3)),200))},[e]),l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"L\xean l\u1ecbch b\xe0i \u0111\u0103ng"),"   ",l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>o(!i)},i?"Ch\u1ecdn gi\u1edd theo slot":"Ch\u1ecdn gi\u1edd th\u1ee7 c\xf4ng")),r&&l.a.createElement("p",null,"G\xf3p \xfd t\u1eeb ng\u01b0\u1eddi g\u1eedi: ",r),!i&&l.a.createElement(l.a.Fragment,null,u&&l.a.createElement("p",null,"Gi\u1edd \u0111\u0103ng b\xe0i do m\xe1y g\u1ee3i \xfd: ",A.getTimeStr(u,7)," ng\xe0y ",A.getDateStr(u,7)),m.map((e,t)=>!s&&t<3||s?l.a.createElement("p",{key:e.startAt},l.a.createElement("b",null,A.getDateStr(e.startAt,7))," (GMT+7)",l.a.createElement("br",null),e.slotsOfDay.map(({time:e})=>l.a.createElement(l.a.Fragment,{key:e},l.a.createElement(b.a,{variant:"outlined",size:"small",color:"primary",className:g===e?"timeslot-selected":"",onClick:()=>n(Math.round(e/1e3)),disabled:h[e]},A.getTimeStr(e,7)),"  "))):null),!s&&l.a.createElement(b.a,{variant:"outlined",size:"small",color:"primary",onClick:()=>c(!0)},"+ Hi\u1ec7n th\xeam ng\xe0y")),i&&l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,{handleDateChange:e=>n(Math.round(e))}),l.a.createElement(Te,{stat:e})))},_e={cardStyle:{marginTop:"20px",marginRight:"1em",marginLeft:"1em",display:"flex",flexWrap:"wrap"}};class Oe extends l.a.Component{constructor(e){super(e),this.getErrorMessage=e=>{var t;return(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)?"L\xfd do: "+e.error.message:"H\xe3y b\xe1o l\u1ea1i cho Nui."},this.state={completed:!1,loading:!0,stat:[],inboxData:null},e.data&&(this.state.id=e.data.id,this.state.caption=e.data.caption,this.state.url=e.data.url,this.state.psid=e.data.psid,this.state.feedback=e.data.feedback||"",this.state.scheduled_publish_time=0),window.changeHeader("C\xf4ng c\u1ee5 \u0111\u0103ng b\xe0i - TongHopEvent")}componentDidMount(){this.loadStat(),this.loadInbox()}async loadStat(){const e=A.getLocalStorage("token"),t=await y.a.get(`${j.BACKEND}/publish/stat?token=${e}`);t.data.error?this.setState({loading:!1,stat:[]}):this.setState({loading:!1,stat:t.data})}async loadInbox(){const{data:e}=await A.makeRequest(`${j.BACKEND}/inbox/${this.state.psid}`);e&&Object.keys(e).length>0&&this.setState({inboxData:e})}async doPublish(){const e=A.getLocalStorage("token"),t=this.state.id,n={caption:this.state.caption,url:this.state.url,scheduled_publish_time:this.state.scheduled_publish_time},a=window.toastr.info("\u0110ang \u0111\u0103ng b\xe0i...","Publish tool",{timeOut:6e4});window.location.hash="#/manage";const{data:l}=await y.a.post(`${j.BACKEND}/publish?token=${e}`,n);window.toastr.clear(a),l.id?(window.toastr.success("\u0110\xe3 \u0111\u0103ng b\xe0i th\xe0nh c\xf4ng!","Publish tool"),window.markDocApproved&&window.markDocApproved(t)):window.toastr.error("L\u1ed7i: Kh\xf4ng th\u1ec3 \u0111\u0103ng b\xe0i. "+this.getErrorMessage(l),"Publish tool",{timeOut:2e4})}_renderComposerCard(){const e={height:"300px",maxWidth:"100%"};return l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("p",null,l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>window.location.hash="#/manage"},"Tr\u1edf v\u1ec1"),"\xa0\xa0\xa0",l.a.createElement("b",null,"So\u1ea1n b\xe0i \u0111\u0103ng")),l.a.createElement("center",null,l.a.createElement(ye.a,{alt:"",src:this.state.url,style:e,loader:l.a.createElement("div",{style:e},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(f.a,null)))})),l.a.createElement(E.a,{label:"N\u1ed9i dung b\xe0i \u0111\u0103ng",multiline:!0,rowsMax:"20",value:this.state.caption,onChange:e=>{this.setState({caption:e.target.value})},margin:"normal",variant:"outlined",fullWidth:!0})))}_renderPublishCard(){const{scheduled_publish_time:e,stat:t,feedback:n}=this.state,a=e-Date.now()/1e3>900,r=1e3*e;return l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement(Ne,{value:e,statArr:t,onChange:e=>this.setState({scheduled_publish_time:e}),feedback:n}),l.a.createElement("br",null),l.a.createElement("br",null),a&&l.a.createElement(b.a,{variant:"contained",color:"primary",onClick:()=>{window.showAlert({title:"X\xe1c nh\u1eadn \u0111\u0103ng b\xe0i",text:`\u0110\u0103ng b\xe0i v\xe0o l\xfac ${A.getTimeStr(r)} ng\xe0y ${A.getDateStr(r)} ?`,onClickOK:this.doPublish.bind(this),showCancel:!0})}},"\u0110\u0103ng b\xe0i"),!a&&e>0&&l.a.createElement("p",{style:{color:"red"}},"Gi\u1edd \u0111\u0103ng b\xe0i ph\u1ea3i c\xe1ch hi\u1ec7n t\u1ea1i \xedt nh\u1ea5t 15 ph\xfat")))}_renderCompletedCard(){const{scheduled_publish_time:e}=this.state,t=1e3*e;return l.a.createElement("div",{style:_e.cardStyle},l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("h2",null,"\u0110\u0103ng b\xe0i th\xe0nh c\xf4ng"),l.a.createElement("p",null,"B\xe0i vi\u1ebft \u0111\xe3 \u0111\u01b0\u1ee3c \u0111\u1eb7t gi\u1edd \u0111\u1ec3 \u0111\u0103ng v\xe0o l\xfac ",A.getTimeStr(t)," ng\xe0y ",A.getDateStr(t)),l.a.createElement(b.a,{variant:"outlined",onClick:()=>window.location.hash="#/"},"Tr\u1edf v\u1ec1 trang ch\u1ee7"))),l.a.createElement("br",null),l.a.createElement("br",null))}_renderInboxCard(){const{inboxData:e}=this.state;return l.a.createElement(u.a,null,l.a.createElement(g.a,null,!e&&l.a.createElement("center",null,l.a.createElement(f.a,null)),e&&l.a.createElement(l.a.Fragment,null,l.a.createElement("b",null,"Tin nh\u1eafn m\u1edbi nh\u1ea5t (\u1edf tr\xean l\xe0 m\u1edbi, d\u01b0\u1edbi l\xe0 c\u0169)"),"   ",l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>A.goToInbox(e)},"M\u1edf inbox"),l.a.createElement("br",null),"------",l.a.createElement("br",null),e.messages.data.map(e=>l.a.createElement("p",{key:e.id},l.a.createElement("b",null,e.from.name),": ",e.message)))))}_renderMain(){return l.a.createElement("div",{style:{margin:"20px"}},l.a.createElement(ue.a,{columnsCountBreakPoints:{350:1,750:2,900:2}},l.a.createElement(ue.b,{gutter:"10px"},this._renderComposerCard(),l.a.createElement("div",null)," ",this._renderPublishCard(),this._renderInboxCard())),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}_renderError(){return l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",null,"C\xf3 l\u1ed7i x\u1ea3y ra"),"H\xe3y v\xe0o trang ch\u1ee7 v\xe0 th\u1eed l\u1ea1i",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}render(){const e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null)));return this.state.loading?e:this.state.completed?this._renderCompletedCard():this.props.data?this._renderMain():this._renderError()}}var Ie=Oe;const Be={maxHeight:"300px",maxWidth:"100%"},Pe={height:"300px",width:"100%"},Ae={cardStyle:{maxWidth:"800px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}};class He extends l.a.Component{constructor(e){super(e),this.state={showGetToken:!1,access_token:"",completed:!1,loading:!0,imgs:[]},e.data?(this.state.caption=e.data.caption,this.state.fbusername=e.data.fbusername):this.state.error="H\xe3y v\u1ec1 trang ch\u1ee7 v\xe0 th\u1eed l\u1ea1i",window.changeHeader("Ch\u1ecdn \u1ea3nh b\xe0i \u0111\u0103ng - TongHopEvent")}componentDidMount(){this.fetchFacebookApi()}async fetchFacebookApi(){const e=A.getLocalStorage("fbtoken");try{const t=await y.a.get(`https://graph.facebook.com/${this.state.fbusername}?fields=feed.limit(20)%7Bfull_picture%7D%2Cpicture.width(720)%7Burl%7D&access_token=${e}`);if(t.data.error)this.setState({loading:!1,showGetToken:!0});else{const e=t.data.feed.data.map(e=>e.full_picture);e.unshift(t.data.picture.data.url),this.setState({loading:!1,showGetToken:!1,imgs:e})}}catch(t){404===t.response.status?this.setState({loading:!1,error:"Kh\xf4ng th\u1ec3 m\u1edf trang facebook n\xe0y"}):this.setState({loading:!1,showGetToken:!0})}}onSaveToken(){let e=this.state.access_token;e=e.match(/EA[a-zA-Z0-9]+/);try{A.setLocalStorage("fbtoken",e[0]);const t=window.location.hash;window.location.hash="#/reload",setTimeout(()=>{window.location.hash=t},50)}catch(t){window.alert("token kh\xf4ng h\u1ee3p l\u1ec7")}}_renderTitleCard(){return l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("p",null,l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>window.location.hash="#/"},"Tr\u1edf v\u1ec1"),"\xa0\xa0\xa0",l.a.createElement("b",null,"Ch\u1ecdn \u1ea3nh cho b\xe0i \u0111\u0103ng"))))}_renderImageCard(e){return l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("center",null,l.a.createElement(ye.a,{alt:"",src:e,style:Be,loader:l.a.createElement("div",{style:Pe},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(f.a,null)))})),l.a.createElement(b.a,{variant:"outlined",size:"small",style:{float:"right",margin:"10px"},onClick:()=>{const t=JSON.parse(JSON.stringify(this.props.data));t.url=e,this.props.gotoPublish(t,"publish")}},"Ch\u1ecdn \u1ea3nh n\xe0y")))}_renderGetTokenCard(){return l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("p",null,l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>window.location.hash="#/"},"Tr\u1edf v\u1ec1"),"\xa0\xa0\xa0",l.a.createElement("b",null,"L\u1ea5y token"),l.a.createElement("br",null),l.a.createElement("br",null),"B\u1ea1n ch\u01b0a c\xf3 token ho\u1eb7c token \u0111\xe3 b\u1ecb h\u1ebft h\u1ea1n. H\xe3y l\xe0m theo h\u01b0\u1edbng d\u1eabn n\xe0y \u0111\u1ec3 l\u1ea5y token: ",l.a.createElement("a",{href:"https://blog.ngxson.com/tonghopevent/#lay-token",target:"_blank",rel:"noopener noreferrer"},"[B\u1ea5m v\xe0o \u0111\xe2y]"),l.a.createElement("br",null),"L\u01b0u \xfd: token s\u1ebd \u0111c l\u01b0u tr\xean m\xe1y n\xe0y. B\u1ea1n c\xf3 th\u1ec3 l\u1ea5y token t\u1eeb m\xe1y t\xednh \u0111\u1ec3 d\xf9ng tr\xean \u0110T.",l.a.createElement("br",null),"\u0110i\u1ec1n token c\u1ee7a b\u1ea1n v\xe0o \xf4 d\u01b0\u1edbi \u0111\xe2y:",l.a.createElement("br",null)),l.a.createElement(E.a,{multiline:!0,rowsMax:"5",value:this.state.access_token,onChange:e=>{this.setState({access_token:e.target.value})},margin:"normal",variant:"outlined",fullWidth:!0}),l.a.createElement("br",null),l.a.createElement(b.a,{variant:"outlined",onClick:this.onSaveToken.bind(this)},"Ti\u1ebfp t\u1ee5c")))}_renderMain(){return l.a.createElement(l.a.Fragment,null,this.state.showGetToken&&l.a.createElement("div",{style:Ae.cardStyle},this._renderGetTokenCard()),!this.state.showGetToken&&l.a.createElement("div",{style:Ae.cardStyle},this._renderTitleCard()),!this.state.showGetToken&&this.state.imgs.map((e,t)=>l.a.createElement("div",{style:Ae.cardStyle,key:t},this._renderImageCard(e))),l.a.createElement("br",null),l.a.createElement("br",null))}_renderError(){return l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h2",null,"C\xf3 l\u1ed7i x\u1ea3y ra"),this.state.error,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(b.a,{variant:"outlined",size:"small",onClick:()=>window.location.hash="#/"},"Tr\u1edf v\u1ec1"),l.a.createElement("br",null),l.a.createElement("br",null))}render(){const e=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null)));return this.state.loading?e:this.state.error?this._renderError():this._renderMain()}}var Le=He,je=(n(170),n(171),n(58)),$e=n(91),Me=n(126),Fe=n.n(Me);class Re extends l.a.Component{constructor(e){super(e),this.handleClickOK=()=>{this.state.onClickOK&&(this.state.onClickOK(),this.setState({onClickOK:null})),this.setState({open:!1})},this.handleCancel=()=>{this.setState({open:!1})},this.state={open:!1,onClickOK:null},window.showAlert=this.show.bind(this)}show(e){this.setState({open:!0,title:e.title,text:e.text,onClickOK:e.onClickOK||null,showCancel:e.showCancel})}render(){return l.a.createElement("div",null,l.a.createElement(X.a,{open:this.state.open,onClose:this.handleCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(q.a,{id:"alert-dialog-title"},this.state.title),l.a.createElement(Q.a,null,l.a.createElement(Y.a,{id:"alert-dialog-description"},this.state.text)),l.a.createElement(J.a,null,l.a.createElement(b.a,{onClick:this.handleClickOK.bind(this),color:"primary",autoFocus:!0},"OK"),this.state.showCancel?l.a.createElement(b.a,{onClick:this.handleCancel.bind(this),color:"primary",autoFocus:!0},"Cancel"):null)))}}var Ve=Re;class Ge extends l.a.Component{constructor(e){super(e),this.onEditPost=async()=>{const{message:e}=this.state,{post:t,onClose:n}=this.props;this.setState({loading:!0});const a=A.getLocalStorage("token");await y.a.patch(`${this.props.editPostEndpoint}/${t.id}?token=${a}`,{message:e}),n(!0)},console.log(e.post),this.state={title:e.post.message.split("\n")[0]||"",message:e.post.message,loading:!1}}render(){const{title:e,message:t,loading:n}=this.state,{post:a,onClose:r}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.a,{fullWidth:!0,open:!0,onClose:()=>r(!1),"aria-labelledby":"form-dialog-title"},n?l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(f.a,null),l.a.createElement("br",null),l.a.createElement("br",null)):l.a.createElement(l.a.Fragment,null,l.a.createElement(q.a,{id:"form-dialog-title"},"S\u1eeda b\xe0i vi\u1ebft"),l.a.createElement(Q.a,null,l.a.createElement(Y.a,null,"B\xe0i vi\u1ebft: ",e,l.a.createElement("br",null),"\u0110\u0103ng l\xfac: ",A.getTimeStr(a.time)," ng\xe0y ",A.getDateStr(a.time)),l.a.createElement(E.a,{multiline:!0,rowsMax:"20",value:t,onChange:e=>{this.setState({message:e.target.value})},margin:"normal",variant:"outlined",fullWidth:!0})),l.a.createElement(J.a,null,l.a.createElement(b.a,{onClick:()=>r(!1),color:"primary"},"Quay l\u1ea1i"),l.a.createElement(b.a,{onClick:this.onEditPost,color:"primary"},"L\u01afU POST")))))}}var Ke=Ge;const We={cardStyle:{maxWidth:"800px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}},Ue={height:"300px",maxWidth:"100%"},ze=()=>l.a.createElement("div",{style:Ue},l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(f.a,null)));class qe extends l.a.Component{constructor(e){super(),this.processTimeField=e=>"created_time"===this.props.timeFieldName?e.map(e=>({...e,created_time:new Date(e.created_time).getTime()/1e3})):e,this.deletePost=e=>async()=>{if(window.confirm("B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn x\xf3a?")){this.setState({loading:!0});const t=A.getLocalStorage("token");await y.a.delete(`${this.props.deletePostEndpoint}/${e.id}?token=${t}`),this.loadData()}},this.openOnFB=e=>()=>{window.open("https://www.facebook.com/"+e.id,"_blank").focus()},this.onEditDialogClose=e=>{e?this.loadData():this.setState({editingPost:null})},this.props=e,this.state={loading:!0,posts:[],editingPost:null},window.changeHeader("B\xe0i \u0111\xe3 l\xean l\u1ecbch - TongHopEvent")}componentDidMount(){this.loadData()}async loadData(){const{newestFirst:e}=this.props;this.setState({loading:!0,editingPost:null});const t=A.getLocalStorage("token"),n=await y.a.get(`${this.props.loadFeedEndpoint}?token=${t}`);if(n.data.error)this.setState({loading:!1,posts:[]});else{const t=e?n.data:n.data.reverse();this.setState({loading:!1,posts:this.processTimeField(t)})}}_renderMainView(){const{timeFieldName:e}=this.props;return this.state.posts.map((t,n)=>{const a=t.from&&t.from.id!==j.SELF_PAGE_ID;return l.a.createElement("div",{style:We.cardStyle,key:t.id},l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("p",null,l.a.createElement("b",null,A.getTimeStr(1e3*t[e])," ng\xe0y ",A.getDateStr(1e3*t[e]))),l.a.createElement(ye.a,{alt:"",src:t.full_picture,style:Ue,loader:l.a.createElement(ze,null)}),a&&l.a.createElement("p",{style:{backgroundColor:"#eee",padding:"10px",fontWeight:"bold"},children:"(B\xe0i vi\u1ebft n\xe0y do \u0111\u1ed9c gi\u1ea3 \u0111\u0103ng l\xean page)"}),l.a.createElement("p",null,A.nl2br(t.expanded?t.message:t.message.substring(0,250)),l.a.createElement("br",null),l.a.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),this.setState({posts:this.state.posts.map((e,t)=>{const a=JSON.parse(JSON.stringify(e));return n===t&&(a.expanded=!a.expanded),a})})}},t.expanded?"Thu g\u1ecdn":"... \u0110\u1ecdc th\xeam"),l.a.createElement("br",null)),l.a.createElement("p",null,l.a.createElement(b.a,{color:"primary",variant:"outlined",onClick:this.deletePost(t)},"X\xf3a"),"\xa0\xa0",l.a.createElement(b.a,{color:"primary",variant:"outlined",onClick:()=>this.setState({editingPost:t}),disabled:a},"S\u1eeda"),"\xa0\xa0",l.a.createElement(b.a,{color:"primary",variant:"outlined",onClick:this.openOnFB(t)},"Xem tr\xean FB")))))})}_renderDocNotFound(){return l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),"(Kh\xf4ng c\xf3 d\u1eef li\u1ec7u)",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))}render(){const{editingPost:e,loading:t,posts:n}=this.state,a=l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement(f.a,null)));return l.a.createElement(l.a.Fragment,null,e&&l.a.createElement(Ke,{post:e,onClose:this.onEditDialogClose,editPostEndpoint:this.props.editPostEndpoint}),t?a:n.length>0?this._renderMainView():this._renderDocNotFound())}}var Xe=qe;var Je=()=>l.a.createElement(Xe,{loadFeedEndpoint:j.BACKEND+"/publish/scheduled",editPostEndpoint:j.BACKEND+"/publish/post",deletePostEndpoint:j.BACKEND+"/publish/post",timeFieldName:"scheduled_publish_time",newestFirst:!1});var Qe=()=>l.a.createElement(Xe,{loadFeedEndpoint:j.BACKEND+"/fbfeed",editPostEndpoint:j.BACKEND+"/fbfeed",deletePostEndpoint:j.BACKEND+"/fbfeed",timeFieldName:"created_time",newestFirst:!0}),Ye=n(5584),Ze=n(5585);const et={cardStyle:{maxWidth:"800px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}};class tt extends l.a.Component{constructor(...e){super(...e),this.state={...A.settings},this.saveSettings=()=>{A.setSettings({...this.state}),window.toastr.success("\u0110\xe3 l\u01b0u c\xe0i \u0111\u1eb7t")}}render(){const{markReadOnOpenInbox:e}=this.state;return l.a.createElement("div",{style:et.cardStyle},l.a.createElement(u.a,null,l.a.createElement(g.a,null,l.a.createElement("p",null,l.a.createElement("h2",null,"C\xe0i \u0111\u1eb7t"),l.a.createElement("br",null),"L\u01b0u \xfd: C\xe1c c\xe0i \u0111\u1eb7t sau s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\xean tr\xecnh duy\u1ec7t n\xe0y. N\u1ebfu b\u1ea1n \u0111\u1ed5i thi\u1ebft b\u1ecb kh\xe1c, b\u1ea1n c\u1ea7n ch\u1ec9nh l\u1ea1i cho thi\u1ebft b\u1ecb \u0111\xf3."),l.a.createElement(Ye.a,{control:l.a.createElement(Ze.a,{checked:e,onChange:()=>this.setState({markReadOnOpenInbox:!e}),color:"primary"}),label:'\u0110\xe1nh d\u1ea5u "\u0111\xe3 \u0111\u1ecdc" khi b\u1ea5m v\xe0o \u0111\u1ecdc inbox'}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(b.a,{variant:"outlined",onClick:this.saveSettings},"L\u01b0u c\xe0i \u0111\u1eb7t"))))}}var nt=tt,at=n(15),lt=n(217);class rt{static getSocket(){return j.SOCKETIO?(rt.socket||(rt.socket=Object(lt.a)(j.SOCKETIO,{transports:["websocket"],query:`module=${j.SOCKETIO_MODULE}&token=${A.getToken()}`}),rt.socket.on("connect",()=>console.log("connected"))),rt.socket):null}static subscribeInbox(e){const t=rt.getSocket();t&&t.on("inbox",e)}static unsubscribeInbox(e){const t=rt.getSocket();t&&t.offAny(e)}}rt.socket=null;const it=(e,t,n={},a={})=>new Promise(l=>{j.PROD||console.log(e,t,n,a);const r=rt.getSocket(),i=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),o=e=>{r.offAny(o),l(e)};r.on(i,o),r.emit(`${e.toLowerCase()} ${t.replace(/\/$/,"")}`,{requestId:i,query:n,body:a})});var ot=rt;const st=l.a.createContext();class ct extends l.a.Component{constructor(...e){super(...e),this.state={unreadMark:{}},this.fetchUnread=async()=>{const e=await it("get","/unread"),t={};for(const{id:n}of e)t[n]=!0;this.setState({unreadMark:t})},this.markUnread=e=>{ot.getSocket().emit("mark_unread",e);const t={...this.state.unreadMark};t[e]=!0,this.setState({unreadMark:t})},this.markRead=e=>{ot.getSocket().emit("mark_read",e);const t={...this.state.unreadMark};delete t[e],this.setState({unreadMark:t})}}componentDidMount(){j.INBOX_UNREAD_ABILITY&&this.fetchUnread()}render(){return l.a.createElement(st.Provider,{value:{unreadMark:this.state.unreadMark,markUnread:this.markUnread,markRead:this.markRead}},this.props.children)}}function mt(e){return function(t){return l.a.createElement(st.Consumer,null,n=>l.a.createElement(e,Object.assign({},t,n)))}}class ht extends l.a.Component{constructor(...e){super(...e),this.state={ready:!1,loading:!1,conversations:[],next:null},this.openConversation=(e,t)=>()=>{const n=O(t.toLowerCase()).replace(/[^a-z0-9]+/g,"-");window.location.hash=`#/msg/${e}/${n}`},this.inboxUpdateHandler=async e=>{const{data:t}=await it("get","/conversations",{limit:5});this.setState(e=>({conversations:N(e.conversations,t)}))},this.onYReachEnd=()=>{this.state.next&&!this.state.loading&&this.loadMoreConversations()}}componentDidMount(){this.loadMoreConversations(),ot.subscribeInbox(this.inboxUpdateHandler)}componentWillUnmount(){ot.unsubscribeInbox(this.inboxUpdateHandler)}async loadMoreConversations(){if(!this.state.loading){var e;this.setState({loading:!0});const t={};this.state.next&&(t.after=this.state.next);let{data:n,paging:a}=await it("get","/conversations",t);j.PROD&&(n=n.filter(e=>e.id!==j.INBOX_IGNORED_CONVERSATION)),n&&this.setState({conversations:[...this.state.conversations,...n],loading:!1,ready:!0,next:(null===a||void 0===a?void 0:a.next)?null===a||void 0===a||null===(e=a.cursors)||void 0===e?void 0:e.after:null})}}render(){const{unreadMark:e}=this.props;return l.a.createElement(at.g,{loading:!this.state.ready,loadingMore:this.state.ready&&this.state.loading,onYReachEnd:this.onYReachEnd},this.state.conversations.map(t=>{const n=t.senders.data[0].name,a=_(t);return l.a.createElement(at.e,{key:t.id,name:`${n} (${t.message_count})`,info:t.snippet,onClick:this.openConversation(t.id,n),active:this.props.tid===t.id,unreadDot:!!e[a]})}))}}var dt=mt(ht),ut=n(5592),pt=n(208),gt=(n(5511),n(17)),Et=n(207),bt=n(206);const ft=mt(({psid:e,unreadMark:t,markRead:n,markUnread:a})=>l.a.createElement(at.c,{className:"cs-button cs-button--info",style:{marginRight:"20px"},icon:l.a.createElement(gt.a,{icon:t[e]?bt.faEnvelopeOpenText:Et.faEnvelope}),onClick:()=>{t[e]?n(e):a(e)}}));var vt=({loading:e,profile:t,openConversationOnFB:n,openMainMenu:a,psid:r})=>e?l.a.createElement(at.f,null,l.a.createElement(at.f.Back,{onClick:a}),l.a.createElement(at.f.Content,{userName:"Loading..."})):l.a.createElement(at.f,null,l.a.createElement(at.f.Back,{onClick:a}),l.a.createElement(at.b,{src:t.profile_pic,name:t.name,onClick:n}),l.a.createElement(at.f.Content,{userName:t.name}),l.a.createElement(at.f.Actions,null,j.INBOX_UNREAD_ABILITY&&l.a.createElement(ft,{as:"InfoButton",psid:r}),l.a.createElement(at.h,{onClick:n}))),yt=n(3),kt=n.n(yt),wt=n(8),Ct=n.n(wt),xt=n(218);const Dt=()=>{};const St=function(){class e extends a.Component{render(){const{props:{fancyScroll:e,children:t,forwardedRef:n,...a}}=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",Object.assign({ref:n},a),t))}}return l.a.forwardRef((t,n)=>l.a.createElement(e,Object.assign({forwardedRef:n},t)))}(),Tt=(e,t)=>{const n="undefined"!==typeof e?e:t,[l,r]=Object(a.useState)(n);return["undefined"!==typeof e?e:l,e=>{r(e)}]};function Nt({value:e,onSend:t,onChange:n,autoFocus:r,placeholder:i,fancyScroll:o,className:s,activateAfterChange:c,disabled:m,sendDisabled:h,sendOnReturnDisabled:d,attachDisabled:u,sendButton:p,attachButton:g,onAttachClick:E,...b},f){const v=Object(a.useRef)(),y=Object(a.useRef)(),[k,w]=Tt(e,""),[C,x]=Tt(h,!0),D=()=>{"undefined"!==typeof y.current&&y.current.focus()};Object(a.useImperativeHandle)(f,()=>({focus:D})),Object(a.useEffect)(()=>{!0===r&&D()},[r]),Object(a.useEffect)(()=>{"function"===typeof v.current.updateScroll&&v.current.updateScroll()});const S=()=>{k.length>0&&t()},T="cs-message-input",N="string"===typeof i?i:"";return l.a.createElement("div",Object.assign({},b,{className:Ct()(T,{[T+"--disabled"]:m},s)}),!0===g&&l.a.createElement("div",{className:T+"__tools"},l.a.createElement(at.a,{onClick:E,disabled:!0===m||!0===u})),l.a.createElement("div",{className:T+"__content-editor-wrapper"},l.a.createElement(St,{fancyScroll:o,ref:v,className:T+"__content-editor-container"},l.a.createElement(xt.a,{ref:y,className:T+"__content-editor",disabled:m,placeholder:N,onKeyPress:e=>{"Enter"===e.key&&!1===e.shiftKey&&!1===d&&(e.preventDefault(),S())},onChange:e=>{w(e.target.value),n(e.target.value)},value:k,maxRows:5,minRows:1}))),!0===p&&l.a.createElement("div",{className:T+"__tools"},l.a.createElement(at.l,{onClick:S,disabled:!0===m||!0===C})))}const _t=Object(a.forwardRef)(Nt);_t.displayName="MessageInput",_t.propTypes={value:kt.a.string,placeholder:kt.a.string,disabled:kt.a.bool,sendOnReturnDisabled:kt.a.bool,sendDisabled:kt.a.bool,fancyScroll:kt.a.bool,activateAfterChange:kt.a.bool,autoFocus:kt.a.bool,onChange:kt.a.func,onSend:kt.a.func,className:kt.a.string,sendButton:kt.a.bool,attachButton:kt.a.bool,attachDisabled:kt.a.bool,onAttachClick:kt.a.func},_t.defaultProps={value:void 0,placeholder:"",disabled:!1,sendOnReturnDisabled:!1,fancyScroll:!0,activateAfterChange:!1,autoFocus:!1,sendButton:!0,attachButton:!0,attachDisabled:!1,onAttachClick:Dt,onChange:Dt,onSend:Dt},Nt.defaultProps=_t.defaultProps;var Ot=_t;ut.a.addLocale(pt);const It=new ut.a("en-US");class Bt extends l.a.Component{constructor(...e){super(...e),this.state={loading:!0,loadingMore:!1,psid:null,profile:{},threadInfo:{},messages:[],messageAfter:null,messagePending:null,messagePendingId:null,input:""},this.originalTitle=document.title,this.inboxUpdateHandler=async e=>{var t;const{psid:n,messagePendingId:a}=this.state,l=this.props.tid;if(_(e)===n){const{data:e}=await it("get","/thread/messages",{tid:l,limit:5});this.setState(t=>({messages:T(t.messages,e)}))}(null===(t=e.message)||void 0===t?void 0:t.mid)===a&&this.setState({messagePending:null,messagePendingId:null})},this.onYReachStart=async()=>{const{messageAfter:e,loadingMore:t}=this.state;if(e&&!t){this.setState({loadingMore:!0});const t=await it("get","/thread/messages",{tid:this.props.tid,after:e});this.setState(e=>{var n,a,l;return{messages:t.data.reverse().concat(e.messages),messageAfter:(null===(n=t.paging)||void 0===n?void 0:n.next)?null===(a=t.paging)||void 0===a||null===(l=a.cursors)||void 0===l?void 0:l.after:null,loadingMore:!1}})}},this.openConversationOnFB=()=>{window.open("https://fb.com"+this.state.threadInfo.link,"_blank")},this.openInNewTab=e=>()=>{window.open(e,"_blank")},this.openMainMenu=()=>{const{goBackTo:e}=this.props;window.location.hash=e||"#/msg"},this.handleSendMessage=async()=>{const{psid:e,input:t}=this.state,{markRead:n}=this.props,a=t.trim();this.setState({messagePending:a,input:""});try{const{message_id:t}=await P("post","/inbox/messages",{},{messaging_type:"MESSAGE_TAG",tag:"HUMAN_AGENT",recipient:{id:e},message:{text:a}});n(e),this.setState({messagePendingId:t})}catch(l){this.setState({messagePending:null,input:a}),window.alert(JSON.stringify(l.response.data))}}}componentDidMount(){this.fetchConversation(this.props.tid),ot.subscribeInbox(this.inboxUpdateHandler),window.setMessageInput=e=>this.setState({input:e})}componentDidUpdate(e,t){e.tid!==this.props.tid&&this.fetchConversation(this.props.tid),this.state.psid&&this.state.psid!==t.psid&&j.INBOX_MARK_READ_ON_OPEN&&this.props.markRead(this.state.psid)}componentWillUnmount(){document.title=this.originalTitle,ot.unsubscribeInbox(this.inboxUpdateHandler)}async fetchConversation(e){var t,n,a;document.title=j.INBOX_TITLE,this.setState({loading:!0});const[l,r]=await Promise.all([it("get","/thread/info",{tid:e}),it("get","/thread/messages",{tid:e})]);r.data=r.data.reverse();const i=l.senders.data[0].id,o=await it("get","/profile",{psid:i});this.setState({threadInfo:l,psid:i,profile:o,messages:r.data,messageAfter:(null===(t=r.paging)||void 0===t?void 0:t.next)?null===(n=r.paging)||void 0===n||null===(a=n.cursors)||void 0===a?void 0:a.after:null,loading:!1}),document.title=`${o.name} - ${j.INBOX_TITLE}`}_renderMessages(){const{loading:e,messages:t,messagePending:n,loadingMore:a}=this.state;if(e)return l.a.createElement(at.k,{loading:!0});let r="";const i=e=>{const t=S(e);return r!==t?(r=t,l.a.createElement(at.j.Footer,{sender:It.format(new Date(e.created_time))})):null},o=(e,t)=>t.map((t,n)=>l.a.createElement(at.j,{key:e.id+n,type:"image",model:{direction:S(e),type:"custom"}},i(e),l.a.createElement(at.j.CustomContent,null,l.a.createElement("img",{src:t.preview_url,alt:"",onClick:this.openInNewTab(t.url),style:{width:"200px"}}))));return l.a.createElement(at.k,{loadingMore:a,onYReachStart:this.onYReachStart},t.map(e=>{const t=(e=>{var t;return((null===(t=e.attachments)||void 0===t?void 0:t.data)||[]).filter(e=>!!e.image_data).map(e=>e.image_data)})(e);return t.length>0?l.a.createElement(l.a.Fragment,null,o(e,t)):(e=>l.a.createElement(at.j,{key:e.id,model:{message:e.message,sentTime:It.format(new Date(e.created_time)),sender:e.from.name,direction:S(e),position:"single"}},i(e)))(e)}),n&&l.a.createElement(at.j,{model:{message:n,sender:j.INBOX_TITLE,direction:"outgoing",position:"single"},className:"pending"}),!j.INBOX_SEND_ABILITY&&l.a.createElement(at.j,{style:{marginBottom:"2em",opacity:"0"}}))}_renderInput(){const{input:e,messagePending:t}=this.state;return l.a.createElement(Ot,{as:"MessageInput",value:e,onChange:e=>this.setState({input:e}),onSend:this.handleSendMessage,disabled:!!t,sendDisabled:!!t&&e.length>0,sendOnReturnDisabled:!0,onAttachClick:window.openTemplateDialog,placeholder:"Type here..."})}render(){const{loading:e,profile:t,psid:n}=this.state;return l.a.createElement(at.d,null,l.a.createElement(vt,{as:"ConversationHeader",loading:e,profile:t,psid:n,openConversationOnFB:this.openConversationOnFB,openMainMenu:this.openMainMenu}),this._renderMessages(),j.INBOX_SEND_ABILITY&&this._renderInput())}}var Pt=mt(Bt);n(5512);class At extends l.a.Component{constructor(...e){super(...e),this.state={tid:null,viewHeight:"100vh"},this.updateHeight=()=>{window.NUI_VIEW_HEIGHT&&this.state.viewHeight!==window.NUI_VIEW_HEIGHT&&this.setState({viewHeight:window.NUI_VIEW_HEIGHT})},this.MessageView=()=>{const{tid:e,viewHeight:t}=this.state,{goBackTo:n}=this.props;return l.a.createElement("div",{style:{position:"relative",height:t},className:e?"chat":"home"},l.a.createElement(at.i,null,l.a.createElement(at.m,{position:"left",scrollable:!0},l.a.createElement(dt,{tid:e})),e?l.a.createElement(Pt,{tid:e,goBackTo:n}):l.a.createElement(at.d,null)),l.a.createElement(j.CustomMessengerWidget,null))},this.MessageTidChanged=({match:e})=>(e.params.tid!==this.state.tid&&this.setState({tid:e.params.tid}),null),this.MessageTidReset=()=>(null!==this.state.tid&&this.setState({tid:null}),null)}componentDidMount(){this.intervalId=setInterval(this.updateHeight,1e3)}componentWillUnmount(){clearInterval(this.intervalId)}render(){return l.a.createElement($e.a,null,l.a.createElement(ct,null,l.a.createElement(je.a,{path:"/msg",component:this.MessageView}),l.a.createElement(je.a,{exact:!0,path:"/msg",component:this.MessageTidReset}),l.a.createElement(je.a,{exact:!0,path:"/msg/:tid/:name",component:this.MessageTidChanged})))}}var Ht=Object(je.f)(At),Lt=n(88),jt=n(5521);const $t=Object(jt.a)(e=>({root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - 240px) !important",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:0,[e.breakpoints.up("sm")]:{width:e.spacing(9)+1}},toolbar:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),...e.mixins.toolbar},content:{flexGrow:1}}));var Mt=n(5595),Ft=n(5587),Rt=n(5583),Vt=n(5586),Gt=n(5522),Kt=n(110),Wt=n.n(Kt),Ut=n(112),zt=n.n(Ut),qt=n(111),Xt=n.n(qt),Jt=n(5588),Qt=n(51);const Yt=[{list:[{title:"Inbox",href:"#/msg",icon:l.a.createElement(Qt.e,null)},{title:"Qu\u1ea3n l\xfd",href:"#/manage",icon:l.a.createElement(Qt.h,null)},{title:"B\xe0i \u0111\xe3 l\xean l\u1ecbch",href:"#/scheduled",icon:l.a.createElement(Qt.c,null)},{title:"B\xe0i \u0111\xe3 \u0111\u0103ng",href:"#/fbfeed",icon:l.a.createElement(Qt.g,null)}]},{separator:!0},{list:[{title:"H\u01b0\u1edbng d\u1eabn",href:"https://blog.ngxson.com/tonghopevent/",icon:l.a.createElement(Qt.f,null)},{title:"\u0110i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",href:"https://sites.google.com/view/tonghopevent/",icon:l.a.createElement(Qt.b,null)}]},{separator:!0},{list:[{title:"T\xf9y ch\u1ec9nh",href:"#/settings",icon:l.a.createElement(Qt.i,null)},{title:"\u0110\u0103ng xu\u1ea5t",href:"#/logout",icon:l.a.createElement(Qt.d,null)}]},{list:[{title:"T\u1ed5ng h\u1ee3p c\xe1c d\u1ef1 \xe1n v\xe0 cu\u1ed9c thi",href:"#/",icon:null},{title:"\u0110\u0103ng b\xe0i (L\u1ea5y \u1ea3nh)",href:"#/getimage",icon:null},{title:"\u0110\u0103ng b\xe0i",href:"#/publish",icon:null},{title:"Xem b\xe0i vi\u1ebft",href:"#/view",icon:null}],hidden:!0}];var Zt=Object(je.f)((function({children:e,location:{pathname:t}}){const n=$t(),a=Object(Lt.a)(),[r,i]=l.a.useState(!1),o=(e=>{for(const{list:t}of Yt)if(t)for(const n of t)if(e.startsWith(n.href))return n;return null})("#"+t),s=t.match(/\/(view\/|login)/),c=e=>()=>{const{href:t}=e;t.startsWith("http")?window.open(t,"_blank").focus():window.location.href=t};return l.a.createElement("div",{className:n.root},l.a.createElement(Vt.a,null),l.a.createElement(Ft.a,{position:"fixed",style:{zIndex:r?80:100},className:`${n.appBar} ${r?n.appBarShift:""}`},l.a.createElement(Rt.a,null,!s&&l.a.createElement(Gt.a,{color:"inherit","aria-label":"open drawer",onClick:()=>{i(!0)},edge:"start",className:`${n.menuButton} ${r?n.hide:""}`},l.a.createElement(Wt.a,null)),l.a.createElement(p.a,{variant:"h6",noWrap:!0},o.title))),l.a.createElement(Mt.a,{style:{zIndex:90},variant:s?"temporary":"permanent",className:`${n.drawer} ${r?n.drawerOpen:n.drawerClose}`,classes:{paper:r?n.drawerOpen:n.drawerClose}},l.a.createElement("div",{className:n.toolbar},l.a.createElement(Gt.a,{onClick:()=>{i(!1)}},"rtl"===a.direction?l.a.createElement(Xt.a,null):l.a.createElement(zt.a,null))),l.a.createElement(G.a,null),Yt.map((e,t)=>e.list&&!e.hidden?l.a.createElement(ae.a,{key:t},e.list.map((e,t)=>l.a.createElement(le.a,{button:!0,selected:o.href===e.href,onClick:c(e),key:t},l.a.createElement(Jt.a,null,e.icon),l.a.createElement(re.a,{primary:e.title})))):e.separator?l.a.createElement(G.a,{key:t}):null)),l.a.createElement("main",{className:n.content},l.a.createElement("div",{className:n.toolbar}),e))}));var en=()=>{const e=Object(a.useRef)(null);return Object(a.useEffect)(()=>{e&&e.current&&setInterval(()=>{var t;(t=e.current)&&(window.NUI_VIEW_HEIGHT=t.clientHeight-64,window.NUI_VIEW_WIDTH=t.clientWidth)},1e3)},[e]),l.a.createElement("div",{ref:e,style:{position:"fixed",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none",zIndex:1e3}})};class tn extends l.a.Component{constructor(){super(),this.Home=()=>l.a.createElement(ge,{gotoPublish:this.gotoPublish.bind(this)}),this.View=({match:e})=>l.a.createElement(fe,{id:e.params.id}),this.Publish=()=>l.a.createElement(Ie,{data:this.state.publishData}),this.GetImage=()=>l.a.createElement(Le,{data:this.state.publishData,gotoPublish:this.gotoPublish.bind(this)}),this.Copyright=()=>l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),"Developed by\xa0",l.a.createElement("b",null,l.a.createElement("a",{href:"https://ngxson.com",target:"_blank",rel:"noopener noreferrer"},"Nui")),l.a.createElement("br",null),"Version ",j.VERSION,l.a.createElement("br",null),l.a.createElement("br",null)),this.Logout=()=>(A.removeLocalStorage("token"),window.location.href="#/",window.location.reload(),null),this.state={header:"Home",publishData:A.getLocalStorage("publishData")||null}}changeHeader(e){this.state.header!==e&&this.setState({header:e})}gotoPublish(e,t){this.setState({publishData:e}),A.setLocalStorage("publishData",e),window.location.hash="#/"+t}render(){return window.changeHeader=this.changeHeader.bind(this),l.a.createElement(l.a.Fragment,null,l.a.createElement(je.a,{path:"/manage",component:this.Home}),l.a.createElement(je.a,{path:"/login",component:M}),l.a.createElement(je.a,{path:"/view/:id",component:this.View}),l.a.createElement(je.a,{path:"/publish",component:this.Publish}),l.a.createElement(je.a,{path:"/getimage",component:this.GetImage}),l.a.createElement(je.a,{path:"/scheduled",component:Je}),l.a.createElement(je.a,{path:"/fbfeed",component:Qe}),l.a.createElement(je.a,{path:"/settings",component:nt}),l.a.createElement(je.a,{path:"/logout",component:this.Logout}),l.a.createElement(this.Copyright,null))}}const nn=()=>(window.location.href=A.getLocalStorage("token")?"#/msg":"#/login",null);var an=function(){return l.a.createElement($e.a,null,l.a.createElement(Fe.a,{theme:d},l.a.createElement(Zt,null,l.a.createElement("div",{className:"mainView"},l.a.createElement(je.c,null,l.a.createElement(je.a,{exact:!0,path:"/",component:nn}),l.a.createElement(je.a,{path:"/msg",component:Ht}),l.a.createElement(je.a,{component:tn}))),l.a.createElement(Ve,null)),l.a.createElement(en,null)))};class ln extends l.a.Component{render(){return l.a.createElement("div",{id:"gtco-features"},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center gtco-heading"},l.a.createElement("h2",null,"Xin ch\xe0o!"),l.a.createElement("p",null,"\u0110\u1ec3 thu\u1eadn ti\u1ec7n h\u01a1n trong vi\u1ec7c t\u1ed5ng h\u1ee3p th\xf4ng tin, sau \u0111\xe2y, b\u1ea1n s\u1ebd c\u1ea7n nh\xe2p th\xf4ng tin v\u1ec1 d\u1ef1 \xe1n, cu\u1ed9c thi hay s\u1ef1 ki\u1ec7n c\u1ea7n h\u1ed7 tr\u1ee3 truy\u1ec1n th\xf4ng. M\u1ed9t v\xe0i l\u01b0u \xfd cho b\u1ea1n:",l.a.createElement("br",null)))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("div",{className:"feature-left animate-box","data-animate-effect":"fadeInLeft"},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"icon-check"})),l.a.createElement("div",{className:"feature-copy"},l.a.createElement("h3",null,"NH\u1eacP TH\xd4NG TIN"),l.a.createElement("p",null,"H\xe3y ch\xfa \xfd nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 c\xe1c th\xf4ng tin c\xf3 trong form."))),l.a.createElement("div",{className:"feature-left animate-box","data-animate-effect":"fadeInLeft"},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"icon-check"})),l.a.createElement("div",{className:"feature-copy"},l.a.createElement("h3",null,"\u0110\u1ee2I DUY\u1ec6T"),l.a.createElement("p",null,"Admin s\u1ebd ph\xea duy\u1ec7t b\xe0i c\u1ee7a b\u1ea1n.",l.a.createElement("br",null),"B\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c th\xf4ng b\xe1o ngay sau khi b\xe0i \u0111\u0103ng \u0111\u01b0\u1ee3c \u0111\u1eb7t l\u1ecbch \u0111\u1ec3 \u0111\u0103ng l\xean page."))),l.a.createElement("div",{className:"feature-left animate-box","data-animate-effect":"fadeInLeft"},l.a.createElement("span",{className:"icon"},l.a.createElement("i",{className:"icon-check"})),l.a.createElement("div",{className:"feature-copy"},l.a.createElement("h3",null,"\u0110\u0102NG V\xc0O GI\u1edc V\xc0NG"),l.a.createElement("p",null,"B\xe0i c\u1ee7a b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c h\u1eb9n gi\u1edd \u0111\u1ec3 up v\xe0o khung gi\u1edd v\xe0ng (20h - 21h).",l.a.createElement("br",null),"V\xec v\u1eady n\u1ebfu ch\u01b0a th\u1ea5y b\xe0i c\u1ee7a b\u1ea1n ch\u01b0a \u0111\u01b0\u1ee3c \u0111\u0103ng ngay, ",l.a.createElement("b",null,"\u0111\u1eebng v\u1ed9i")," g\u1eedi l\u1ea1i b\xe0i cho ch\xfang m\xecnh nh\xe9!")))),l.a.createElement("div",{className:"col-md-12"},l.a.createElement("center",null,l.a.createElement("p",null,l.a.createElement("br",null),l.a.createElement("br",null),'B\u1eb1ng vi\u1ec7c b\u1ea5m n\xfat "Ti\u1ebfp t\u1ee5c", b\u1ea1n \u0111\u1ed3ng \xfd v\u1edbi c\xe1c ',l.a.createElement("a",{href:"https://sites.google.com/view/tonghopevent",target:"_blank",rel:"noopener noreferrer"},"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng")," c\u1ee7a fanpage"),l.a.createElement("a",{className:"btn btn-block btn-primary",href:"#/next"},"TI\u1ebeP T\u1ee4C \u279c"),l.a.createElement("br",null),"N\u1ebfu b\u1ea1n g\u1eb7p l\u1ed7i, h\xe3y th\xf4ng b\xe1o cho admin t\u1ea1i: ",l.a.createElement("a",{href:"https://m.me/tonghopevent",target:"_blank",rel:"noopener noreferrer"},"https://m.me/tonghopevent"),l.a.createElement("br",null))))))}}var rn=ln;class on extends l.a.Component{render(){return l.a.createElement("div",{id:"gtco-features"},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center gtco-heading"},l.a.createElement("h2",null,"H\u01b0\u1edbng d\u1eabn"),l.a.createElement("p",null,"\u0110\u1ec3 \u0111\u0103ng d\u1ef1 \xe1n, cu\u1ed9c thi l\xean fanpage, b\u1ea1n h\xe3y th\u1ef1c hi\u1ec7n theo h\u01b0\u1edbng d\u1eabn sau:",l.a.createElement("br",null),"B\u1ea1n h\xe3y inbox v\xe0o fanpage t\u1ea1i: ",l.a.createElement("a",{href:"https://m.me/tonghopevent",target:"_blank",rel:"noopener noreferrer"},"https://m.me/tonghopevent"),l.a.createElement("br",null),"Sau \u0111\xf3 b\u1ea5m v\xe0o n\xfat ",l.a.createElement("b",null,"\u0110\u0103ng d\u1ef1 \xe1n/cu\u1ed9c thi")," \u1edf menu nh\xe9!",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("small",null,"N\u1ebfu b\u1ea1n g\u1eb7p l\u1ed7i, h\xe3y th\xf4ng b\xe1o cho admin t\u1ea1i th\xf4ng qua inbox fanpage"))))))}}var sn=on;class cn extends l.a.Component{render(){return l.a.createElement("div",{id:"gtco-features"},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center gtco-heading"},l.a.createElement("h2",null,"H\u01b0\u1edbng d\u1eabn"),l.a.createElement("p",null,"B\u1ea1n d\xf9ng link t\u1edbi phi\xean b\u1ea3n c\u0169 c\u1ee7a fanpage",l.a.createElement("br",null),"H\xe3y b\u1ea5m n\xfat ",l.a.createElement("b",null,"\u0110\u0103ng d\u1ef1 \xe1n/cu\u1ed9c thi")," \u1edf trong menu inbox \u0111\u1ec3 nh\u1eadn link m\u1edbi nh\xe9!",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("small",null,"N\u1ebfu b\u1ea1n g\u1eb7p l\u1ed7i, h\xe3y th\xf4ng b\xe1o cho admin t\u1ea1i: ",l.a.createElement("a",{href:"https://m.me/tonghopevent",target:"_blank",rel:"noopener noreferrer"},"https://m.me/tonghopevent")))))))}}var mn=cn;class hn extends l.a.Component{constructor(e){super(e),this.psid=A.getPsid()}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{id:"gtco-header",className:"gtco-cover",role:"banner",style:{backgroundImage:"url(theme/images/img_bg_1.jpg"}},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center"},l.a.createElement("div",{className:"display-t"},l.a.createElement("div",{className:"display-tc animate-box","data-animate-effect":"fadeIn"},l.a.createElement("h1",null,"H\u1ed7 tr\u1ee3 truy\u1ec1n th\xf4ng"),l.a.createElement("h2",null,"Form \u0111i\u1ec1n th\xf4ng tin b\xe0i \u0111\u0103ng"))))))),"none"!==this.psid?l.a.createElement(rn,null):A.getParameterByName("psid")?l.a.createElement(mn,null):l.a.createElement(sn,null))}}var dn=hn;const un=(e,t)=>{const{cls:n}=e,a=`${A.getPsid()}${t?";"+t:""}`,l=encodeURIComponent;return`/form/?data=${l(a)}&cls=${l(n)}`};var pn=[e=>({type:"small",title:"B\u1ea1n mu\u1ed1n \u0111\u0103ng b\xe0i v\u1ec1",options:[{text:"D\u1ef1 \xe1n",subtitle:"Ho\u1ea1t \u0111\u1ed9ng ngo\u1ea1i kh\xf3a",value:"D\u1ef1 \xe1n"},{text:"Cu\u1ed9c thi",subtitle:"D\xe0nh cho HS, SV",value:"Cu\u1ed9c thi"},{text:"S\u1ef1 ki\u1ec7n",subtitle:"D\xe0nh cho HS, SV",value:"S\u1ef1 ki\u1ec7n"}],notice:"L\u01b0u \xfd: Fanpage kh\xf4ng nh\u1eadn \u0111\u0103ng b\xe0i v\u1ec1 tuy\u1ec3n d\u1ee5ng vi\u1ec7c l\xe0m.",next:t=>{let n={screen:1,type:t,cls:""};switch(t){case"D\u1ef1 \xe1n":n={screen:1,type:t,cls:"project"};break;case"Cu\u1ed9c thi":n={screen:1,type:t,cls:"contest"};break;case"S\u1ef1 ki\u1ec7n":n={screen:1,type:t,cls:"event"}}e.setState(n)}}),e=>({type:"long",title:l.a.createElement(l.a.Fragment,null,e.state.type," c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c ",l.a.createElement("b",null,"\u0111i\u1ec1u h\xe0nh b\u1edfi")),options:[{text:"M\u1ed9t nh\xf3m h\u1ecdc sinh, sinh vi\xean",subtitle:"Ho\u1ea1t \u0111\u1ed9ng phi l\u1ee3i nhu\u1eadn",value:"F1"},{text:"M\u1ed9t c\xe2u l\u1ea1c b\u1ed9 trong tr\u01b0\u1eddng h\u1ecdc",subtitle:"Ho\u1ea1t \u0111\u1ed9ng phi l\u1ee3i nhu\u1eadn",value:"F2"},{text:"M\u1ed9t tr\u01b0\u1eddng h\u1ecdc c\xf4ng l\u1eadp",subtitle:"VD: tr\u01b0\u1eddng THCS, THPT, \u0110H, Cao \u0111\u1eb3ng,...",value:"F3"},{text:"M\u1ed9t t\u1ed5 ch\u1ee9c phi l\u1ee3i nhu\u1eadn",subtitle:"VD: AIESEC, VOGE, SOTB,...",value:"F4"},{text:"T\u1ed5 ch\u1ee9c ho\u1ea1t \u0111\u1ed9ng c\xf3 l\u1ee3i nhu\u1eadn",subtitle:"VD: trung t\xe2m ngo\u1ea1i ng\u1eef, c\u1eeda h\xe0ng,...",value:"P1"}],next:t=>{"P1"===t?e.setState({screen:2}):window.location.replace(un(e.state,t))}}),e=>({type:"basic",title:l.a.createElement(l.a.Fragment,null,"D\u1ef1a theo ",l.a.createElement("a",{href:"https://sites.google.com/view/tonghopevent",target:"_blank",rel:"noopener noreferrer"},"\u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng")," c\u1ee7a ch\xfang m\xecnh, ",e.state.type.toLowerCase()," \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c ho\u1eb7c \u0111\u01b0\u1ee3c \u0111i\u1ec1u h\xe0nh b\u1edfi m\u1ed9t ho\u1eb7c nhi\u1ec1u doanh nghi\u1ec7p, t\u1ed5 ch\u1ee9c hay c\xe1 nh\xe2n ",l.a.createElement("b",null,"ho\u1ea1t \u0111\u1ed9ng c\xf3 l\u1ee3i nhu\u1eadn")," ph\u1ea3i tr\u1ea3 ph\xed theo ",l.a.createElement("b",null,"G\xf3i P1"),l.a.createElement("br",null),l.a.createElement("br",null),"G\xf3i P1 c\xf3 gi\xe1 l\xe0 100.000 VN\u0110 / 1 b\xe0i \u0111\u0103ng [",l.a.createElement("a",{href:"https://sites.google.com/view/tonghopevent/g\xf3i-p1",target:"_blank",rel:"noopener noreferrer"},"B\u1ea5m \u0111\xe2y \u0111\u1ec3 xem chi ti\u1ebft"),"]",l.a.createElement("br",null),l.a.createElement("br",null),"\u0110\u1ec3 ti\u1ebfp t\u1ee5c, b\u1ea1n h\xe3y nh\u1eadp th\xf4ng tin v\xe0o form sau: \xa0",l.a.createElement("button",{className:"btn btn-small btn-primary",style:{padding:"4px"},onClick:()=>{window.location.replace(un(e.state,"P1"))}},"T\u1edbi Form \u279c"),l.a.createElement("br",null),"Sau \u0111\xf3, h\u01b0\u1edbng d\u1eabn thanh to\xe1n s\u1ebd \u0111\u01b0\u1ee3c g\u1eedi t\u1edbi inbox c\u1ee7a b\u1ea1n.")})];class gn extends l.a.Component{constructor(e){super(e);const t=A.getPsid();this.psid="none"!==t?t:null,this.state={screen:0,tag:null}}getFormUrl(e){const t=`${this.psid}${e?";"+e:""}`;return A.getFormUrl(t,this.state.tag)}componentDidMount(){setTimeout(window.scrollToTop,50)}_renderSmallBtn(e){return e.options.map((t,n)=>l.a.createElement("button",{key:t.value+n,className:"btn btn-default btn-proj-cate",onClick:()=>e.next(t.value)},t.text))}_renderLargeBtn(e){return e.options.map((t,n)=>l.a.createElement("button",{key:t.value+n,className:"btn btn-default btn-proj-type",onClick:()=>e.next(t.value)},l.a.createElement("b",null,t.text),l.a.createElement("br",null),l.a.createElement("small",null,t.subtitle)))}render(){const e=pn[this.state.screen](this);return l.a.createElement("div",{id:"gtco-features"},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2 text-center gtco-heading"},l.a.createElement("h2",null,"Th\xf4ng tin chung"),l.a.createElement("p",null,e.title),"basic"!==e.type&&l.a.createElement("p",null,"small"===e.type?this._renderSmallBtn(e):this._renderLargeBtn(e)),e.notice&&l.a.createElement("p",{style:{fontSize:"0.8em"}},e.notice)))))}}var En=gn;var bn=function(){return l.a.createElement("footer",{id:"gtco-footer",role:"contentinfo"},l.a.createElement("div",{className:"gtco-container"},l.a.createElement("div",{className:"row copyright"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("p",{className:"pull-left"},l.a.createElement("small",{className:"block"},"L\u1eadp tr\xecnh b\u1edfi ",l.a.createElement("a",{rel:"noopener noreferrer",href:"https://ngxson.com",target:"_blank"},"Nui")),l.a.createElement("small",{className:"block"},"Theme by ",l.a.createElement("a",{rel:"noopener noreferrer",href:"http://gettemplates.co/",target:"_blank"},"GetTemplates.co"))),l.a.createElement("div",{className:"pull-right"},l.a.createElement("ul",{className:"gtco-social-icons pull-right"},l.a.createElement("li",null,l.a.createElement("a",{href:"https://www.facebook.com/tonghopevent/"},l.a.createElement("i",{className:"icon-facebook"})))))))))};n(5514);class fn extends l.a.Component{constructor(){super(),this.Home=()=>l.a.createElement(dn,null),this.Quiz=()=>l.a.createElement(En,null),this.state={}}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(je.a,{exact:!0,path:"/",component:this.Home}),l.a.createElement(je.a,{path:"/next",component:this.Quiz}),l.a.createElement(bn,null))}}var vn=function(){return l.a.createElement($e.a,null,l.a.createElement(fn,null))},yn=(n(5515),n(5594)),kn=n(5570),wn=n(5589),Cn=n(210),xn=n(94),Dn=n(145),Sn=n(211),Tn=n.n(Sn);const Nn=Object(Cn.a)({apiKey:"AIzaSyClx2o-nDz6lLhzH_p5T_zmwHEQESnFTlk",authDomain:"chatbotcnh.firebaseapp.com",databaseURL:"https://chatbotcnh.firebaseio.com",projectId:"chatbotcnh",storageBucket:"chatbotcnh.appspot.com",messagingSenderId:"344360709927",appId:"1:344360709927:web:e4b99ee1dd466c0b9a8302"}),_n=Object(xn.c)(Nn),On=Object(Dn.a)();Object(Dn.b)(On,"tonghopevent@ngxson.com","tonghopevent").then(e=>{const t=e.user;console.log(t)}).catch(e=>{const t=e.code,n=e.message;console.error(t,n)});const In=({value:e,onChange:t})=>{const[n,r]=Object(a.useState)(!1),[i,o]=Object(a.useState)(null);return n?l.a.createElement(f.a,null):e?l.a.createElement("div",null,l.a.createElement("img",{src:e,alt:"user uploaded",className:"preview"}),l.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:()=>{i&&Object(xn.a)(i),t(null)}},"X\xf3a \u1ea3nh")):l.a.createElement(b.a,{component:"label",variant:"outlined",color:"primary"},l.a.createElement(Qt.a,{style:{marginRight:"5px"}})," T\u1ea3i \u1ea3nh l\xean",l.a.createElement("input",{type:"file",accept:"image/png, image/gif, image/jpeg",onChange:async e=>{let n=e.target.files[0],a="jpg";const l=n.type;"image/jpeg"===l&&(a="jpg"),"image/gif"===l&&(a="gif"),"image/png"===l&&(a="png");try{n=await(e=>new Promise((t,n)=>{try{Tn.a.imageFileResizer(e,1e3,1e3,"JPEG",75,0,e=>t(e),"file")}catch(a){n(a)}}))(n),a="jpg"}catch(s){}if(n.size>5242880)return void alert("L\u1ed7i: file qu\xe1 l\u1edbn. H\xe3y th\u1eed gi\u1ea3m \u0111\u1ed9 ph\xe2n gi\u1ea3i \u1ea3nh xu\u1ed1ng v\xe0 s\u1eed d\u1ee5ng \u0111\u1ecbnh d\u1ea1ng JPG.");r(!0);const i=Object(xn.d)(_n,`tonghopevent/images/${Date.now()}.${a}`);try{const e=await Object(xn.e)(i,n),a=(await Object(xn.b)(e.ref)).replace(/&token=[A-Za-z0-9\-]+/,"");console.log(a),t(a)}catch(s){alert(s)}o(i),r(!1)},hidden:!0}))},Bn={input:{width:"500px",maxWidth:"100%",marginBottom:"0.1em"},container:{display:"flex",flexWrap:"wrap"},cardStyle:{maxWidth:"700px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}},Pn=({title:e,subtitle:t,required:n,children:a,error:r})=>l.a.createElement(u.a,{style:Bn.cardStyle},l.a.createElement(g.a,null,l.a.createElement(p.a,{variant:"h6",component:"h6",gutterBottom:!0},e,n&&l.a.createElement("span",{className:"required"}," *")),r&&l.a.createElement("p",{className:"error"},r),l.a.createElement(p.a,{variant:"body1",component:"small",color:"textSecondary"},t),l.a.createElement(kn.a,{component:"fieldset"},a))),An=({value:e,title:t,subtitle:n,required:a,placeholder:r,onChange:i,error:o})=>l.a.createElement(Pn,{title:t,subtitle:n,required:a,error:o},l.a.createElement(E.a,{type:"text",value:e,style:Bn.input,onChange:e=>i(e.target.value),margin:"normal",autoComplete:"false",placeholder:r,variant:"outlined"})),Hn=({value:e,title:t,subtitle:n,required:a,placeholder:r,onChange:i,error:o,rows:s=10})=>l.a.createElement(Pn,{title:t,subtitle:n,required:a,error:o},l.a.createElement(E.a,{type:"text",value:e,style:{...Bn.input,width:"100%"},onChange:e=>i(e.target.value),margin:"normal",autoComplete:"false",placeholder:r,variant:"outlined",multiline:!0,rows:s,fullWidth:!0})),Ln=({value:e={},title:t,subtitle:n,placeholder:a,required:r,onChange:i,error:o,moreLabel:s})=>l.a.createElement(Pn,{title:t,subtitle:n,required:r,error:o},l.a.createElement(wn.a,null,Object.keys(e).map(t=>"other"!==t?l.a.createElement(Ye.a,{key:t,control:l.a.createElement(yn.a,{checked:e[t],onChange:()=>i({...e,[t]:!e[t]})}),label:t}):null),void 0!==e.other&&l.a.createElement(E.a,{label:s,type:"text",value:e.other||"",style:Bn.input,onChange:t=>i({...e,other:t.target.value}),margin:"normal",autoComplete:"false",placeholder:a,variant:"outlined"}))),jn=({value:e={},title:t,subtitle:n,required:a,onChange:r,error:i})=>l.a.createElement(Pn,{title:t,subtitle:n,required:a,error:i},l.a.createElement(wn.a,{className:"multiple-checkboxes-limited-height"},l.a.createElement("div",null,Object.keys(e).map(t=>l.a.createElement(Ye.a,{key:t,control:l.a.createElement(yn.a,{checked:e[t],onChange:()=>r({...e,[t]:!e[t]})}),label:t}))))),$n=({value:e,title:t,subtitle:n,required:a,onChange:r,error:i})=>l.a.createElement(Pn,{title:t,subtitle:n,required:a,error:i},l.a.createElement(In,{value:e,onChange:r})),Mn=({value:e=null,title:t,subtitle:n,required:a,onChange:r,error:i})=>{const o=e=>()=>r(e);return l.a.createElement(Pn,{title:t,subtitle:n,required:a,error:i},l.a.createElement("div",{className:"yes-or-no"},l.a.createElement(b.a,{variant:!0===e?"contained":"outlined",color:"primary",onClick:o(!0)},"C\xf3"),"   ",l.a.createElement(b.a,{variant:!1===e?"contained":"outlined",color:"primary",onClick:o(!1)},"Kh\xf4ng")))},Fn=["To\xe0n qu\u1ed1c","H\xe0 N\u1ed9i","TP HCM","An Giang","B\xe0 R\u1ecba V\u0169ng T\xe0u","B\u1ea1c Li\xeau","B\u1eafc K\u1ea1n","B\u1eafc Giang","B\u1eafc Ninh","B\u1ebfn Tre","B\xecnh D\u01b0\u01a1ng","B\xecnh \u0110\u1ecbnh","B\xecnh Ph\u01b0\u1edbc","B\xecnh Thu\u1eadn","C\xe0 Mau","Cao B\u1eb1ng","C\u1ea7n Th\u01a1","\u0110\xe0 N\u1eb5ng","\u0110\u1eafk L\u1eafk","\u0110\u1eafk N\xf4ng","\u0110\u1ed3ng Nai","\u0110\u1ed3ng Th\xe1p","\u0110i\u1ec7n Bi\xean","Gia Lai","H\xe0 Giang","H\xe0 Nam","H\xe0 T\u0129nh","H\u1ea3i D\u01b0\u01a1ng","H\u1ea3i Ph\xf2ng","H\xf2a B\xecnh","H\u1eadu Giang","H\u01b0ng Y\xean","Kh\xe1nh H\xf2a","Ki\xean Giang","Kon Tum","Lai Ch\xe2u","L\xe0o Cai","L\u1ea1ng S\u01a1n","L\xe2m \u0110\u1ed3ng","Long An","Nam \u0110\u1ecbnh","Ngh\u1ec7 An","Ninh B\xecnh","Ninh Thu\u1eadn","Ph\xfa Th\u1ecd","Ph\xfa Y\xean","Qu\u1ea3ng B\xecnh","Qu\u1ea3ng Nam","Qu\u1ea3ng Ng\xe3i","Qu\u1ea3ng Ninh","Qu\u1ea3ng Tr\u1ecb","S\xf3c Tr\u0103ng","S\u01a1n La","T\xe2y Ninh","Th\xe1i B\xecnh","Th\xe1i Nguy\xean","Thanh H\xf3a","Th\u1eeba Thi\xean Hu\u1ebf","Ti\u1ec1n Giang","Tr\xe0 Vinh","Tuy\xean Quang","V\u0129nh Long","V\u0129nh Ph\xfac","Y\xean B\xe1i"],Rn=[{element:e=>l.a.createElement($n,Object.assign({title:"\u1ea2nh cho b\xe0i \u0111\u0103ng",subtitle:l.a.createElement(l.a.Fragment,null,"\u1ea2nh n\xe0y s\u1ebd \u0111\u01b0\u1ee3c d\xf9ng \u0111\u1ec3 \u0111\u0103ng l\xean fanpage, th\u01b0\u1eddng s\u1ebd l\xe0 avatar c\u1ee7a d\u1ef1 \xe1n.",l.a.createElement("br",null),"L\u01b0u \xfd:",l.a.createElement("br",null),"- Ch\xfang m\xecnh KH\xd4NG CH\u1ea4P NH\u1eacN \u1ea3nh ch\u1ee5p t\u1eadp th\u1ec3 c\u1ee7a BTC",l.a.createElement("br",null),"- Kh\xf4ng ch\u1ea5p nh\u1eadn c\xe1c \u1ea3nh d\u1ec5 g\xe2y hi\u1ec3u nh\u1ea7m, ho\u1eb7c c\xf3 n\u1ed9i dung kh\xf4ng l\xe0nh m\u1ea1nh",l.a.createElement("br",null),"- \u1ea2nh n\xean c\xf3 t\u1ef7 l\u1ec7 vu\xf4ng (1:1) \u0111\u1ec3 hi\u1ec7n t\u1ed1t tr\xean c\u1ea3 instagram v\xe0 facebook",l.a.createElement("br",null)),required:!0},e)),name:"image",defaultValue:()=>null,checkError:e=>{if(!e)return"B\u1ea1n ch\u01b0a ch\u1ecdn \u1ea3nh \u0111\u1ec3 \u0111\u0103ng l\xean page ch\xfang m\xecnh"},populateToDoc:(e,t)=>{t.image=[e]}},{element:e=>l.a.createElement(An,Object.assign({title:"T\xean d\u1ef1 \xe1n/cu\u1ed9c thi/s\u1ef1 ki\u1ec7n",subtitle:"H\xe3y nh\u1eadp 1 t\xean ng\u1eafn g\u1ecdn cho d\u1ef1 \xe1n, cu\u1ed9c thi hay s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n nh\xe9",placeholder:"V\xed d\u1ee5: ABC Project...",required:!0},e)),name:"name",defaultValue:()=>"",checkError:e=>{if(!e.trim())return"B\u1ea1n ch\u01b0a \u0111i\u1ec1n t\xean d\u1ef1 \xe1n/cu\u1ed9c thi/s\u1ef1 ki\u1ec7n"},populateToDoc:(e,t)=>{t.name=e.trim()}},{element:e=>l.a.createElement(Ln,Object.assign({title:"Ph\xe2n lo\u1ea1i",subtitle:"B\u1ea1n c\xf3 th\u1ec3 th\xeam ph\xe2n m\u1ee5c d\u1ef1 \xe1n c\u1ee7a b\u1ea1n (n\u1ebfu kh\xf4ng c\xf3 trong danh s\xe1ch n\xe0y) d\u01b0\u1edbi d\u1ea1ng hashtag",moreLabel:"Ho\u1eb7c nh\u1eadp th\xeam c\xe1c hashtag kh\xe1c...",placeholder:"V\xed d\u1ee5: #d\u1ef1_\xe1n_ABC",required:!0},e)),name:"type",defaultValue:()=>{const e=A.getParameterByName("cls")||"";return{"#d\u1ef1_\xe1n_gi\xe1o_d\u1ee5c":!1,"#d\u1ef1_\xe1n_t\xecnh_nguy\u1ec7n":!1,"#d\u1ef1_\xe1n_v\u0103n_h\xf3a":!1,"#d\u1ef1_\xe1n_ngh\u1ec7_thu\u1eadt":!1,"#d\u1ef1_\xe1n_khoa_h\u1ecdc":!1,"#d\u1ef1_\xe1n_m\xf4i_tr\u01b0\u1eddng":!1,"#cu\u1ed9c_thi":!!e.match(/contest/),"#s\u1ef1_ki\u1ec7n":!!e.match(/event/),other:""}},checkError:e=>{const t=Object.values(e).some(e=>!!e),n=!!e.other.trim(),a=!!e.other.match(/#/);return t?n&&!a?"Ph\u1ea7n \xf4 \u0111i\u1ec1n ph\u1ea3i c\xf3 d\u1ea5u hashtag, v\xed d\u1ee5 #d\u1ef1_\xe1n_ABC":void 0:"B\u1ea1n ch\u01b0a ch\u1ecdn ph\u1ea7n n\xe0y"},populateToDoc:(e,t)=>{let n=A.getParameterByName("cls")||"project";n=n.match(/project/)?"project":n.match(/contest/)?"contest":n.match(/event/)?"event":"project";const a=Object.entries(e).filter(([e,t])=>"other"!==e&&t).map(e=>e[0]),l=e.other.trim();l&&a.push(l),t.cls=n,t.type=a}},{element:e=>l.a.createElement(Hn,Object.assign({title:"M\xf4 t\u1ea3 v\u1ec1 d\u1ef1 \xe1n/cu\u1ed9c thi/s\u1ef1 ki\u1ec7n",subtitle:l.a.createElement(l.a.Fragment,null,"L\u01b0u \xfd:",l.a.createElement("br",null),"- H\xe3y vi\u1ebft th\u1eadt chi ti\u1ebft, \u0111\u1ec3 ng\u01b0\u1eddi \u0111\u1ecdc c\xf3 th\u1ec3 hi\u1ec3u d\u1ef1 \xe1n/cu\u1ed9c thi/s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n h\u01b0\u1edbng \u0111\u1ebfn \u0111i\u1ec1u g\xec nh\xe9.",l.a.createElement("br",null),"- KH\xd4NG copy-paste link b\xe0i h\u1ed7 tr\u1ee3 truy\u1ec1n th\xf4ng (ph\u1ea3i vi\u1ebft \u0111\u1ea7y \u0111\u1ee7 n\u1ed9i dung v\xe0o \u0111\xe2y)",l.a.createElement("br",null),"- C\xe1c th\xf4ng tin v\u1ec1 nh\xe0 t\xe0i tr\u1ee3 s\u1ebd b\u1ecb x\xf3a sau khi ki\u1ec3m duy\u1ec7t.",l.a.createElement("br",null),"- B\u1ea1n c\u0169ng c\xf3 th\u1ec3 \u0111\u1ec3 link \u0111\u01a1n \u0111\u0103ng k\xfd (n\u1ebfu c\xf3) trong ph\u1ea7n m\xf4 t\u1ea3",l.a.createElement("br",null)),placeholder:"V\xed d\u1ee5: ABC Project l\xe0 d\u1ef1 \xe1n \u0111\u01b0\u1ee3c l\u1eadp ra v\xec m\u1ee5c \u0111\xedch... Ch\xfang m\xecnh h\u01b0\u1edbng t\u1edbi vi\u1ec7c...",required:!0,rows:15},e)),name:"description",defaultValue:()=>"",checkError:e=>{const t=e.trim();if(!t)return"B\u1ea1n ch\u01b0a \u0111i\u1ec1n ph\u1ea7n m\xf4 t\u1ea3 n\xe0y";if(t.length<400)return"Ph\u1ea7n m\xf4 t\u1ea3 cho d\u1ef1 \xe1n qu\xe1 ng\u1eafn. B\u1ea1n h\xe3y vi\u1ebft 1 c\xe1ch chi ti\u1ebft h\u01a1n (d\u1ef1 \xe1n c\u1ee7a b\u1ea1n l\xe0m g\xec, c\xf3 \xfd ngh\u0129a th\u1ebf n\xe0o,...). H\xe3y vi\u1ebft chi ti\u1ebft, KH\xd4NG copy-paste link b\xe0i vi\u1ebft";const n=t.match(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([^ \n\r\t]+)/gi);if(n)for(const a of n)if(a.match(/\.\.\./))return`Do ph\u1ea7n m\xf4 t\u1ea3 b\u1ea1n copy t\u1eeb facebook, n\xean link sau: "${a}" \u0111\xe3 b\u1ecb facebook r\xfat ng\u1eafn (c\xf3 d\u1ea5u 3 ch\u1ea5m). V\xec v\u1eady, \u0111\u1ed9c gi\u1ea3 s\u1ebd kh\xf4ng th\u1ec3 b\u1ea5m v\xe0o \u0111\u01b0\u1ee3c. B\u1ea1n n\xean \u0111\u1eb7t l\u1ea1i link g\u1ed1c, ho\u1eb7c d\xf9ng bit.ly hay bom.to \u0111\u1ec3 r\xfat g\u1ecdn link nh\xe9!`},populateToDoc:(e,t)=>{t.description=e.trim()}},{element:e=>l.a.createElement(jn,Object.assign({title:"T\u1ec9nh, th\xe0nh ph\u1ed1",subtitle:"N\u01a1i d\u1ef1 \xe1n / cu\u1ed9c thi / s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n s\u1ebd di\u1ec5n ra. B\u1ea1n c\xf3 th\u1ec3 ch\u1ecdn nhi\u1ec1u t\u1ec9nh, th\xe0nh ph\u1ed1 (h\xe3y cu\u1ed9n sang ngang \u0111\u1ec3 t\xecm)",required:!0},e)),name:"locations",defaultValue:()=>{const e={};for(const t of Fn)e[t]=!1;return e},checkError:e=>{if(!Object.values(e).some(e=>!!e))return"B\u1ea1n ch\u01b0a ch\u1ecdn ph\u1ea7n n\xe0y"},populateToDoc:(e,t)=>{const n=Object.entries(e).filter(e=>e[1]).map(e=>e[0]);t.locations=n}},{element:e=>l.a.createElement(An,Object.assign({title:"Link facebook page",subtitle:"H\xe3y nh\u1eadp link t\u1edbi trang facebook ch\xednh c\u1ee7a d\u1ef1 \xe1n, cu\u1ed9c thi hay s\u1ef1 ki\u1ec7n c\u1ee7a b\u1ea1n nh\xe9",placeholder:"V\xed d\u1ee5: https://www.facebook.com/tonghopevent",required:!0},e)),name:"linkfb",defaultValue:()=>"",checkError:e=>{const t=e.trim();return t?t.match(/(fb|facebook)\.com/)?void 0:"Link b\u1ea1n nh\u1eadp kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng. V\xed d\u1ee5, link t\u1edbi facebook c\u1ee7a ch\xfang m\xecnh ph\u1ea3i l\xe0: https://www.facebook.com/tonghopevent":"B\u1ea1n ch\u01b0a \u0111i\u1ec1n m\u1ee5c n\xe0y"},populateToDoc:(e,t)=>{t.linkfb=e}},{element:e=>l.a.createElement(Mn,Object.assign({title:"D\u1ef1 \xe1n c\u1ee7a b\u1ea1n c\xf3 tuy\u1ec3n nh\xe2n s\u1ef1 kh\xf4ng?",subtitle:"V\xed d\u1ee5 nh\u01b0 tuy\u1ec3n TNV, tuy\u1ec3n Ban \u0111i\u1ec1u h\xe0nh, ng\u01b0\u1eddi tham gia,...",required:!0},e)),name:"_recruitment",defaultValue:()=>null,checkError:e=>{if(null===e)return"B\u1ea1n ch\u01b0a ch\u1ecdn m\u1ee5c n\xe0y"},populateToDoc:(e,t)=>null},{dependsOn:"_recruitment",element:e=>l.a.createElement(Ln,Object.assign({title:"Y\xeau c\u1ea7u \u0111\u1ed1i t\u01b0\u1ee3ng",moreLabel:"Ho\u1eb7c c\xe1c \u0111\u1ed1i t\u01b0\u1ee3ng kh\xe1c... (kh\xf4ng b\u1eaft bu\u1ed9c \u0111i\u1ec1n)",placeholder:"Kh\xe1c..."},e)),name:"wanted",defaultValue:()=>({"Ban \u0111i\u1ec1u h\xe0nh":!1,"T\xecnh nguy\u1ec7n vi\xean":!1,"Ng\u01b0\u1eddi tham gia":!1,other:""}),checkError:e=>null,populateToDoc:(e,t)=>{const n=Object.entries(e).filter(([e,t])=>"other"!==e&&t).map(e=>e[0]);e.other&&n.push(e.other),t.wanted=n}},{dependsOn:"_recruitment",element:e=>l.a.createElement(Hn,Object.assign({title:"Deadline tuy\u1ec3n nh\xe2n s\u1ef1",subtitle:"N\u1ebfu b\u1ea1n c\xf3 deadline ri\xeang cho t\u1eebng ban, b\u1ea1n c\u0169ng c\xf3 th\u1ec3 ghi r\xf5 trong ph\u1ea7n n\xe0y nh\xe9",placeholder:"...",rows:2},e)),name:"deadline",defaultValue:()=>"",checkError:e=>null,populateToDoc:(e,t)=>t.deadline=e.trim()},{dependsOn:"_recruitment",element:e=>l.a.createElement(Hn,Object.assign({title:"Quy\u1ec1n l\u1ee3i th\xe0nh vi\xean khi tham gia d\u1ef1 \xe1n",subtitle:"V\xed d\u1ee5: nh\u01b0 \u0111\u01b0\u1ee3c ch\u1ee9ng ch\u1ec9, \u0111\u01b0\u1ee3c giao l\u01b0u, h\u1ecdc h\u1ecfi kinh nghi\u1ec7m v\u1ec1 l\u0129nh v\u1ef1c g\xec,...",placeholder:"VD: Tham gia ABC Project, b\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c... v\xe0 ngo\xe0i ra...",rows:7},e)),name:"benefit",defaultValue:()=>"",checkError:e=>null,populateToDoc:(e,t)=>t.benefit=e.trim()},{element:e=>l.a.createElement(An,Object.assign({title:"B\u1ea1n c\xf3 l\u01b0u \xfd, c\xe2u h\u1ecfi g\xec cho admin kh\xf4ng?",subtitle:l.a.createElement(l.a.Fragment,null,"(Kh\xf4ng b\u1eaft bu\u1ed9c) V\xed d\u1ee5: mu\u1ed1n \u0111\u0103ng b\xe0i v\xe0o ng\xe0y n\xe0o,...",l.a.createElement("br",null),"(\xd4 \u0111i\u1ec1n n\xe0y l\xe0 cho admin \u0111\u1ecdc, n\xf3 s\u1ebd kh\xf4ng \u0111\u01b0\u1ee3c ghi v\xe0o b\xe0i \u0111\u0103ng l\xean facebook)"),placeholder:"..."},e)),name:"feedback",defaultValue:()=>"",checkError:e=>null,populateToDoc:(e,t)=>t.feedback=e.trim()}],Vn=/ \u1ea1([^a-z]|$)/,Gn=e=>{let t=(e=>{const t=Object.entries(e).filter(([e])=>"name"===e||"description"===e||"linkfb"===e||"deadline"===e||"benefit"===e).map(([e,t])=>t).join("\n").match(Vn);return console.log(t),t?"chat_speech":null})(e);return t||null},Kn=({warn:e,onSubmit:t,clearWarn:n})=>{const[r,i]=l.a.useState(!1);Object(a.useEffect)(()=>{e&&i(!0)},[e]);const o=()=>{i(!1),n()};return l.a.createElement(l.a.Fragment,null,l.a.createElement(X.a,{open:r,onClose:o,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(q.a,{id:"alert-dialog-title"},"X\xe1c nh\u1eadn g\u1eedi th\xf4ng tin"),l.a.createElement(Q.a,null,l.a.createElement(Y.a,{id:"alert-dialog-description"},"chat_speech"===e&&l.a.createElement(l.a.Fragment,null,"Hmm... c\xf3 v\u1ebb ph\u1ea7n b\u1ea1n nh\u1eadp ch\u01b0a \u1ed5n l\u1eafm:",l.a.createElement("br",null),"V\xed d\u1ee5, n\u1ebfu b\u1ea1n vi\u1ebft ",l.a.createElement("b",null,'"m\xecnh xin g\u1eedi admin \u1ea1"')," \u1edf trong ph\u1ea7n m\xf4 t\u1ea3, th\xec c\u1ea3 c\xe2u \u0111\xf3 s\u1ebd \u0111\u01b0\u1ee3c copy-paste l\xean b\xe0i \u0111\u0103ng tr\xean facebook lu\xf4n.",l.a.createElement("br",null),'C\xe1c \xf4 \u0111i\u1ec1n trong form n\xe0y \u0111\u1ec1u \u0111\u01b0\u1ee3c m\xe1y x\u1eed l\xfd t\u1ef1 \u0111\u1ed9ng (tr\u1eeb \xf4 \u0111i\u1ec1n "l\u01b0u \xfd, c\xe2u h\u1ecfi cho admin" \u1edf cu\u1ed1i c\xf9ng), v\u1eady n\xean b\u1ea1n h\xe3y check l\u1ea1i gi\xfap \ud83d\ude38 Jiji nha!',l.a.createElement("br",null),l.a.createElement("br",null),'C\xf2n n\u1ebfu b\u1ea1n ch\u1eafc l\xe0 t\u1ea5t c\u1ea3 \u0111\u1ec1u \u1ed5n (c\xf3 th\u1ec3 \ud83d\ude38 Jiji nh\u1ea7m l\u1eabn g\xec \u0111\xf3, m\xecnh ch\u1ec9 l\xe0 con m\xe8o th\xf4i m\xe0!), th\xec b\u1ea1n h\xe3y b\u1ea5m n\xfat "X\xe1c nh\u1eadn g\u1eedi" d\u01b0\u1edbi \u0111\xe2y'))),l.a.createElement(J.a,null,l.a.createElement(b.a,{onClick:()=>{o(),t()},color:"primary",autoFocus:!0},"X\xe1c nh\u1eadn g\u1eedi"),l.a.createElement(b.a,{onClick:o,color:"primary"},"Quay l\u1ea1i"))))};var Wn=n(34);const Un={input:{marginBottom:"20px",width:"500px",maxWidth:"100%"},container:{display:"flex",flexWrap:"wrap"},cardStyle:{maxWidth:"700px",marginTop:"20px",marginRight:"auto",marginLeft:"auto"}};var zn=()=>{const[e,t]=Object(a.useState)((()=>{const e={};for(const t of Rn)e[t.name]=t.defaultValue();return e})()),[n,r]=Object(a.useState)({}),[i,o]=Object(a.useState)(!1),[s,c]=Object(a.useState)(!1),[m,h]=Object(a.useState)(!1),[E,v]=Object(a.useState)(null),[k,w]=Object(a.useState)(null);window.TONGHOPEVENT_CONTEXT||(window.TONGHOPEVENT_CONTEXT=(()=>{try{const e=decodeURIComponent(window.location.href.match(/data=([^&]+)/)[1]),[t,n]=e.split(";");return{psid:t.substr(0,t.length-5),hash:t.substr(-5),org:n.toLowerCase()}}catch(e){return alert("ERROR: NO CONTEXT"),null}})(),console.log(window.TONGHOPEVENT_CONTEXT));const C=e=>Object.values(e).some(e=>!!e),x=async e=>{const t=window.location.href.match(/nui_test/),a=e||k;if(!C(n)){if(c(!0),console.log(a),t)h(!0);else{const e=await(async e=>{try{const t=window.TONGHOPEVENT_CONTEXT,n={...e,...t};return await y.a.post("https://tonghopevent-form-submit-btpjgpbvma-uc.a.run.app/form/submit",n),!0}catch(a){var t,n;return Wn.a(a),console.error(a),(null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)&&alert("C\xf3 l\u1ed7i x\u1ea3y ra, xin vui l\xf2ng ch\u1ee5p m\xe0n h\xecnh v\xe0 b\xe1o l\u1ea1i v\u1edbi admin: "+a.response.data.error),!1}})(a);h(e),e||alert("C\xf3 l\u1ed7i x\u1ea3y ra, xin vui l\xf2ng th\u1eed l\u1ea1i!")}c(!1)}};Object(a.useEffect)(()=>{o(C(n))},[n]);const D=a=>l=>{t({...e,[a]:l}),n[a]&&r({...n,[a]:null})};return l.a.createElement(Fe.a,{theme:d},l.a.createElement(Vt.a,null),l.a.createElement(Ft.a,{position:"static"},l.a.createElement(Rt.a,null,l.a.createElement(p.a,{variant:"h6",style:{flexGrow:1}},"Form nh\u1eadp d\u1eef li\u1ec7u"))),l.a.createElement("div",{className:"mainView"},l.a.createElement(u.a,{style:Un.cardStyle},l.a.createElement(g.a,null,l.a.createElement(p.a,{variant:"h5",component:"h2",gutterBottom:!0},"Form nh\u1eadp d\u1eef li\u1ec7u h\u1ed7 tr\u1ee3 truy\u1ec1n th\xf4ng"),!m&&l.a.createElement(p.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},"Ch\xfang m\xecnh s\u1ebd copy c\xe1c th\xf4ng tin b\u1ea1n nh\u1eadp d\u01b0\u1edbi \u0111\xe2y v\xe0 \u0111\u0103ng l\xean page, v\u1eady n\xean c\xe1c b\u1ea1n h\xe3y ch\xfa \xfd vi\u1ebft m\u1ed9t c\xe1ch r\xf5 r\xe0ng, d\u1ec5 hi\u1ec3u cho ng\u01b0\u1eddi \u0111\u1ecdc nh\xe9!"),!m&&l.a.createElement(p.a,{variant:"body1",component:"small",color:"textSecondary"},"(C\xe1c \xf4 c\xf3 d\xe2u * l\xe0 b\u1eaft bu\u1ed9c)"),m&&l.a.createElement(p.a,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0},"D\u1eef li\u1ec7u b\u1ea1n nh\u1eadp \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u l\u1ea1i.",l.a.createElement("br",null),"Ch\xfang m\xecnh s\u1ebd th\xf4ng b\xe1o v\u1edbi b\u1ea1n ngay khi b\xe0i \u0111\u0103ng \u0111\u01b0\u1ee3c duy\u1ec7t!"))),!m&&Rn.map(t=>{if(!t.dependsOn||t.dependsOn&&e[t.dependsOn]){const a=t.name;return t.element({value:e[a],key:a,onChange:D(a),error:n[a]})}return null}),!m&&l.a.createElement(u.a,{style:Un.cardStyle},l.a.createElement(g.a,null,l.a.createElement("div",null,l.a.createElement("small",null,'\u0110\u1eebng qu\xean b\u1ea5m n\xfat "Ho\xe0n th\xe0nh" khi b\u1ea1n \u0111\xe3 \u0111i\u1ec1n xong nh\xe9:',l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement(b.a,{color:"primary",variant:"contained",onClick:()=>{const t={},n={};for(const a of Rn){const l=a.name,r=e[l];n[l]=a.checkError(r),a.populateToDoc(r,t)}if(r(n),!C(n)){w(t);const e=Gn(t);e?v(e):x(t)}},disabled:i},"Ho\xe0n th\xe0nh"),i&&l.a.createElement("p",{className:"error"},"V\u1eabn c\xf2n m\u1ed9t v\xe0i \xf4 \u0111i\u1ec1n c\xf3 v\u1ea5n \u0111\u1ec1. B\u1ea1n h\xe3y ki\u1ec3m tra l\u1ea1i nh\xe9."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("small",null,"------",l.a.createElement("br",null),"\ud83d\ude38 Jiji: H\u1ec7 th\u1ed1ng form \u0111i\u1ec1n n\xe0y \u0111ang trong giai \u0111o\u1ea1n th\u1eed nghi\u1ec7m.",l.a.createElement("br",null),"N\u1ebfu b\u1ea1n g\u1eb7p l\u1ed7i g\xec, h\xe3y inbox cho Jiji nh\xe9!")))),l.a.createElement("center",null,l.a.createElement("br",null),l.a.createElement("br",null),"Developed by\xa0",l.a.createElement("b",null,l.a.createElement("a",{href:"https://ngxson.com",target:"_blank",rel:"noopener noreferrer"},"Nui")),l.a.createElement("br",null),"Version ",j.VERSION,l.a.createElement("br",null),l.a.createElement("br",null))),s&&l.a.createElement("div",{className:"loading-overlay"},l.a.createElement("div",null,l.a.createElement(f.a,null),l.a.createElement("br",null),"\u0110ang g\u1eedi d\u1eef li\u1ec7u...")),l.a.createElement(Kn,{warn:E,onSubmit:x,clearWarn:()=>v(null)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qn=n(5591),Xn=n(215);qn.a({dsn:"https://eed214d9c56c4e7085cccd764a9ac6a8@o1087634.ingest.sentry.io/6101146",integrations:[new Xn.a.BrowserTracing],tracesSampleRate:.05}),window.location.pathname.match(/\/data/)?(console.log(j.VERSION),A.loadSettings(),i.a.render(l.a.createElement(an,null),document.getElementById("root"))):window.location.pathname.match(/\/form/)?i.a.render(l.a.createElement(zn,null),document.getElementById("root")):i.a.render(l.a.createElement(vn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[5442,1,2]]]);
//# sourceMappingURL=main.319de595.chunk.js.map