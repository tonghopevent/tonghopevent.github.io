{"version":3,"sources":["Theme.js","components/messenger/utils.js","Utils.js","components/messenger/custom/TongHopEvent.jsx","Config.js","layouts/Login.jsx","components/NoteEditDialog.jsx","components/Doc.jsx","components/ToolsDialog.jsx","components/DuplicateDocDialog.jsx","DuplicateHelper.js","layouts/Home.jsx","layouts/View.jsx","components/DatePicker.jsx","components/Timeslots.jsx","layouts/Publish.jsx","layouts/GetImage.jsx","components/Alert.jsx","components/FBPostEditDialog.jsx","layouts/fb/PostList.jsx","layouts/fb/Scheduled.jsx","layouts/fb/FBFeed.jsx","layouts/Settings.jsx","components/messenger/socket.js","components/messenger/Context.jsx","components/messenger/Conversations.jsx","components/messenger/Header.jsx","components/messenger/MessageInput.jsx","components/messenger/MessageView.jsx","components/messenger/Messenger.jsx","components/messenger/index.js","components/sidebar/styles.js","components/sidebar/SidebarItems.js","components/sidebar/Sidebar.jsx","components/Measure.jsx","App.jsx","landing/home/Guide.jsx","landing/home/NoPsid.jsx","landing/home/OldVersion.jsx","landing/home/Home.jsx","landing/quiz/Data.jsx","landing/quiz/Quiz.jsx","landing/Footer.jsx","landing/Landing.jsx","form/FormUploadButton.jsx","form/FormField.jsx","form/data.js","form/FormQuestions.js","form/FormConfirmation.jsx","form/Form.jsx","form/index.js","serviceWorker.js","index.js"],"names":["createMuiTheme","palette","primary","main","blueGrey","secondary","error","orange","getMessageDirectionLastData","arg","res","getMessageDirection","message","senderId","from","id","isFromPage","Config","SELF_PAGE_ID","mergeNewMessages","oldArr","newArr","addedMessages","isExistInOldArr","some","msg","unshift","mergeNewConversations","convIds","filter","conv","getTargetId","ev","senders","recipient","sender","s","data","removeVietnameseTones","str","replace","trim","ORG_CODE","Utils","INBOX_MARK_READ_ON_OPEN","settings","markReadOnOpenInbox","token","getLocalStorage","window","location","href","name","lastRun","last","now","Date","removeLocalStorage","reload","value","localStorage","setItem","JSON","stringify","item","getItem","parse","removeItem","timestamp","gmt","date","offset","getTimezoneOffset","d","getDate","m","getMonth","getFullYear","hh","getHours","mm","getMinutes","text","matched","match","length","uname","_id","url","method","payload","_url","indexOf","axios","doc","org","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","execCommand","console","log","err","removeChild","navigator","clipboard","writeText","then","fallbackCopyTextToClipboard","split","map","i","arr","isLast","key","results","RegExp","exec","decodeURIComponent","_psid","getParameterByName","inboxData","n","toLowerCase","baseUrl","open","setLocalStorage","loadSettings","makeRequest","async","endpoint","qs","getToken","post","BACKEND","params","checkError","Card","children","padding","marginBottom","border","TongHopEvent","React","Component","state","templates","loading","editingIndex","editingText","showing","openTemplateDialog","this","setState","loadTemplates","Object","keys","save","fillToInput","t","setMessageInput","componentDidMount","render","maxWidth","width","height","Maxheight","background","zIndex","transform","overflow","right","onClick","onChange","e","target","rows","cursor","nl2br","PROD","process","SOCKETIO","SOCKETIO_MODULE","INBOX_TITLE","INBOX_SEND_ABILITY","INBOX_UNREAD_ABILITY","INBOX_IGNORED_CONVERSATION","VERSION","CustomMessengerWidget","Login","constructor","props","super","handleChange","event","changeHeader","username","password","showAlert","title","classes","input","container","display","flexWrap","cardStyle","marginTop","marginRight","marginLeft","CircularProgress","form","CardContent","Typography","variant","component","color","TextField","label","type","margin","Button","onLogin","bind","NoteEditDialog","comment","onClose","Fragment","Dialog","fullWidth","aria-labelledby","DialogTitle","DialogContent","DialogContentText","multiline","rowsMax","DialogActions","Doc","getImageUrl","image","startsWith","isNoteEditOpen","isCopied","isExpanded","admin","copyContent","getCopyContent","linkfb","fbusername","extractFacebookUsername","publishAction","field","val","success","newDoc","setDoc","trashed","updateDocField","approved","cmt","generateLocationTag","join","description","cleanFBLink","wanted","deadline","benefit","psid","locations","addLoc","loc","push","forEach","_renderNonAdminInfo","backgroundColor","_renderDuplicatedWarningIcon","duplicateHelper","openDuplicateDocDialog","duplicatedDocs","checkDoc","Fab","size","_renderPostContent","rel","getTimeStr","created","getDateStr","getOrgName","feedback","_renderMainCard","gotoPublish","content","maxHeight","className","disabled","plan","toUpperCase","componentDecorator","Divider","toggleTrashDoc","toggleApproved","caption","openToolsDialog","paddingBottom","updateComment","_renderTrashedDoc","TEMPLATES","desc","ToolsDialog","showTemplates","sendInboxData","isLinkCopied","response","obj","closeToolsDialog","toastr","goToPageInbox","goToInbox","_renderSendInboxDialogAsk","isWithin24HWindow","handleClose","copyTextToClipboard","sendInbox","_renderError","List","ListItem","button","ListItemText","_renderContent","protocol","host","onCopy","onEnter","fetchData","onBackdropClick","substr","DuplicateDocDialog","docs","selectedDocID","daysAgo","Math","floor","closeDuplicateDocDialog","DuplicateHelper","seen","pushLookbackData","lookbackArr","fbname","pushDoc","clear","Home","markDocApproved","DOCID_APPROVED","dispatchDocApproved","prevState","list","toolsDialogOpen","toolsDialogDoc","duplicateDocDialog","loadData","componentWillUnmount","Promise","all","get","onClickEdit","edit","docid","home","columnsCountBreakPoints","350","1000","1550","gutter","View","_renderDocView","_renderDocNotFound","MaterialUIPickers","publish_time","handleDateChange","getTime","utils","DateFnsUtils","KeyboardButtonProps","SLOTS","hrs","min","priority","timeInDay","getDayFromFeedback","parseInt","setTime","ScheduledList","stat","statAsc","sort","TimeslotPicker","statArr","useOldPicker","setUseOldPicker","useState","showMoreSlots","setShowMoreSlots","timeslots","beginOfToday","day","startAt","slotsOfDay","time","generateTimeslots","takenSlots","setTakenSlots","suggestedSlot","setSuggestedSlot","useEffect","scheduledTime","getTakenSlotList","suggested","_timeslots","userSuggestedTime","a","b","getSuggestedSlot","setTimeout","round","DatePicker","Publish","getErrorMessage","completed","scheduled_publish_time","loadStat","loadInbox","idInDatabase","postData","toast","info","timeOut","hash","_renderComposerCard","imgStyle","alt","src","loader","_renderPublishCard","isDateOK","onClickOK","doPublish","showCancel","_renderCompletedCard","_renderInboxCard","messages","_renderMain","750","900","imgLoaderStyle","GetImage","showGetToken","access_token","imgs","fetchFacebookApi","fbtoken","feed","full_picture","picture","status","onSaveToken","urlNow","alert","_renderTitleCard","_renderImageCard","float","_data","_renderGetTokenCard","Alert","handleClickOK","handleCancel","show","aria-describedby","autoFocus","FBPostEditDialog","onEditPost","patch","editPostEndpoint","ImgLoader","PostList","processTimeField","timeFieldName","p","created_time","deletePost","confirm","delete","deletePostEndpoint","openOnFB","onEditDialogClose","shouldReload","editingPost","posts","newestFirst","loadFeedEndpoint","reverse","_renderMainView","isFromUser","fontWeight","expanded","substring","preventDefault","j","cloned","loadingComponent","Scheduled","FBFeed","Settings","saveSettings","setSettings","FormControlLabel","control","Switch","checked","Socket","socket","io","transports","query","on","handler","getSocket","offAny","resolve","requestId","c","crypto","getRandomValues","Uint8Array","toString","callback","emit","MessengerContext","createContext","MessengerContextProvider","unreadMark","fetchUnread","markUnread","markRead","Provider","withMessengerContext","Consumer","contexts","Conversations","ready","conversations","next","openConversation","inboxUpdateHandler","limit","onYReachEnd","loadMoreConversations","subscribeInbox","unsubscribeInbox","after","paging","cursors","loadingMore","message_count","snippet","active","tid","unreadDot","MarkButton","icon","faEnvelopeOpenText","faEnvelope","Header","profile","openConversationOnFB","openMainMenu","Back","Content","userName","profile_pic","Actions","as","noop","EditorContainer","Container","fancyScroll","forwardedRef","rest","ref","forwardRef","editorContainer","useControllableState","initialValue","initial","stateValue","setStateValue","newValue","MessageInputInner","onSend","placeholder","activateAfterChange","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick","scrollRef","useRef","msgRef","stateSendDisabled","setStateSendDisabled","current","useImperativeHandle","updateScroll","send","cName","ph","classNames","onKeyPress","evt","shiftKey","maxRows","minRows","MessageInput","displayName","propTypes","PropTypes","string","bool","func","defaultProps","undefined","TimeAgo","addLocale","en","timeAgo","MessageView","threadInfo","messageAfter","messagePending","messagePendingId","originalTitle","newMessages","mid","onYReachStart","concat","link","openInNewTab","goBackTo","handleSendMessage","message_id","makeRequestSendAPI","messaging_type","tag","fetchConversation","componentDidUpdate","prevProps","_renderMessages","lastDirection","showTimeHeader","direction","Footer","format","showImages","images","img","model","CustomContent","preview_url","attachments","image_data","getImages","sentTime","showTextMsg","opacity","_renderInput","txt","Messenger","viewHeight","updateHeight","NUI_VIEW_HEIGHT","scrollable","MessageTidChanged","MessageTidReset","intervalId","setInterval","clearInterval","path","exact","withRouter","useSidebarStyles","makeStyles","theme","root","appBar","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","spacing","toolbar","alignItems","justifyContent","mixins","flexGrow","SidebarItems","separator","hidden","pathname","useTheme","setOpen","currentMenuItem","currentHash","getCurrentMenuItem","isPublicView","handleClickItem","CssBaseline","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","Drawer","paper","selected","ListItemIcon","Measure","elem","div","clientHeight","NUI_VIEW_WIDTH","clientWidth","pointerEvents","Main","publishData","Copyright","Logout","header","LoginLayout","RedirectToHome","App","Theme","Guide","data-animate-effect","NoPsid","OldVersion","getPsid","role","backgroundImage","getFormUrl","cls","euc","encodeURIComponent","Data","parent","options","subtitle","notice","newState","screen","scrollToTop","_renderSmallBtn","option","_renderLargeBtn","fontSize","Quiz","Landing","app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","storage","getStorage","auth","getAuth","signInWithEmailAndPassword","userCredential","user","catch","errorCode","code","errorMessage","UploadButton","uploading","setUploading","imgRef","setImgRef","deleteObject","accept","file","files","ext","reject","Resizer","imageFileResizer","f","resizeFile","snap","uploadBytes","getDownloadURL","FormField","required","gutterBottom","FormControl","TextInput","autoComplete","LongTextInput","MultipleCheckboxes","moreLabel","FormGroup","k","Checkbox","other","MultipleCheckboxesLimitedHeight","UploadFileInput","YesOrNo","click","VN_CITIES","FormQuestions","element","defaultValue","populateToDoc","atLeastOneFilled","values","hasOther","otherHasHash","entries","v","urls","dependsOn","CHAT_SPEECH_TYPE_REGEX","checkWarning","checkSpeechTypeWarning","FormConfirmation","warn","onSubmit","clearWarn","Form","setValues","q","getDefaultValues","errors","setErrors","hasError","setHasErrors","setLoading","setSuccess","setWarn","docRecord","setDocRecord","TONGHOPEVENT_CONTEXT","hashPsid","getUserContext","checkIfHasError","isTest","_doc","ctx","Sentry","submitForm","onFieldChanged","Boolean","hostname","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","getElementById","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.319de595.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blueGrey from '@material-ui/core/colors/blueGrey';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: { main: blueGrey[700] },\r\n    secondary: { main: blueGrey[200] },\r\n    error: { main: orange[900] }\r\n  }\r\n})","import Config from '../../Config';\n\nconst getMessageDirectionLastData = {arg: null, res: null};\nexport const getMessageDirection = (message) => {\n  if (getMessageDirectionLastData.arg === message) {\n    return getMessageDirectionLastData.res;\n  } else {\n    getMessageDirectionLastData.arg = message;\n    const senderId = message.from.id;\n    const isFromPage = senderId === Config.SELF_PAGE_ID || senderId === '182794865548469';\n    getMessageDirectionLastData.res = isFromPage ? 'outgoing' : 'incoming';\n    return getMessageDirectionLastData.res;\n  }\n};\n\nexport const mergeNewMessages = (oldArr, newArr) => {\n  const addedMessages = [];\n  const isExistInOldArr = (id) => oldArr.some(msg => msg.id === id);\n  for (const msg of newArr) {\n    if (isExistInOldArr(msg.id)) break;\n    addedMessages.unshift(msg);\n  }\n  return [...oldArr, ...addedMessages];\n};\n\nexport const mergeNewConversations = (oldArr, newArr) => {\n  const convIds = {};\n  return [...newArr, ...oldArr].filter(conv => {\n    if (!convIds[conv.id]) {\n      convIds[conv.id] = true;\n      return true;\n    } else {\n      return false;\n    }\n  });\n}\n\nexport const getTargetId = (ev) => {\n  if (ev.senders) {\n    for (const s of ev.senders.data) {\n      if (s.id !== Config.SELF_PAGE_ID) return s.id;\n    }\n  } else if (ev.recipient && ev.recipient.id !== Config.SELF_PAGE_ID) {\n    return ev.recipient.id;\n  } else if (ev.sender && ev.sender.id !== Config.SELF_PAGE_ID) {\n    return ev.sender.id;\n  } else {\n    return null;\n  }\n}\n\n/*eslint-disable */\nexport const removeVietnameseTones = (str) => {\n  str = str.replace(/||||||||||||||||/g,\"a\"); \n  str = str.replace(/||||||||||/g,\"e\"); \n  str = str.replace(/||||/g,\"i\"); \n  str = str.replace(/||||||||||||||||/g,\"o\"); \n  str = str.replace(/||||||||||/g,\"u\"); \n  str = str.replace(/||||/g,\"y\"); \n  str = str.replace(//g,\"d\");\n  str = str.replace(/||||||||||||||||/g, \"A\");\n  str = str.replace(/||||||||||/g, \"E\");\n  str = str.replace(/||||/g, \"I\");\n  str = str.replace(/||||||||||||||||/g, \"O\");\n  str = str.replace(/||||||||||/g, \"U\");\n  str = str.replace(/||||/g, \"Y\");\n  str = str.replace(//g, \"D\");\n  // Some system encode vietnamese combining accent as individual utf-8 characters\n  // Mt vi b encode coi cc du m, du ch nh mt k t ring bit nn thm hai dng ny\n  str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); //       huyn, sc, ng, hi, nng\n  str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); //     , , , , \n  // Remove extra spaces\n  // B cc khong trng lin nhau\n  str = str.replace(/ + /g,\" \");\n  str = str.trim();\n  // Remove punctuations\n  // B du cu, k t c bit\n  str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\" \");\n  return str;\n};\n/*eslint-enable */","import React from 'react'\r\nimport axios from 'axios'\r\nimport Config from './Config'\r\nimport { removeVietnameseTones } from './components/messenger/utils'\r\n\r\nconst ORG_CODE = {\r\n  'f1': 'Nhm HS, SV',\r\n  'f2': 'CLB thuc trng hc',\r\n  'f3': 'Trng cng lp',\r\n  'f4': 'T chc phi li nhun',\r\n  'p1': 'T chc c li nhun',\r\n}\r\n\r\nclass Utils {\r\n  static loadSettings() {\r\n    Config.INBOX_MARK_READ_ON_OPEN = Utils.settings.markReadOnOpenInbox\r\n  }\r\n\r\n  static getToken() {\r\n    const token = Utils.getLocalStorage('token')\r\n    if (!token) window.location.href = '#/login'\r\n    else return token\r\n  }\r\n\r\n  static checkDebounce(name) {\r\n    if (!window.lastRun) window.lastRun = {}\r\n    const last = window.lastRun[name] || 0\r\n    const now = Date.now()\r\n    if (now - last < 500) {\r\n      return true\r\n    } else {\r\n      window.lastRun[name] = now\r\n    }\r\n  }\r\n\r\n  static checkError(res) {\r\n    if (res && res.data && res.data.error === 'Invalid token') {\r\n      Utils.removeLocalStorage('token')\r\n      window.location.href = '#/'\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  static setLocalStorage(name, value) {\r\n    localStorage.setItem('tonghopevent:' + name, JSON.stringify(value))\r\n  }\r\n  \r\n  static getLocalStorage(name) {\r\n    const item = localStorage.getItem('tonghopevent:' + name) || null\r\n    if (item === null) return null\r\n    return JSON.parse(item)\r\n  }\r\n  \r\n  static removeLocalStorage(name) {\r\n    localStorage.removeItem('tonghopevent:' + name)\r\n  }\r\n  \r\n  static getDateStr(timestamp, gmt) {\r\n    let date = new Date(timestamp || 1)\r\n    if (gmt) {\r\n      const offset = date.getTimezoneOffset() * 60000\r\n      date = new Date(timestamp + offset + gmt*3600*1000)\r\n    }\r\n    let d = date.getDate()\r\n    let m = date.getMonth() + 1\r\n    let y = date.getFullYear()\r\n    return `${d < 10 ? '0' : ''}${d}-${m < 10 ? '0' : ''}${m}-${y}`\r\n  }\r\n\r\n  static getTimeStr(timestamp, gmt) {\r\n    let date = new Date(timestamp || 1)\r\n    if (gmt) {\r\n      const offset = date.getTimezoneOffset() * 60000\r\n      date = new Date(timestamp + offset + gmt*3600*1000)\r\n    }\r\n    let hh = date.getHours()\r\n    let mm = date.getMinutes()\r\n    return `${hh < 10 ? '0' : ''}${hh}h${mm < 10 ? '0' : ''}${mm}`\r\n  }\r\n\r\n  static extractFacebookUsername(text = '') {\r\n    const matched = text.replace('/pg/', '/').match(/[facebok]+\\.com\\/([^?/]+)/)\r\n    if (!matched || matched.length < 1) return null\r\n    const uname = matched[1]\r\n    if (uname === 'events') return null\r\n    const _id = uname.match(/-([0-9]{7,20})$/)\r\n    if (!_id || _id.length < 1) return uname\r\n    else return _id[1]\r\n  }\r\n\r\n  static makeRequest(url, method = 'get', payload = {}) {\r\n    const token = Utils.getLocalStorage('token')\r\n    const _url = url + (url.indexOf('?') !== -1 ? '&' : '?') + 'token=' + token\r\n    return axios[method](_url, payload)\r\n  }\r\n\r\n  static cleanFBLink(url = '') {\r\n    return url.replace(/[&?](__|eid|fref)[^&?\\s]+/g, '')\r\n  }\r\n\r\n  static getOrgName(doc) {\r\n    return ORG_CODE[doc.org]\r\n  }\r\n\r\n  static fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n    \r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n  \r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n  \r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n  \r\n    document.body.removeChild(textArea);\r\n  }\r\n\r\n  static copyTextToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n      Utils.fallbackCopyTextToClipboard(text);\r\n      return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function() {\r\n      console.log('Async: Copying to clipboard was successful!');\r\n    }, function(err) {\r\n      console.error('Async: Could not copy text: ', err);\r\n    });\r\n  }\r\n\r\n  static nl2br(text) {\r\n    return text.trim().replace(/\\r/g, '').split('\\n').map(function(item, i, arr) {\r\n      const isLast = i === arr.length - 1\r\n      return <span key={i}>{item}{!isLast && <br/>}</span>\r\n    })\r\n  }\r\n\r\n  static getParameterByName(name) {\r\n    const url = window.location.href;\r\n    /*eslint-disable */\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    /*eslint-enable */\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\r\n    var results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n\r\n  static getPsid() {\r\n    const _id = Utils.getParameterByName('psid_hashed') || '';\r\n    const _psid = _id.match(/[0-9]{3,20}[A-Z]{3,10}/);\r\n    const psid = _psid ? _psid[0] : 'none';\r\n    return psid;\r\n  }\r\n\r\n  static goToInbox(inboxData) {\r\n    const {id, senders} = inboxData;\r\n    const name = senders.data[0].name;\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\r\n    const baseUrl = window.location.href.replace(/#.*/, '');\r\n    window.open(`${baseUrl}#/msg/${id}/${n}`, '_blank').focus();\r\n  }\r\n\r\n  static settings = {\r\n    markReadOnOpenInbox: false,\r\n    ...(Utils.getLocalStorage('settings') || {})\r\n  }\r\n  static setSettings(settings) {\r\n    Utils.setLocalStorage('settings', settings)\r\n    Utils.settings = { ...settings }\r\n    Utils.loadSettings()\r\n  }\r\n}\r\n\r\n// used by inbox component\r\nexport const makeRequest = async (method, endpoint, qs = {}, body = {}) => {\r\n  qs.token = Utils.getToken()\r\n  endpoint = endpoint.replace('/inbox/', '/inbox2/');\r\n  const res = method === 'post'\r\n    ? await axios.post(`${Config.BACKEND}${endpoint}`, body, { params: qs })\r\n    : await axios[method](`${Config.BACKEND}${endpoint}`, { params: qs })\r\n  Utils.checkError(res)\r\n  return res.data\r\n}\r\n\r\nexport default Utils\r\n","import React from 'react';\nimport nl2br from 'react-nl2br';\nimport Loader from '@chatscope/chat-ui-kit-react/dist/cjs/Loader';\nimport { makeRequest } from '../../../Utils';\n\nfunction Card({children}) {\n  return <div style={{\n    padding: '10px',\n    marginBottom: '10px',\n    border: '#cecece solid 2px',\n    position: 'relative',\n  }}>{children}</div>\n}\n\nclass TongHopEvent extends React.Component {\n  state = {\n    templates: [],\n    loading: true,\n    editingIndex: null,\n    editingText: null,\n    showing: false,\n  };\n\n  componentDidMount() {\n    this.loadTemplates();\n    window.openTemplateDialog = this.openTemplateDialog;\n  }\n\n  openTemplateDialog = () => {\n    this.setState({ showing: true });\n  };\n\n  loadTemplates = async () => {\n    this.setState({ loading: true });\n    let templates = (await makeRequest('get', '/inbox/templates'));\n    templates = Object.keys(templates).map(id => ({ id, ...templates[id] }));\n    this.setState({\n      templates, loading: false,\n      editingIndex: null, editingText: null\n    });\n  }\n\n  save = async () => {\n    const { templates, editingIndex, editingText } = this.state;\n    this.setState({ loading: true });\n    await makeRequest('post', '/inbox/templates', {}, {\n      id: templates[editingIndex].id,\n      text: editingText ? editingText : '(empty)',\n    });\n    this.loadTemplates();\n  }\n\n  fillToInput = (t) => () => {\n    window.setMessageInput(t.text);\n    this.setState({ showing: false });\n  }\n\n  render() {\n    const { loading, templates, editingIndex, editingText, showing } = this.state;\n    if (!showing) return null;\n\n    return <div style={{\n      position: 'fixed',\n      maxWidth: '100vw',\n      width: '600px',\n      height: '80vh',\n      Maxheight: '80vh',\n      background: 'white',\n      zIndex: '100',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      border: '#bbb solid 2px',\n      padding: '10px',\n      overflow: 'auto',\n    }}>\n      <button style={{ position: 'absolute', right: '10px' }} onClick={() => this.setState({ showing: false })}>[x] Thot</button>\n      <br/><br/>\n      {!loading && templates.map((t, i) => {\n        return editingIndex === i\n          ? <Card key={i}>\n            <textarea\n              style={{width: '100%'}}\n              value={editingText}\n              onChange={(e) => this.setState({ editingText: e.target.value })}\n              rows={5}\n            ></textarea>\n            <button onClick={this.save}>Save</button>\n            {'  '}\n            <button onClick={() => this.setState({ editingIndex: null, editingText: null })}>Cancel</button>\n          </Card>\n          : <Card key={i}>\n            <p style={{cursor: 'pointer'}} onClick={this.fillToInput(t)}>\n              {nl2br(t.text)}\n            </p>\n            <button onClick={() => this.setState({ editingIndex: i, editingText: t.text })}>Edit</button>\n            {'  '}\n            <button onClick={this.fillToInput(t)}>COPY &amp; PASTE</button>\n            {'  '}\n            {/* <button onClick={() => }>Delete</button> */}\n          </Card>\n      })}\n      {loading && <center><Loader /></center>}\n    </div>\n  }\n}\n\nexport default TongHopEvent;","import TongHopEvent from './components/messenger/custom/TongHopEvent';\n\n/*var ConfigDebug = {\n  BACKEND: 'http://localhost:5000/tonghopevent'\n}\nvar ConfigProduction = {\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent'\n}\n\nvar Config = ConfigDebug\nvar MODE = process.env.REACT_APP_MODE\nif (MODE === 'production')\n  Config = ConfigProduction*/\n\nconst Config = {\n  PROD: process.env.REACT_APP_MODE === 'production',\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent',\n  SOCKETIO: 'https://nuichatbot.herokuapp.com/',\n  SOCKETIO_MODULE: 'tonghopevent',\n  SELF_PAGE_ID: '242401956152220',\n  INBOX_TITLE: 'tonghopevent',\n  INBOX_SEND_ABILITY: true,\n  INBOX_UNREAD_ABILITY: true,\n  INBOX_IGNORED_CONVERSATION: 't_229190944264162',\n  INBOX_MARK_READ_ON_OPEN: false,\n  VERSION: '5.2',\n  CustomMessengerWidget: TongHopEvent,\n}\n\nexport default Config","import React from 'react'\n\nimport Card from '@material-ui/core/Card'\nimport Typography from '@material-ui/core/Typography'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\n\nclass Login extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {}\n    window.changeHeader('Login')\n  }\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value })\n  }\n\n  async onLogin() {\n    if (this.state.username === '' || this.state.password === '') {\n      return window.showAlert({\n        title: 'Please fill in',\n        text: 'Please fill in your username and password'\n      })\n    } else {\n      this.setState({loading: true})\n      const {username, password} = this.state\n      const res = await axios.post(`${Config.BACKEND}/login`, {\n        username, password\n      })\n      this.setState({loading: false})\n      if (res.data.token) {\n        Utils.setLocalStorage('token', res.data.token)\n        window.location.href = '#/'\n      } else {\n        return window.showAlert({\n          title: 'Error',\n          text: res.data.error\n        })\n      }\n    }\n  }\n\n  async onRegister() {}\n\n  render() {\n    var classes = {\n      input: {\n        marginBottom: '20px',\n        width: '500px',\n        maxWidth: '100%'\n      },\n      container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      cardStyle: {\n        maxWidth: '500px',\n        marginTop: '20px',\n        marginRight: 'auto',\n        marginLeft: 'auto',\n      }\n    }\n\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    const form = (\n      <div>\n        <Card style={classes.cardStyle}>\n          <CardContent>\n            <Typography variant=\"h5\" component=\"h2\">Admin - TongHopEvent</Typography>\n            <Typography color=\"textSecondary\">Please login to continue</Typography>\n            <TextField\n              label=\"Username\"\n              type=\"text\"\n              value={this.state.username}\n              style={classes.input}\n              onChange={this.handleChange('username')}\n              margin=\"normal\"\n            />\n            <TextField\n              label=\"Password\"\n              type=\"password\"\n              value={this.state.password}\n              style={classes.input}\n              onChange={this.handleChange('password')}\n              margin=\"normal\"\n            />\n            <div>\n              <Button onClick={this.onLogin.bind(this)} color='primary'>Login</Button>\n            </div>\n          </CardContent>        \n        </Card>\n      </div>\n    )\n\n    return this.state.loading ? loading : form\n  }\n}\n\nexport default Login","import React from 'react'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport PropTypes from 'prop-types'\n\nclass NoteEditDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      comment: props.doc.comment || '',\n    }\n  }\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    doc: PropTypes.any.isRequired,\n  }\n\n  render() {\n    const { comment } = this.state\n    const { onClose } = this.props\n\n    return (\n      <React.Fragment>\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Ghi ch</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Bn c th  li ghi ch cho bi vit ny. Ch c Admin mi nhn thy ghi ch.\n            </DialogContentText>\n            <TextField\n              multiline\n              rowsMax=\"20\"\n              value={comment}\n              onChange={event => {this.setState({ comment: event.target.value })}}\n              margin=\"normal\"\n              variant=\"outlined\"\n              fullWidth\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => onClose(false)} color=\"primary\">\n              Quay li\n            </Button>\n            <Button onClick={() => onClose(comment)} color=\"primary\">\n              LU GHI CH\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default NoteEditDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport Linkify from 'react-linkify'\nimport Fab from '@material-ui/core/Fab'\nimport Divider from '@material-ui/core/Divider'\nimport CheckIcon from '@material-ui/icons/Check'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport NoteEditDialog from './NoteEditDialog'\nimport './Doc.css'\n\nclass Doc extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: false,\n      isNoteEditOpen: false,\n      isCopied: false,\n      isExpanded: !this.props.admin,\n      copyContent: this.props.admin ? this.getCopyContent() : '',\n    }\n\n    if (this.props.doc && this.props.doc.linkfb) {\n      this.fbusername = Utils.extractFacebookUsername(this.props.doc.linkfb)\n    }\n\n    if (props.admin) {\n      if (props.doc.image)\n        this.state.publishAction = 'publish'\n      else if (this.fbusername)\n        this.state.publishAction = 'getimage'\n      else\n        this.state.publishAction = null\n    }\n  }\n\n  static propTypes = {\n    doc: PropTypes.object.isRequired,\n  }\n\n  async updateDocField(field, val, url, data) {\n    this.setState({loading: true})\n    const {doc} = this.props\n    const res = await axios.post(url, data)\n    if (res.data.success) {\n      const newDoc = JSON.parse(JSON.stringify(doc))\n      newDoc[field] = val\n      this.props.setDoc(this.props.i, newDoc)\n    } else {\n      window.showAlert({\n        title: 'Error',\n        text: res.data.error\n      })\n    }\n    this.setState({loading: false})\n  }\n\n  async toggleTrashDoc() {\n    const { doc } = this.props\n    const trashed = !doc.trashed\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'trashed', trashed,\n      `${Config.BACKEND}/doc/${doc.id}/trashed?token=${token}`, {trashed}\n    )\n  }\n\n  async toggleApproved() {\n    const {doc} = this.props\n    const approved = !doc.approved\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'approved', approved,\n      `${Config.BACKEND}/doc/${doc.id}/approved?token=${token}`, {approved}\n    )\n  }\n\n  async updateComment(cmt) {\n    const {doc} = this.props\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'comment', cmt || '',\n      `${Config.BACKEND}/doc/${doc.id}/comment?token=${token}`, {comment: cmt}\n    )\n  }\n\n  getCopyContent() {\n    const { doc } = this.props\n\n    const content = `-- ${doc.name} --\\n` +\n    `${this.generateLocationTag(doc)} ${doc.type.join(' ')}\\n\\n` +\n    ` M t: ${doc.description.trim()}\\n\\n` +\n    ` Link facebook: ${Utils.cleanFBLink(doc.linkfb)}\\n` +\n    ((doc.wanted && doc.wanted.length > 0) ? ' Yu cu i tng: ' + doc.wanted.join(', ').trim() + '\\n' : '') + \n    (!!doc.deadline ? ' Deadline tuyn nhn s: ' + doc.deadline.trim() + '\\n' : '') +\n    (!!doc.benefit ? ' Quyn li khi tham gia d n:\\n' + doc.benefit.trim() + '\\n' : '') +\n    `\\nTrackID:${doc.psid}:${doc.id}`\n\n    return content.trim()\n  }\n\n  generateLocationTag(doc) {\n    const { location, locations } = doc\n    const res = []\n    console.log(doc)\n    const addLoc = (loc) => {\n      res.push(loc === 'Ton quc'\n        ? `#d_n_ton_quc`\n        : `#d_n__${loc.replace(/\\s+/g, '_')}`\n      )\n    }\n    if (location) addLoc(location)\n    if (locations) locations.forEach(addLoc)\n    return res.join(' ')\n  }\n\n  getImageUrl = () => {\n    const { doc: { image } } = this.props\n    if (!image || image.length === 0) return null\n    return image[0].startsWith('http')\n      ? image[0] // normal image URL\n      : `https://drive.google.com/uc?export=view&id=${image[0]}`\n  }\n\n  _renderNonAdminInfo() {\n    const { doc } = this.props\n    return <p style={{\n      backgroundColor: doc.trashed ? '#ffa3a3' : '#eee',\n      padding: '10px',\n      width: '100%'}}\n    >\n      <center>\n        {doc.trashed ? 'Bi vit ny  b t chi'\n          : (doc.approved\n            ? 'Bi vit ny  c duyt v s sm c ng ln fanpage'\n            : 'Bi vit ny ang i  c kim duyt')\n        }\n      </center>\n    </p>\n  }\n\n  _renderDuplicatedWarningIcon() {\n    const { doc, duplicateHelper, openDuplicateDocDialog } = this.props\n    if (!duplicateHelper || doc.approved) return null\n    const duplicatedDocs = duplicateHelper.checkDoc(doc)\n    if (!duplicatedDocs) return null\n    else return (\n      <Fab\n        size=\"small\"\n        color=\"primary\"\n        style={{marginRight: '15px'}}\n        onClick={() => openDuplicateDocDialog(duplicatedDocs, doc.id)}\n      >\n        <WarningIcon />\n      </Fab>\n    )\n  }\n\n  _renderPostContent() {\n    const { doc } = this.props\n    return (\n      <React.Fragment>\n        <p>{this.generateLocationTag(doc)} {doc.type.join(' ')}</p>\n        <p>{Utils.nl2br(doc.description)}</p>\n        <p>\n           Link facebook: {Utils.cleanFBLink(doc.linkfb)}<br/>\n          {(doc.wanted && doc.wanted.length > 0) && <span> Yu cu i tng: {doc.wanted.join(', ')}<br/></span>}\n          {!!doc.deadline && <span> Deadline tuyn nhn s: {Utils.nl2br(doc.deadline)}<br/></span>}\n          {!!doc.benefit && <span> Quyn li khi tham gia d n: <br/>{Utils.nl2br(doc.benefit)}<br/></span>}\n        </p>\n        {this.props.admin && <p>TrackID:{doc.psid}:{doc.id}</p>}\n        {!!doc.image && <p>\n          nh tu chn: <a href={this.getImageUrl()} target=\"_blank\" rel=\"noopener noreferrer\">Bm vo y</a>\n        </p>}\n        <p>\n          (Gi lc {Utils.getTimeStr(doc.created)} ngy {Utils.getDateStr(doc.created)})\n          {!!doc.org && <span><br/>n v t chc: {Utils.getOrgName(doc)}</span>}\n        </p>\n        {(!this.props.admin && !!doc.feedback) && <p> Cu hi, gp : {doc.feedback}</p>}\n      </React.Fragment>\n    )\n  }\n\n  _renderMainCard() {\n    const { doc } = this.props\n    const { isExpanded, copyContent, publishAction, isNoteEditOpen } = this.state\n    const gotoPublish = this.props.gotoPublish || (() => {})\n\n    const componentDecorator = (href, text, key) => (\n      <a href={href} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\n        {text}\n      </a>\n    )\n\n    /* TEXT CONTENT (visible for all) */\n\n    const content = <div>\n      <div style={isExpanded ? null : {maxHeight: '315px', overflow:'hidden', position: 'relative'}} className={isExpanded ? null : 'fade-out'}>\n        {!this.props.admin && this._renderNonAdminInfo()}\n        <p>\n          {doc.approved && <Fab size=\"small\" color=\"primary\" style={{marginRight: '15px'}} disabled>\n            <CheckIcon />\n          </Fab>}\n          {this._renderDuplicatedWarningIcon()}\n          <b>-- {doc.name} --</b>\n          {doc.plan && <p><span className='doc-plan'> Gi {doc.plan.toUpperCase()}</span></p>}\n        </p>\n        <Linkify componentDecorator={componentDecorator}>\n          {this._renderPostContent()}\n        </Linkify>\n      </div>\n      {this.props.admin && <div>\n        <center>\n          <Button onClick={() => this.setState({isExpanded: !isExpanded})}>\n            {isExpanded ? 'Thu gn' : 'Hin thm ...'}\n          </Button>\n        </center>\n      </div>}\n      <Divider />\n\n      {/* ADMIN BUTTONS */}\n\n      {this.props.admin &&\n        <React.Fragment>\n          {!this.state.loading ? <div>\n            {doc.comment && doc.comment.trim().length > 0 && <p><b> Ghi ch:</b> {Utils.nl2br(doc.comment)}</p>}\n            {!!doc.feedback && <p> Cu hi, gp : {doc.feedback}</p>}\n            <Button variant=\"outlined\" onClick={this.toggleTrashDoc.bind(this)} color='primary'>Xa</Button>\n            <Button variant=\"outlined\" onClick={this.toggleApproved.bind(this)} color='primary'>Tick</Button>\n            {publishAction &&\n              <Button variant=\"outlined\" onClick={() => {gotoPublish({\n                id: doc.id,\n                caption: copyContent,\n                url: this.getImageUrl(),\n                fbusername: this.fbusername,\n                psid: doc.psid,\n                feedback: doc.feedback,\n              }, publishAction)}} color='primary'>ng bi</Button>\n            }\n            <Button variant=\"outlined\" onClick={() => this.setState({isNoteEditOpen: true})} color='primary'>Ghi ch</Button>\n            <Button variant=\"outlined\" onClick={() => this.props.openToolsDialog(doc)} color='primary'>+</Button>\n          </div>\n          : <center>\n            <CircularProgress />\n          </center>}\n        </React.Fragment>\n      }\n    </div>\n\n    /* CARD BACKGROUND */\n\n    return (\n      <div style={{paddingBottom: '20px'}}>\n        <Card>\n          <CardContent\n            style={{backgroundColor: (doc.approved && this.props.admin) ? '#cfd8dc' : '#fff'}}\n            className={(doc.approved && this.props.admin) ? 'approved' : null}\n          >\n            {content}\n          </CardContent>\n        </Card>\n        {isNoteEditOpen && <NoteEditDialog doc={doc} onClose={(cmt) => {\n          this.setState({isNoteEditOpen: false})\n          if (cmt !== false) this.updateComment(cmt)\n        }}/>}\n      </div>\n    )\n  }\n\n  _renderTrashedDoc() {\n    const { doc } = this.props\n    if (this.state.loading) return <center><CircularProgress /></center>\n    else return <p>\n      <b>( xa)</b> {doc.name} &nbsp;&nbsp;&nbsp;\n      <Button\n        variant=\"outlined\"\n        size=\"small\"\n        color=\"primary\"\n        className=\"restore-btn\"\n        onClick={this.toggleTrashDoc.bind(this)}\n      >\n        Khi phc\n      </Button>\n    </p>\n  }\n\n  render() {\n    const { doc, admin } = this.props\n    return doc.trashed && admin\n      ? this._renderTrashedDoc()\n      : this._renderMainCard()\n  }\n}\n\nexport default Doc","import React from 'react'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport TextField from '@material-ui/core/TextField'\nimport Utils from '../Utils'\nimport Config from '../Config'\nimport PropTypes from 'prop-types'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport './ToolsDialog.css'\n\nconst copyObj = (obj) => JSON.parse(JSON.stringify(obj))\n\nconst TEMPLATES = [\n  {\n    desc: 'Bo trng bi',\n    text: ' c ngi nhp thng tin ca d n / cuc thi / s kin ny. Khng bit bn c mun b sung hay thay i g khng nh?\\n\\nNu khng, chng mnh s xa thng tin bn  nhp  khng b trng vi bi  ng.'\n  },{\n    desc: 'Bo b xa v ko ph hp',\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn  b xa do khng ph hp vi iu khon s dng ca chng mnh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\n  }, {\n    desc: 'Bo d n c li nhun',\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn c iu hnh bi mt t chc / c nhn hot ng c li nhun. Da theo iu khon s dng ca chng mnh, bi ca bn phi tr ph 100.000 VN  c th c ng bi ln fanpage nh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\n  },\n  {\n    desc: 'Bo thiu thng tin',\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, do bi vit ca bn cn thiu mt s thng tin nn chng mnh cha th ph duyt c. Bn hy in li form vi y  thng tin hn nh!\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\n  },\n  {\n    desc: 'in li (khng paste link)',\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, chng mnh khng th x l nu bn ch copy-paste mi link bi vit. Bn hy in li form tht r rng, bao gm c phn gii thiu,  ngha d n / cuc thi / s kin nh.\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\n  },\n]\n\nclass ToolsDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true,\n      error: false,\n      showTemplates: true,\n      sendInboxData: null,\n      inboxData: {},\n      isLinkCopied: false,\n    }\n  }\n\n  static propTypes = {\n    open: PropTypes.bool.isRequired,\n    closeToolsDialog: PropTypes.func.isRequired,\n    name: PropTypes.string,\n    psid: PropTypes.string,\n    doc: PropTypes.any.isRequired,\n  }\n\n  async fetchData() {\n    this.setState({ error: false, loading: true, showTemplates: true, isLinkCopied: false })\n    const response = await Utils.makeRequest(\n      `${Config.BACKEND}/inbox/${this.props.psid}`\n    )\n    const { data } = response\n    if (data && Object.keys(data).length > 0) {\n      this.setState({\n        loading: false,\n        error: false,\n        inboxData: data,\n      })\n    } else {\n      this.setState({\n        loading: false,\n        error: true,\n      })\n    }\n  }\n\n  async sendInbox() {\n    const inboxData = copyObj(this.state.sendInboxData)\n    this.setState({sendInboxData: null})\n    this.props.closeToolsDialog()\n    const res = await Utils.makeRequest(\n      `${Config.BACKEND}/inbox/${this.props.psid}`,\n      'post', { message: ' ' + inboxData.text }\n    )\n    if (res.data && res.data.success) {\n      window.toastr.success(' gi tin nhn thnh cng!')\n    } else {\n      window.toastr.error(' C li xy ra, ko th gi tin nhn ')\n    }\n  }\n\n  goToPageInbox() {\n    Utils.goToInbox(this.state.inboxData);\n    this.props.closeToolsDialog();\n  }\n\n  _renderSendInboxDialogAsk() {\n    const { sendInboxData } = this.state;\n    const isWithin24HWindow = (Date.now() - this.props.doc.created) < (86400 * 1000)\n    const handleClose = () => this.setState({sendInboxData: null});\n    if (!sendInboxData) return null;\n    else return <Dialog open={!!sendInboxData} onClose={handleClose}>\n      <DialogTitle id=\"alert-dialog-title\">{sendInboxData.desc}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {\n            isWithin24HWindow\n             ? 'Gi tin nhn c ni dung nh sau (c th sa):'\n             : 'Khng th t ng gi tin nhn. Hy copy-paste v inbox th cng:'\n          }<br/><br/>\n          <TextField\n            multiline\n            rowsMax=\"20\"\n            value={sendInboxData.text}\n            onChange={event => {this.setState({\n              sendInboxData: {\n                ...sendInboxData,\n                text: event.target.value,\n              }\n            })}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          />\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\"> Quay li </Button>\n        {!isWithin24HWindow\n          && <Button onClick={() => Utils.copyTextToClipboard(sendInboxData.text)} color=\"primary\"> Copy tin nhn </Button>\n        }\n        {isWithin24HWindow\n          ? <Button onClick={() => this.sendInbox()} color=\"primary\"> GI </Button>\n          : <Button onClick={() => this.goToPageInbox()} color=\"primary\"> i ti inbox </Button>\n        }\n      </DialogActions>\n    </Dialog>\n  }\n\n  _renderError() {\n    return (\n      <List>\n        <ListItem button>\n          <ListItemText primary=\"(C li xy ra)\" />\n        </ListItem>\n        <ListItem button onClick={this.props.closeToolsDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  _renderContent() {\n    const { inboxData, showTemplates, isLinkCopied } = this.state\n\n    return (\n      <List>\n        <ListItem button onClick={this.goToPageInbox.bind(this)}>\n          <ListItemText\n            primary=\"i ti inbox\"\n            secondary={`Tn FB: ${inboxData.senders.data[0].name}`}\n          />\n        </ListItem>\n        <Divider />\n        {!showTemplates && <ListItem button onClick={() => this.setState({showTemplates: true})}>\n          <ListItemText primary={` (Hin cc mu tin nhn)`} />\n        </ListItem>}\n        {showTemplates && TEMPLATES.map((t, i) => {\n          return <ListItem button onClick={() => this.setState({ sendInboxData: t })} key={i}>\n            <ListItemText primary={` ${t.desc}`} />\n          </ListItem>\n        })}\n        <Divider />\n          <CopyToClipboard\n            text={`${window.location.protocol}//${window.location.host}/data/#/view/${this.props.doc.id}`}\n            onCopy={() => this.setState({isLinkCopied: true})}\n          >\n            <ListItem button>\n              <ListItemText primary={isLinkCopied ? \"( copy link)\" : \"Copy link bi vit\"} />\n            </ListItem>\n          </CopyToClipboard>\n        <Divider />\n        <ListItem button onClick={this.props.closeToolsDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  render() {\n    const { name, open } = this.props\n\n    return (\n      <React.Fragment>\n        {this._renderSendInboxDialogAsk()}\n        <Dialog\n          open={open}\n          onEnter={this.fetchData.bind(this)}\n          onBackdropClick={this.props.closeToolsDialog}\n          className=\"tools-dialog\"\n          aria-labelledby=\"simple-dialog-title\"\n        >\n          <DialogTitle id=\"simple-dialog-title\">{name ? name.substr(0,24) : ''}</DialogTitle>\n          {this.state.loading\n            ? <center><CircularProgress /></center>\n            : this.state.error ? this._renderError() : this._renderContent()\n          }\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default ToolsDialog\n","import React from 'react'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Dialog from '@material-ui/core/Dialog'\nimport Divider from '@material-ui/core/Divider'\nimport PropTypes from 'prop-types'\nimport Utils from '../Utils'\n\nclass DuplicateDocDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  static propTypes = {\n    docs: PropTypes.any,\n    selectedDocID: PropTypes.any,\n    closeDuplicateDocDialog: PropTypes.func.isRequired,\n  }\n\n  _renderContent() {\n    const { docs, selectedDocID } = this.props\n    const now = Date.now()\n\n    return (\n      <List>\n        {docs.map((doc) => {\n          if (doc.id === selectedDocID) return null\n          const daysAgo = Math.floor((now - doc.created) / 86400 / 1000)\n          return <ListItem button onClick={\n            () => window.open(`/data/#/view/${doc.id}`, '_blank')\n          } key={doc.id}>\n            <ListItemText\n              primary={doc.name}\n              secondary={`${\n                Utils.getDateStr(doc.created)\n              } lc ${\n                Utils.getTimeStr(doc.created)\n              } ${daysAgo > 0 ? ` (${daysAgo} ngy trc)` : ''}`}\n            />\n          </ListItem>\n        })}\n        <Divider />\n        <ListItem button onClick={this.props.closeDuplicateDocDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  render() {\n    const { docs } = this.props\n\n    return (\n      <Dialog\n        open={!!docs}\n        aria-labelledby=\"simple-dialog-title\"\n      >\n        <DialogTitle id=\"simple-dialog-title\">Bi ng trng</DialogTitle>\n        <DialogContent>\n          Bi ng ny c th b trng vi nhng bi sau:\n        </DialogContent>\n        {docs && this._renderContent()}\n      </Dialog>\n    )\n  }\n}\n\nexport default DuplicateDocDialog\n","\r\nimport Utils from './Utils'\r\n\r\nclass DuplicateHelper {\r\n  seen = {}\r\n\r\n  pushLookbackData(lookbackArr) {\r\n    for (const doc of lookbackArr) {\r\n      const { fbname } = doc;\r\n      if (this.seen[fbname]) {\r\n        this.seen[fbname].push(doc)\r\n      } else {\r\n        this.seen[fbname] = [doc]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remember that we've seen this doc\r\n   * @param {*} doc \r\n   */\r\n  pushDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    if (!uname) return null\r\n    if (this.seen[uname]) {\r\n      this.seen[uname].push(doc)\r\n    } else {\r\n      this.seen[uname] = [doc]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns arr of docs if doc is seen\r\n   * Returns null if doc isn't seen\r\n   * @param {*} doc \r\n   */\r\n  checkDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    const arr = this.seen[uname]\r\n    return (arr && arr.length > 1) ? arr : null\r\n  }\r\n\r\n  /**\r\n   * Clear all remembered docs\r\n   */\r\n  clear() {\r\n    this.seen = {}\r\n  }\r\n}\r\n\r\nexport default DuplicateHelper","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Doc from '../components/Doc'\nimport ToolsDialog from '../components/ToolsDialog'\nimport DuplicateDocDialog from '../components/DuplicateDocDialog'\nimport DuplicateHelper from '../DuplicateHelper'\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\n\nclass Home extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      list: [],\n      toolsDialogOpen: false,\n      toolsDialogDoc: {},\n      duplicateHelper: new DuplicateHelper(),\n      duplicateDocDialog: null,\n      selectedDocID: '',\n    }\n    window.changeHeader('Qun l d liu - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadData()\n    window.markDocApproved = this.markDocApproved\n  }\n\n  componentWillUnmount() {\n    window.markDocApproved = null\n  }\n\n  markDocApproved = (id) => {\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\n    window.DOCID_APPROVED[id] = true\n    this.dispatchDocApproved()\n  }\n\n  dispatchDocApproved = () => {\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\n    this.setState(prevState => ({\n      list: prevState.list.map(doc => {\n        if (window.DOCID_APPROVED[doc.id]) doc.approved = true\n        return doc\n      })\n    }))\n  }\n\n  async loadData() {\n    const duplicateHelper = new DuplicateHelper()\n    const token = Utils.getToken()\n    const [res, {data: lookbackArr}] = await Promise.all([\n      axios.get(`${Config.BACKEND}/feed?token=${token}`),\n      axios.get(`${Config.BACKEND}/lookback?token=${token}`),\n    ])\n    Utils.checkError(res)\n    duplicateHelper.pushLookbackData(lookbackArr);\n    this.setState({\n      loading: false,\n      list: res.data,\n      duplicateHelper,\n    })\n    this.dispatchDocApproved()\n  }\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value })\n  }\n\n  onClickEdit() {\n    this.setState({edit: true})\n  }\n\n  setDoc(i, data) {\n    this.setState(state => {\n      const list = state.list\n      list[i] = data\n      return {list}\n    })\n  }\n\n  openToolsDialog(doc) {\n    this.setState({\n      toolsDialogOpen: true,\n      toolsDialogDoc: doc\n    })\n  }\n\n  openDuplicateDocDialog(docs, docid) {\n    this.setState({\n      duplicateDocDialog: docs,\n      selectedDocID: docid,\n    })\n  }\n\n  render() {\n    var classes = {\n      input: {\n        marginBottom: '20px',\n        width: '500px',\n        maxWidth: '100%'\n      },\n      container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      cardStyle: {\n        //maxWidth: '800px',\n        marginTop: '20px',\n        marginRight: '20px',\n        marginLeft: '20px',\n      }\n    }\n\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    const { gotoPublish } = this.props\n    const { duplicateDocDialog, duplicateHelper, selectedDocID } = this.state\n    const home = (\n      <React.Fragment>\n        <div style={classes.cardStyle}>\n          { this.state.list.length === 0 && <center><h2>Cha c bi ng no</h2></center> }\n          <ResponsiveMasonry\n            columnsCountBreakPoints={{350: 1, 1000: 2, 1550: 3}}\n          >\n            <Masonry gutter=\"10px\">\n              {this.state.list.map((doc, i) => {\n                return doc ? (\n                  <div key={doc.id}>\n                    <Doc\n                      doc={doc}\n                      setDoc={this.setDoc.bind(this)}\n                      i={i}\n                      admin\n                      gotoPublish={gotoPublish}\n                      openToolsDialog={this.openToolsDialog.bind(this)}\n                      openDuplicateDocDialog={this.openDuplicateDocDialog.bind(this)}\n                      duplicateHelper={duplicateHelper}\n                    />\n                  </div>\n                ) : null\n              })}\n            </Masonry>\n          </ResponsiveMasonry>\n        </div>\n        <ToolsDialog\n          open={this.state.toolsDialogOpen}\n          closeToolsDialog={() => this.setState({toolsDialogOpen: false})}\n          name={this.state.toolsDialogDoc.name}\n          psid={this.state.toolsDialogDoc.psid}\n          doc={this.state.toolsDialogDoc}\n        />\n        <DuplicateDocDialog\n          docs={duplicateDocDialog}\n          selectedDocID={selectedDocID}\n          closeDuplicateDocDialog={() => this.setState({duplicateDocDialog: null})}\n        />\n      </React.Fragment>\n    )\n\n    return this.state.loading ? loading : home\n  }\n}\n\nexport default Home","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Doc from '../components/Doc'\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass View extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      doc: {},\n    }\n    window.changeHeader('Qun l d liu - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadData()\n  }\n\n  async loadData() {\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${Config.BACKEND}/doc/${this.props.id}?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, doc: null})\n    else\n      this.setState({loading: false, doc: res.data})\n  }\n\n  _renderDocView() {\n    return (\n      <div style={classes.cardStyle}>\n        <Doc doc={this.state.doc || {}} />\n      </div>\n    )\n  }\n\n  _renderDocNotFound() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        Bi ng ny khng tn ti hoc  b xo<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    return this.state.loading ? loading : \n      this.state.doc ? this._renderDocView() : this._renderDocNotFound()\n  }\n}\n\nexport default View","import 'date-fns';\nimport React from 'react';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nclass MaterialUIPickers extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      publish_time: new Date(\n        Date.now() + 20 * 60 * 1000\n      )\n    }\n  }\n\n  componentDidMount() {\n    this.props.handleDateChange(this.state.publish_time.getTime() / 1000)\n  }\n\n  handleDateChange(date) {\n    this.setState({publish_time: date})\n    this.props.handleDateChange(date.getTime() / 1000)\n  }\n\n  render() {\n    const { publish_time } = this.state;\n\n    return (\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\n        <KeyboardDatePicker\n          margin=\"normal\"\n          id=\"mui-pickers-date\"\n          label=\"Date picker\"\n          value={publish_time}\n          onChange={this.handleDateChange.bind(this)}\n          KeyboardButtonProps={{\n            'aria-label': 'change date',\n          }}\n        />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n        <KeyboardTimePicker\n          margin=\"normal\"\n          id=\"mui-pickers-time\"\n          label=\"Time picker\"\n          value={publish_time}\n          onChange={this.handleDateChange.bind(this)}\n          KeyboardButtonProps={{\n            'aria-label': 'change time',\n          }}\n        />\n      </MuiPickersUtilsProvider>\n    );\n  }\n}\n\nexport default MaterialUIPickers;","import React, {useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport Utils from '../Utils';\nimport DatePicker from '../components/DatePicker';\n\nconst ONE_DAY_IN_MS = 86400 * 1000;\nconst INTERVAL_BETWEEN_POSTS_IN_MS = 10 * 60000; // 10 mins\nconst FIX_TIME_OFFSET = -7 * 60 * 60000; // GMT+7\nconst MIN_SCHEDULED_TIME_INTERVAL = 20 * 60000; // must schedule at least 20 mins in advance\nconst NUMBER_OF_DAYS = 7;\nconst SLOTS = [\n  { hrs: 6,  min: 0,  priority: 3 },\n  { hrs: 6,  min: 20, priority: 2 },\n  { hrs: 6,  min: 40, priority: 1 },\n  { hrs: 7,  min: 0,  priority: 1 },\n  { hrs: 19, min: 0,  priority: 3 },\n  { hrs: 19, min: 30, priority: 4 },\n  { hrs: 20, min: 0,  priority: 7 },\n  { hrs: 20, min: 30, priority: 7 },\n  { hrs: 20, min: 45, priority: 4 },\n  { hrs: 21, min: 0,  priority: 9 },\n  { hrs: 21, min: 15, priority: 4 },\n  { hrs: 21, min: 30, priority: 8 },\n  { hrs: 21, min: 50, priority: 4 },\n  { hrs: 22, min: 10, priority: 1 },\n].map(s => ({...s, timeInDay: (s.hrs*3600 + s.min*60)*1000 }));\n\nconst getSuggestedSlot = (_timeslots, takenSlots, feedback) => {\n  const userSuggestedTime = getDayFromFeedback(feedback);\n  const timeslots = JSON.parse(JSON.stringify(_timeslots));\n  for (const {slotsOfDay} of timeslots) {\n    slotsOfDay.sort((a, b) => (a.priority < b.priority) ? 1 : -1);\n    for (const {time} of slotsOfDay) {\n      if (\n        !takenSlots[time]\n        && time > userSuggestedTime\n      ) return time;\n    }\n  }\n  return null;\n};\n\nconst getDayFromFeedback = (feedback) => {\n  const matched = feedback.match(/([0-9]+)\\/([0-9]+)/);\n  console.log(matched);\n  if (!matched) return 0;\n  const d = new Date(2021, parseInt(matched[2]) - 1, parseInt(matched[1]), 0, 0, 0, 0);\n  d.setTime(d.getTime() + d.getTimezoneOffset()*60000 - FIX_TIME_OFFSET)\n  console.log(d);\n  return d.getTime();\n};\n\nconst generateTimeslots = () => {\n  const now = Date.now();\n  const beginOfToday = Math.floor(now / ONE_DAY_IN_MS) * ONE_DAY_IN_MS;\n\n  const timeslots = [];\n  let day = 0;\n  while (timeslots.length < NUMBER_OF_DAYS) {\n    const startAt = beginOfToday + day*ONE_DAY_IN_MS + FIX_TIME_OFFSET;\n    const slotsOfDay = [];\n    for (const s of SLOTS) {\n      const time = startAt + s.timeInDay;\n      if (time - now > MIN_SCHEDULED_TIME_INTERVAL) {\n        slotsOfDay.push({...s, time});\n      }\n    }\n    if (slotsOfDay.length > 2) timeslots.push({\n      startAt: startAt - FIX_TIME_OFFSET,\n      slotsOfDay,\n    });\n    day++;\n  }\n\n  return timeslots;\n};\n\nconst getTakenSlotList = (stat, timeslots) => {\n  const res = {};\n  /**\n   *    +- INTERVAL_BETWEEN_POSTS_IN_MS\n   *                 <-x---|----->\n   * --|---------------|---|--\n   * time             post time\n   */\n  for (const {slotsOfDay} of timeslots) {\n    for (const {time} of slotsOfDay) {\n      const isSlotTaken = stat.some(scheduledTime =>\n        scheduledTime - INTERVAL_BETWEEN_POSTS_IN_MS < time\n        && time < scheduledTime + INTERVAL_BETWEEN_POSTS_IN_MS\n      );\n      if (isSlotTaken) res[time] = true;\n    }\n  }\n  return res;\n};\n\nconst ScheduledList = ({stat}) => {\n  const statAsc = JSON.parse(JSON.stringify(stat)).sort();\n  return <>\n    <p><b>Cc bi ng  ln lch</b></p>\n    <ul>\n      {statAsc.map(s => {\n        return <li key={s}>{Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</li>\n      })}\n    </ul>\n  </>;\n};\n\n// statArr = [int, int...]\nexport const TimeslotPicker = ({ statArr, value, onChange, feedback }) => {\n  const [useOldPicker, setUseOldPicker] = useState(false);\n  const [showMoreSlots, setShowMoreSlots] = useState(false);\n  const [timeslots] = useState(generateTimeslots());\n  const [takenSlots, setTakenSlots] = useState({});\n  const [suggestedSlot, setSuggestedSlot] = useState(null);\n  const val = value * 1000;\n\n  useEffect(() => {\n    const stat = JSON.parse(JSON.stringify(statArr));\n    setTakenSlots(getTakenSlotList(stat, timeslots));\n    const suggested = getSuggestedSlot(timeslots, takenSlots, feedback);\n    if (suggested) {\n      setSuggestedSlot(suggested);\n      setTimeout(() => onChange(Math.round(suggested/1000)), 200);\n    }\n  // eslint-disable-next-line\n  }, [statArr]);\n\n  return <>\n    <p>\n      <b>Ln lch bi ng</b>{'   '}\n      <Button\n        variant='outlined'\n        size='small'\n        onClick={() => setUseOldPicker(!useOldPicker)}\n      >{useOldPicker ? 'Chn gi theo slot' : 'Chn gi th cng'}</Button>\n    </p>\n\n    {feedback && <p>\n      Gp  t ngi gi: {feedback}\n    </p>}\n\n    {!useOldPicker && <>\n      {suggestedSlot && <p>\n        Gi ng bi do my gi : {Utils.getTimeStr(suggestedSlot, 7)} ngy {Utils.getDateStr(suggestedSlot, 7)}\n      </p>}\n      {timeslots.map((day, i) => (!showMoreSlots && i < 3) || showMoreSlots\n        ? <p key={day.startAt}>\n          <b>{Utils.getDateStr(day.startAt, 7)}</b> (GMT+7)<br/>\n          {day.slotsOfDay.map(({time}) => <React.Fragment key={time}>\n            <Button\n              variant='outlined'\n              size='small'\n              color='primary'\n              className={val === time ? 'timeslot-selected' : ''}\n              onClick={() => onChange(Math.round(time/1000))}\n              disabled={takenSlots[time]}\n            >{Utils.getTimeStr(time, 7)}</Button>\n            {'  '}\n          </React.Fragment>)}\n        </p> : null\n      )}\n      {!showMoreSlots && <Button\n        variant='outlined'\n        size='small'\n        color='primary'\n        onClick={() => setShowMoreSlots(true)}\n      >+ Hin thm ngy</Button>}\n    </>}\n\n    {useOldPicker && <>\n      <DatePicker\n        handleDateChange={(date) => onChange(Math.round(date))}\n      />\n      <ScheduledList stat={statArr} />\n    </>}\n  </>\n}\n","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Img from 'react-image'\nimport { TimeslotPicker } from '../components/Timeslots'\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\n\nconst classes = {\n  cardStyle: {\n    marginTop: '20px',\n    marginRight: '1em',\n    marginLeft: '1em',\n    display: 'flex',\n    flexWrap: 'wrap',\n  }\n}\n\nclass Publish extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      completed: false,\n      loading: true,\n      stat: [],\n      inboxData: null,\n    }\n    if (props.data) {\n      this.state.id = props.data.id\n      this.state.caption = props.data.caption\n      this.state.url = props.data.url\n      this.state.psid = props.data.psid\n      this.state.feedback = props.data.feedback || ''\n      this.state.scheduled_publish_time = 0\n    }\n    window.changeHeader('Cng c ng bi - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadStat()\n    this.loadInbox()\n  }\n\n  async loadStat() {\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${Config.BACKEND}/publish/stat?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, stat: []})\n    else\n      this.setState({loading: false, stat: res.data})\n  }\n\n  async loadInbox() {\n    const { data } = await Utils.makeRequest(`${Config.BACKEND}/inbox/${this.state.psid}`)\n    if (data && Object.keys(data).length > 0) {\n      this.setState({ inboxData: data })\n    }\n  }\n\n  getErrorMessage = (data) => {\n    if (data?.error?.message) {\n      return 'L do: ' + data.error.message\n    } else {\n      return 'Hy bo li cho Nui.'\n    }\n  }\n  \n  async doPublish() {\n    //this.setState({loading: true})\n    const token = Utils.getLocalStorage('token')\n    const idInDatabase = this.state.id\n    const postData = {\n      caption: this.state.caption,\n      url: this.state.url,\n      scheduled_publish_time: this.state.scheduled_publish_time\n    }\n    const toast = window.toastr.info('ang ng bi...', 'Publish tool', {timeOut: 60000})\n    window.location.hash = '#/manage'\n    const { data } = await axios.post(`${Config.BACKEND}/publish?token=${token}`, postData)\n    window.toastr.clear(toast)\n    if (data.id) {\n      window.toastr.success(' ng bi thnh cng!', 'Publish tool')\n      if (window.markDocApproved) window.markDocApproved(idInDatabase)\n    } else {\n      window.toastr.error('Li: Khng th ng bi. ' + this.getErrorMessage(data), 'Publish tool', {timeOut: 20000})\n    }\n  }\n\n  _renderComposerCard() {\n    const imgStyle = {\n      height: '300px',\n      maxWidth: '100%',\n    }\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/manage'}>Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Son bi ng</b>\n          </p>\n          <center>\n            <Img alt=''\n              src={this.state.url}\n              style={imgStyle}\n              loader={<div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>}\n            />  \n          </center>\n          <TextField\n            label=\"Ni dung bi ng\"\n            multiline\n            rowsMax=\"20\"\n            value={this.state.caption}\n            onChange={event => {this.setState({ caption: event.target.value });}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          />\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderPublishCard() {\n    const { scheduled_publish_time, stat, feedback } = this.state\n    const isDateOK = (scheduled_publish_time - (Date.now() / 1000)) > 15*60\n    const s = scheduled_publish_time * 1000\n\n    return (\n      <Card>\n        <CardContent>\n          <TimeslotPicker\n            value={scheduled_publish_time}\n            statArr={stat}\n            onChange={(time) => this.setState({ scheduled_publish_time: time })}\n            feedback={feedback}\n          />\n          <br/><br/>\n          {isDateOK && <Button variant='contained' color=\"primary\" onClick={() => {\n            window.showAlert({\n              title: 'Xc nhn ng bi',\n              text: `ng bi vo lc ${Utils.getTimeStr(s)} ngy ${Utils.getDateStr(s)} ?`,\n              onClickOK: this.doPublish.bind(this),\n              showCancel: true\n            })\n          }}>ng bi</Button>}\n          {!isDateOK && scheduled_publish_time > 0\n            && <p style={{color: 'red'}}>Gi ng bi phi cch hin ti t nht 15 pht</p>\n          }\n        </CardContent>\n      </Card>\n    )\n  }\n\n  _renderCompletedCard() {\n    const { scheduled_publish_time } = this.state\n    const s = scheduled_publish_time * 1000\n\n    return (\n      <div style={classes.cardStyle}>\n        <Card>\n          <CardContent>\n            <h2>ng bi thnh cng</h2>\n            <p>Bi vit  c t gi  ng vo lc {Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</p>\n            <Button\n              variant='outlined'\n              onClick={() => window.location.hash = '#/'}>Tr v trang ch</Button>\n          </CardContent>\n        </Card>\n      <br/><br/>\n      </div>\n    )\n  }\n\n  _renderInboxCard() {\n    const { inboxData } = this.state;\n    return (\n      <Card>\n        <CardContent>\n          {!inboxData && <center><CircularProgress /></center>}\n          {inboxData && <>\n            <b>Tin nhn mi nht ( trn l mi, di l c)</b>\n            {'   '}\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => Utils.goToInbox(inboxData)}\n            >M inbox</Button>\n            <br/>\n            ------<br/>\n            {inboxData.messages.data.map(msg => <p key={msg.id}>\n              <b>{msg.from.name}</b>: {msg.message}\n            </p>)}\n          </>}\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderMain() {\n    return (\n      <div style={{margin: '20px'}}>\n        <ResponsiveMasonry\n          columnsCountBreakPoints={{350: 1, 750: 2, 900: 2}}\n        >\n          <Masonry gutter=\"10px\">\n            {this._renderComposerCard()}\n            <div></div> {/* this is to make sure inboxCard is on the right */}\n            {this._renderPublishCard()}\n            {this._renderInboxCard()}\n          </Masonry>\n        </ResponsiveMasonry>\n        <br/><br/><br/>\n      </div>\n    )\n  }\n\n  _renderError() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        Hy vo trang ch v th li<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    if (this.state.loading) return loading\n    if (this.state.completed) return this._renderCompletedCard()\n\n    return this.props.data ? this._renderMain() : this._renderError()\n  }\n}\n\nexport default Publish","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Img from 'react-image'\n\nconst imgStyle = {\n  maxHeight: '300px',\n  maxWidth: '100%',\n}\n\nconst imgLoaderStyle = {\n  height: '300px',\n  width: '100%',\n}\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass GetImage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGetToken: false,\n      access_token: '',\n      completed: false,\n      loading: true,\n      imgs: [],\n    }\n    if (props.data) {\n      this.state.caption = props.data.caption\n      this.state.fbusername = props.data.fbusername\n    } else {\n      this.state.error = 'Hy v trang ch v th li'\n    }\n    window.changeHeader('Chn nh bi ng - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.fetchFacebookApi()\n  }\n\n  async fetchFacebookApi() {\n    const fbtoken = Utils.getLocalStorage('fbtoken')\n    try {\n      const res = await axios.get(`https://graph.facebook.com/${this.state.fbusername}?fields=feed.limit(20)%7Bfull_picture%7D%2Cpicture.width(720)%7Burl%7D&access_token=${fbtoken}`)\n      if (res.data.error) {\n        this.setState({loading: false, showGetToken: true})\n      } else {\n        const imgs = res.data.feed.data.map(post => post.full_picture)\n        imgs.unshift(res.data.picture.data.url)\n        this.setState({\n          loading: false,\n          showGetToken: false,\n          imgs: imgs,\n        })\n      }\n    } catch (e) {\n      if (e.response.status === 404) {\n        this.setState({loading: false, error: 'Khng th m trang facebook ny'})\n      } else {\n        this.setState({loading: false, showGetToken: true})\n      }\n    }\n  }\n\n  onSaveToken() {\n    let fbtoken = this.state.access_token\n    fbtoken = fbtoken.match(/EA[a-zA-Z0-9]+/)\n    try {\n      Utils.setLocalStorage('fbtoken', fbtoken[0])\n      const urlNow = window.location.hash\n      window.location.hash = '#/reload'\n      setTimeout(() => { window.location.hash = urlNow }, 50)\n    } catch (e) {\n      window.alert('token khng hp l')\n    }\n  }\n\n  _renderTitleCard() {\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/'}>Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Chn nh cho bi ng</b>\n          </p>\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderImageCard(url) {\n    return (\n      <Card>\n        <CardContent>\n          <center>\n            <Img alt=''\n              src={url}\n              style={imgStyle}\n              loader={<div style={imgLoaderStyle}><center><br/><br/><CircularProgress /></center></div>}\n            />  \n          </center>\n          <Button\n              variant='outlined'\n              size='small'\n              style={{ float: 'right', margin: '10px' }}\n              onClick={() => {\n                const _data = JSON.parse(JSON.stringify(this.props.data))\n                _data.url = url\n                this.props.gotoPublish(_data, 'publish')\n              }}>Chn nh ny</Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  _renderGetTokenCard() {\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/'}\n            >Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Ly token</b><br/>\n            <br/>\n            Bn cha c token hoc token  b ht hn. Hy lm theo hng dn ny  ly token: <a href=\"https://blog.ngxson.com/tonghopevent/#lay-token\" target=\"_blank\" rel=\"noopener noreferrer\">[Bm vo y]</a><br/>\n            Lu : token s c lu trn my ny. Bn c th ly token t my tnh  dng trn T.<br/>\n            in token ca bn vo  di y:<br/>\n          </p>\n          <TextField\n            multiline\n            rowsMax=\"5\"\n            value={this.state.access_token}\n            onChange={event => {this.setState({ access_token: event.target.value });}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          /><br/>\n          <Button\n            variant='outlined'\n            onClick={this.onSaveToken.bind(this)}\n          >Tip tc</Button>\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderMain() {\n    return (\n      <React.Fragment>\n        {this.state.showGetToken &&\n          <div style={classes.cardStyle}>\n            {this._renderGetTokenCard()}\n          </div>\n        }\n        {!this.state.showGetToken &&\n          <div style={classes.cardStyle}>\n            {this._renderTitleCard()}\n          </div>\n        }\n        {!this.state.showGetToken &&\n          this.state.imgs.map((url, i) =>\n            <div style={classes.cardStyle} key={i}>\n              {this._renderImageCard(url)}\n            </div>\n          )\n        }\n        <br />\n        <br />\n      </React.Fragment>\n    )\n  }\n\n  _renderError() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        {this.state.error}<br/><br/>\n        <Button\n          variant='outlined'\n          size='small'\n          onClick={() => window.location.hash = '#/'}\n        >Tr v</Button>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    if (this.state.loading) return loading\n    if (this.state.error) return this._renderError()\n\n    return this._renderMain()\n  }\n}\n\nexport default GetImage","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass Alert extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      open: false,\n      onClickOK: null\n    }\n    window.showAlert = this.show.bind(this)\n  }\n\n  show(data) {\n    this.setState({\n      open: true,\n      title: data.title,\n      text: data.text,\n      onClickOK: data.onClickOK || null,\n      showCancel: data.showCancel\n    })\n  }\n\n  handleClickOK = () => {\n    if (this.state.onClickOK) {\n      this.state.onClickOK();\n      this.setState({ onClickOK: null });\n    }\n    this.setState({ open: false });\n  };\n\n  handleCancel = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <Dialog\n          open={this.state.open}\n          onClose={this.handleCancel}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">{this.state.title}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              {this.state.text}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClickOK.bind(this)} color=\"primary\" autoFocus>OK</Button>\n            {this.state.showCancel\n              ? <Button onClick={this.handleCancel.bind(this)} color=\"primary\" autoFocus>Cancel</Button>\n              : null}\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default Alert;","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport PropTypes from 'prop-types'\nimport Utils from '../Utils'\n\nclass FBPostEditDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    console.log(props.post)\n    this.state = {\n      title: props.post.message.split('\\n')[0] || '',\n      message: props.post.message,\n      loading: false,\n    }\n  }\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    post: PropTypes.any.isRequired,\n    editPostEndpoint: PropTypes.string.isRequired,\n  }\n\n  onEditPost = async () => {\n    const { message } = this.state\n    const { post, onClose } = this.props\n    this.setState({ loading: true })\n    const token = Utils.getLocalStorage('token')\n    await axios.patch(`${this.props.editPostEndpoint}/${post.id}?token=${token}`, {\n      message: message\n    })\n    onClose(true);\n  }\n\n  render() {\n    const { title, message, loading } = this.state\n    const { post, onClose } = this.props\n\n    return (\n      <React.Fragment>\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\n          {loading ? <center><br/><br/><CircularProgress /><br/><br/></center> : <>\n            <DialogTitle id=\"form-dialog-title\">Sa bi vit</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                Bi vit: {title}<br/>\n                ng lc: {Utils.getTimeStr(post.time)} ngy {Utils.getDateStr(post.time)}\n              </DialogContentText>\n              <TextField\n                multiline\n                rowsMax=\"20\"\n                value={message}\n                onChange={event => {this.setState({ message: event.target.value })}}\n                margin=\"normal\"\n                variant=\"outlined\"\n                fullWidth\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => onClose(false)} color=\"primary\">\n                Quay li\n              </Button>\n              <Button onClick={this.onEditPost} color=\"primary\">\n                LU POST\n              </Button>\n            </DialogActions>\n          </>}\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default FBPostEditDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Img from 'react-image'\nimport Utils from '../../Utils'\nimport Config from '../../Config'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport FBPostEditDialog from '../../components/FBPostEditDialog'\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nconst imgStyle = {\n  height: '300px',\n  maxWidth: '100%',\n}\n\nconst ImgLoader = () => <div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>\n\nclass PostList extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      posts: [],\n      editingPost: null,\n    }\n    window.changeHeader('Bi  ln lch - TongHopEvent')\n  }\n\n  static propTypes = {\n    loadFeedEndpoint: PropTypes.string.isRequired,\n    editPostEndpoint: PropTypes.string.isRequired,\n    deletePostEndpoint: PropTypes.string.isRequired,\n    timeFieldName: PropTypes.string.isRequired,\n    newestFirst: PropTypes.bool,\n  };\n\n  componentDidMount() {\n    this.loadData()\n  }\n\n  async loadData() {\n    const { newestFirst } = this.props;\n    this.setState({loading: true, editingPost: null})\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${this.props.loadFeedEndpoint}?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, posts: []})\n    else {\n      const arr = newestFirst ? res.data : res.data.reverse()\n      this.setState({loading: false, posts: this.processTimeField(arr) })\n    }\n  }\n\n  processTimeField = (data) => {\n    if (this.props.timeFieldName === 'created_time') {\n      return data.map(p => ({\n        ...p,\n        created_time: (new Date(p.created_time)).getTime() / 1000,\n      }))\n    } else {\n      return data\n    }\n  }\n\n  deletePost = (post) => async () => {\n    if (window.confirm('Bn c chc chn xa?')) {\n      this.setState({loading: true})\n      const token = Utils.getLocalStorage('token')\n      await axios.delete(`${this.props.deletePostEndpoint}/${post.id}?token=${token}`)\n      this.loadData()\n    }\n  }\n\n  openOnFB = (post) => () => {\n    window.open(`https://www.facebook.com/${post.id}`, '_blank').focus();\n  }\n\n  onEditDialogClose = (shouldReload) => {\n    if (shouldReload) {\n      this.loadData()\n    } else {\n      this.setState({editingPost: null})\n    }\n  }\n\n  _renderMainView() {\n    const { timeFieldName } = this.props;\n\n    return this.state.posts.map((post, i) => {\n      const isFromUser = post.from && post.from.id !== Config.SELF_PAGE_ID;\n      return <div style={classes.cardStyle} key={post.id}>\n        <Card>\n          <CardContent>\n            <p><b>{Utils.getTimeStr(post[timeFieldName] * 1000)} ngy {Utils.getDateStr(post[timeFieldName] * 1000)}</b></p>\n            <Img alt=''\n              src={post.full_picture}\n              style={imgStyle}\n              loader={<ImgLoader />}\n            />\n            {isFromUser && <p style={{\n                backgroundColor: '#eee',\n                padding: '10px',\n                fontWeight: 'bold',\n              }}\n              children=\"(Bi vit ny do c gi ng ln page)\"\n            />}\n            <p>\n              {Utils.nl2br(post.expanded ? post.message : post.message.substring(0, 250))}\n              <br/>\n              {/* eslint-disable */}\n              <a href=\"#\" onClick={(e) => {\n                e.preventDefault()\n                this.setState({posts: this.state.posts.map((p, j) => {\n                  const cloned = JSON.parse(JSON.stringify(p))\n                  if (i === j) cloned.expanded = !cloned.expanded\n                  return cloned\n                })})\n              }}>{post.expanded ? 'Thu gn' : '... c thm'}</a><br/>\n              {/* eslint-enable */}\n            </p>\n            <p>\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.deletePost(post)}>Xa</Button>\n              &nbsp;&nbsp;\n              <Button color=\"primary\" variant=\"outlined\" onClick={() => this.setState({ editingPost: post })} disabled={isFromUser}>Sa</Button>\n              &nbsp;&nbsp;\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.openOnFB(post)}>Xem trn FB</Button>\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    })\n  }\n\n  _renderDocNotFound() {\n    return (\n      <center>\n        <br/><br/>\n        (Khng c d liu)<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const { editingPost, loading, posts } = this.state\n\n    const loadingComponent = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    return <>\n      {editingPost && <FBPostEditDialog\n        post={editingPost}\n        onClose={this.onEditDialogClose}\n        editPostEndpoint={this.props.editPostEndpoint}\n      />}\n      {loading ? loadingComponent : \n        posts.length > 0 ? this._renderMainView() : this._renderDocNotFound()\n      }\n    </>\n  }\n}\n\nexport default PostList","import React from 'react'\nimport PostList from './PostList'\nimport Config from '../../Config'\n\nconst Scheduled = () => {\n  return <PostList\n    loadFeedEndpoint={`${Config.BACKEND}/publish/scheduled`}\n    editPostEndpoint={`${Config.BACKEND}/publish/post`}\n    deletePostEndpoint={`${Config.BACKEND}/publish/post`}\n    timeFieldName=\"scheduled_publish_time\"\n    newestFirst={false}\n  />\n}\n\nexport default Scheduled","import React from 'react'\nimport PostList from './PostList'\nimport Config from '../../Config'\n\nconst FBFeed = () => {\n  return <PostList\n    loadFeedEndpoint={`${Config.BACKEND}/fbfeed`}\n    editPostEndpoint={`${Config.BACKEND}/fbfeed`}\n    deletePostEndpoint={`${Config.BACKEND}/fbfeed`}\n    timeFieldName=\"created_time\"\n    newestFirst={true}\n  />\n}\n\nexport default FBFeed","import React from 'react'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport Button from '@material-ui/core/Button'\n\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass Settings extends React.Component {\n  state = {\n    ...Utils.settings,\n  }\n\n  saveSettings = () => {\n    Utils.setSettings({\n      ...this.state,\n    });\n    window.toastr.success(' lu ci t');\n  }\n\n  render() {\n    const { markReadOnOpenInbox } = this.state;\n\n    return (\n      <div style={classes.cardStyle}>\n        <Card>\n          <CardContent>\n            <p>\n              <h2>Ci t</h2><br/>\n              Lu : Cc ci t sau s c lu trn trnh duyt ny. Nu bn i thit b khc, bn cn chnh li cho thit b .\n            </p>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={markReadOnOpenInbox}\n                  onChange={() => this.setState({ markReadOnOpenInbox: !markReadOnOpenInbox })}\n                  color=\"primary\"\n                />\n              }\n              label={'nh du \" c\" khi bm vo c inbox'}\n            />\n            <br/>\n            <br/>\n            <Button\n              variant='outlined'\n              onClick={this.saveSettings}\n            >Lu ci t</Button>\n          </CardContent>        \n        </Card>\n      </div>\n    )\n  }\n}\n\nexport default Settings","import { io } from 'socket.io-client';\nimport Utils from '../../Utils';\nimport Config from '../../Config';\n\nclass Socket {\n  static socket = null;\n  static getSocket() {\n    if (!Config.SOCKETIO) return null;\n    if (!Socket.socket) {\n      Socket.socket = io(Config.SOCKETIO, {\n        transports: ['websocket'],\n        query: `module=${Config.SOCKETIO_MODULE}&token=${Utils.getToken()}`,\n      });\n      Socket.socket.on('connect', () => console.log('connected'));\n    }\n    return Socket.socket;\n  }\n\n  static subscribeInbox(handler) {\n    const socket = Socket.getSocket();\n    if (socket) socket.on('inbox', handler);\n  }\n\n  static unsubscribeInbox(handler) {\n    const socket = Socket.getSocket();\n    if (socket) socket.offAny(handler);\n  }\n}\n\n/* eslint-disable */\nfunction uuidv4() {\n  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\n/* eslint-enable */\n\n/**\n * make HTTP requests via socket.io\n * @param {*} method \n * @param {*} endpoint \n * @param {*} query \n * @param {*} body \n */\nexport const makeRequest = (method, endpoint, query = {}, body = {}) => new Promise(resolve => {\n  if (!Config.PROD) console.log(method, endpoint, query, body);\n  const socket = Socket.getSocket();\n  const requestId = uuidv4();\n  const callback = (data) => {\n    socket.offAny(callback);\n    resolve(data);\n  };\n  socket.on(requestId, callback);\n  socket.emit(`${method.toLowerCase()} ${endpoint.replace(/\\/$/, '')}`, {\n    requestId,\n    query,\n    body,\n  });\n});\n\nexport default Socket;","import React from 'react';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\n\nexport const MessengerContext = React.createContext();\n\nexport class MessengerContextProvider extends React.Component {\n  state = {\n    unreadMark: {},\n  };\n\n  componentDidMount() {\n    if (Config.INBOX_UNREAD_ABILITY) {\n      this.fetchUnread();\n    }\n  }\n\n  fetchUnread = async () => {\n    const res = await makeRequest('get', '/unread');\n    const unreadMark = {};\n    for (const { id } of res) {\n      unreadMark[id] = true;\n    }\n    this.setState({ unreadMark });\n  }\n\n  markUnread = (psid) => {\n    Socket.getSocket().emit('mark_unread', psid);\n    const unreadMark = {...this.state.unreadMark};\n    unreadMark[psid] = true;\n    this.setState({ unreadMark });\n  }\n\n  markRead = (psid) => {\n    Socket.getSocket().emit('mark_read', psid);\n    const unreadMark = {...this.state.unreadMark};\n    delete unreadMark[psid];\n    this.setState({ unreadMark });\n  }\n\n  render() {\n    return (\n      <MessengerContext.Provider value={{\n        unreadMark: this.state.unreadMark,\n        markUnread: this.markUnread,\n        markRead: this.markRead,\n      }}>\n        {this.props.children}\n      </MessengerContext.Provider>\n    );\n  }\n}\n\n\nexport function withMessengerContext(Component) {\n  return function HOC(props) {\n    return (\n      <MessengerContext.Consumer>\n        {(contexts) => <Component {...props} {...contexts} />}\n      </MessengerContext.Consumer>\n    )\n  }\n}\n","import React from 'react';\nimport {\n  ConversationList,\n  Conversation,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { removeVietnameseTones, mergeNewConversations, getTargetId } from './utils';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\nimport { withMessengerContext } from './Context';\n\nclass Conversations extends React.Component {\n  state = {\n    ready: false,\n    loading: false,\n    conversations: [],\n    next: null,\n  };\n\n  openConversation = (id, name) => () => {\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\n    window.location.hash = `#/msg/${id}/${n}`;\n  }\n\n  componentDidMount() {\n    this.loadMoreConversations();\n    Socket.subscribeInbox(this.inboxUpdateHandler);\n  }\n\n  componentWillUnmount() {\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\n  }\n\n  inboxUpdateHandler = async (ev) => {\n    const { data: newArr } = await makeRequest('get', '/conversations', {limit: 5});\n    this.setState((prevState) => ({\n      conversations: mergeNewConversations(prevState.conversations, newArr),\n    }));\n  }\n\n  async loadMoreConversations() {\n    if (!this.state.loading) {\n      this.setState({ loading: true });\n\n      const qs = {};\n      if (this.state.next) qs.after = this.state.next;\n      let { data, paging } = await makeRequest('get', '/conversations', qs);\n\n      if (Config.PROD) {\n        data = data.filter(c => c.id !== Config.INBOX_IGNORED_CONVERSATION);\n      }\n\n      if (data) this.setState({\n        conversations: [...this.state.conversations, ...data],\n        loading: false,\n        ready: true,\n        next: (paging?.next) ? (paging?.cursors?.after) : null,\n      });\n    }\n  }\n\n  onYReachEnd = () => {\n    if (this.state.next && !this.state.loading) {\n      this.loadMoreConversations();\n    }\n  }\n\n  render() {\n    const { unreadMark } = this.props;\n\n    return (\n      <ConversationList\n        loading={!this.state.ready}\n        loadingMore={this.state.ready && this.state.loading}\n        onYReachEnd={this.onYReachEnd}\n      >\n        {this.state.conversations.map(conv => {\n          const name = conv.senders.data[0].name;\n          const psid = getTargetId(conv);\n          return (\n            <Conversation\n              key={conv.id}\n              name={`${name} (${conv.message_count})`}\n              info={conv.snippet}\n              onClick={this.openConversation(conv.id, name)}\n              active={this.props.tid === conv.id}\n              unreadDot={!!unreadMark[psid]}\n            ></Conversation>\n          );\n        })}\n      </ConversationList>\n    );\n  }\n}\n\nexport default withMessengerContext(Conversations);","import React from 'react';\nimport {\n  ConversationHeader,\n  Avatar,\n  InfoButton,\n  Button,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { withMessengerContext } from './Context';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEnvelope } from \"@fortawesome/free-solid-svg-icons/faEnvelope\";\nimport { faEnvelopeOpenText } from \"@fortawesome/free-solid-svg-icons/faEnvelopeOpenText\";\nimport Config from '../../Config';\n\nconst MarkButton = withMessengerContext(({psid, unreadMark, markRead, markUnread}) => {\n  const btnClick = () => {\n    if (unreadMark[psid]) {\n      markRead(psid);\n    } else {\n      markUnread(psid);\n    }\n  }\n\n  return (\n    <Button\n      className={'cs-button cs-button--info'}\n      style={{marginRight: '20px'}}\n      icon={<FontAwesomeIcon icon={unreadMark[psid] ? faEnvelopeOpenText : faEnvelope} />}\n      onClick={btnClick}\n    ></Button>\n  );\n});\n\nconst Header = ({loading, profile, openConversationOnFB, openMainMenu, psid}) => {\n  return loading\n    ? (\n      <ConversationHeader>\n        <ConversationHeader.Back onClick={openMainMenu} />\n        <ConversationHeader.Content userName=\"Loading...\" />        \n      </ConversationHeader>\n    ) : (\n      <ConversationHeader>\n        <ConversationHeader.Back onClick={openMainMenu} />\n        <Avatar\n          src={profile.profile_pic}\n          name={profile.name}\n          onClick={openConversationOnFB}\n        />\n        <ConversationHeader.Content userName={profile.name} />\n        <ConversationHeader.Actions>\n          {Config.INBOX_UNREAD_ABILITY && (\n            <MarkButton\n              as=\"InfoButton\"\n              psid={psid}\n            />\n          )}\n          <InfoButton onClick={openConversationOnFB} />\n        </ConversationHeader.Actions>          \n      </ConversationHeader>\n    );\n}\n\nexport default Header;","import React, {\n  Component,\n  useRef,\n  useState,\n  useEffect,\n  useImperativeHandle,\n  forwardRef,\n} from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n//import { prefix } from \"../settings\";\n// import ContentEditable from \"../ContentEditable\";\nimport {\n  SendButton,\n  AttachmentButton,\n} from \"@chatscope/chat-ui-kit-react\";\n// import PerfectScrollbar from \"../Scroll\";\nimport TextareaAutosize from 'react-textarea-autosize';\n\nconst noop = () => {};\nconst prefix = 'cs';\n\n// Because container depends on fancyScroll\n// it must be wrapped in additional container\nfunction editorContainer() {\n  class Container extends Component {\n    render() {\n      const {\n        props: { fancyScroll, children, forwardedRef, ...rest },\n      } = this;\n\n      return (\n        <>\n          {/*fancyScroll === true && (\n            <PerfectScrollbar\n              ref={(elRef) => (forwardedRef.current = elRef)}\n              {...rest}\n              options={{ suppressScrollX: true }}\n            >\n              {children}\n            </PerfectScrollbar>\n          )*/}\n          {/*fancyScroll === false && (\n            <div ref={forwardedRef} {...rest}>\n              {children}\n            </div>\n          )*/}\n          <div ref={forwardedRef} {...rest}>\n            {children}\n          </div>\n        </>\n      );\n    }\n  }\n\n  return React.forwardRef((props, ref) => {\n    return <Container forwardedRef={ref} {...props} />;\n  });\n}\n\nconst EditorContainer = editorContainer();\n\nconst useControllableState = (value, initialValue) => {\n  const initial = typeof value !== \"undefined\" ? value : initialValue;\n  const [stateValue, setStateValue] = useState(initial);\n  const effectiveValue = typeof value !== \"undefined\" ? value : stateValue;\n\n  return [\n    effectiveValue,\n    (newValue) => {\n      setStateValue(newValue);\n    },\n  ];\n};\n\nfunction MessageInputInner(\n  {\n    value,\n    onSend,\n    onChange,\n    autoFocus,\n    placeholder,\n    fancyScroll,\n    className,\n    activateAfterChange,\n    disabled,\n    sendDisabled,\n    sendOnReturnDisabled,\n    attachDisabled,\n    sendButton,\n    attachButton,\n    onAttachClick,\n    ...rest\n  },\n  ref\n) {\n  const scrollRef = useRef();\n  const msgRef = useRef();\n  const [stateValue, setStateValue] = useControllableState(value, \"\");\n  // eslint-disable-next-line\n  const [stateSendDisabled, setStateSendDisabled] = useControllableState(\n    sendDisabled,\n    true\n  );\n\n  // Public API\n  const focus = () => {\n    if (typeof msgRef.current !== \"undefined\") {\n      msgRef.current.focus();\n    }\n  };\n\n  // Return object with public Api\n  useImperativeHandle(ref, () => ({\n    focus,\n  }));\n\n  // Set focus\n  useEffect(() => {\n    if (autoFocus === true) {\n      focus();\n    }\n  }, [autoFocus]);\n\n  // Update scroll\n  useEffect(() => {\n    if (typeof scrollRef.current.updateScroll === \"function\") {\n      scrollRef.current.updateScroll();\n    }\n  });\n\n  // eslint-disable-next-line\n  const getContent = () => {\n    // Direct reference to contenteditable div\n    const contentEditableRef = msgRef.current.msgRef.current;\n    return [\n      contentEditableRef.textContent,\n      contentEditableRef.innerText,\n      contentEditableRef.cloneNode(true).childNodes,\n    ];\n  };\n\n  const send = () => {\n    if (stateValue.length > 0) {\n      // // Clear input only when it's uncontrolled mode\n      // if (value === undefined) {\n      //   setStateValue(\"\");\n      // }\n\n      // // Disable send button only when it's uncontrolled mode\n      // if (typeof sendDisabled === \"undefined\") {\n      //   setStateSendDisabled(true);\n      // }\n\n      // const content = getContent();\n\n      // onSend(stateValue, content[0], content[1], content[2]);\n      onSend();\n    }\n  };\n\n  const handleKeyPress = (evt) => {\n    if (evt.key === \"Enter\" && evt.shiftKey === false && sendOnReturnDisabled === false) {\n      evt.preventDefault();\n      send();\n    }\n  };\n\n  const handleChange = (ev) => {\n    // (innerHTML, textContent, innerText) => {\n    // setStateValue(innerHTML);\n    // if (typeof sendDisabled === \"undefined\") {\n    //   setStateSendDisabled(textContent.length === 0);\n    // }\n\n    // if (typeof scrollRef.current.updateScroll === \"function\") {\n    //   scrollRef.current.updateScroll();\n    // }\n\n    // const content = getContent();\n\n    // onChange(innerHTML, textContent, innerText, content[2]);\n    setStateValue(ev.target.value);\n    onChange(ev.target.value);\n  };\n\n  const cName = `${prefix}-message-input`,\n    ph = typeof placeholder === \"string\" ? placeholder : \"\";\n\n  return (\n    <div\n      {...rest}\n      className={classNames(\n        cName,\n        { [`${cName}--disabled`]: disabled },\n        className\n      )}\n    >\n      {attachButton === true && (\n        <div className={`${cName}__tools`}>\n          <AttachmentButton\n            onClick={onAttachClick}\n            disabled={disabled === true || attachDisabled === true}\n          />\n        </div>\n      )}\n\n      <div className={`${cName}__content-editor-wrapper`}>\n        <EditorContainer\n          fancyScroll={fancyScroll}\n          ref={scrollRef}\n          className={`${cName}__content-editor-container`}\n        >\n          <TextareaAutosize\n            ref={msgRef}\n            className={`${cName}__content-editor`}\n            disabled={disabled}\n            placeholder={ph}\n            onKeyPress={handleKeyPress}\n            onChange={handleChange}\n            // activateAfterChange={activateAfterChange}\n            value={stateValue}\n            maxRows={5}\n            minRows={1}\n          />\n        </EditorContainer>\n      </div>\n      {sendButton === true && (\n        <div className={`${cName}__tools`}>\n          <SendButton\n            onClick={send}\n            disabled={disabled === true || stateSendDisabled === true}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nconst MessageInput = forwardRef(MessageInputInner);\nMessageInput.displayName = \"MessageInput\";\n\nMessageInput.propTypes = {\n  /** Value. */\n  value: PropTypes.string,\n\n  /** Placeholder. */\n  placeholder: PropTypes.string,\n\n  /** A input can show it is currently unable to be interacted with. */\n  disabled: PropTypes.bool,\n\n  /** Prevent that the input message is sent on a return press */\n  sendOnReturnDisabled: PropTypes.bool,\n\n  /** Send button can be disabled.<br>\n   * It's state is tracked by component, but it can be forced */\n  sendDisabled: PropTypes.bool,\n\n  /**\n   * Fancy scroll\n   * This property is set in contructor, and is not changing when component update.\n   */\n  fancyScroll: PropTypes.bool,\n\n  /**\n   * Sets focus element and caret at the end of input<br>\n   * when value is changed programmatically (e.g) from button click and element is not active\n   */\n  activateAfterChange: PropTypes.bool,\n\n  /** Set focus after mount. */\n  autoFocus: PropTypes.bool,\n\n  /**\n   * onChange handler<br>\n   * @param {String} innerHtml\n   * @param {String} textContent\n   * @param {String} innerText\n   * @param {NodeList} nodes\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * onSend handler<br>\n   * @param {String} innerHtml\n   * @param {String} textContent\n   * @param {String} innerText\n   * @param {NodeList} nodes\n   */\n  onSend: PropTypes.func,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Show send button */\n  sendButton: PropTypes.bool,\n\n  /** Show add attachment button */\n  attachButton: PropTypes.bool,\n\n  /** Disable add attachment button */\n  attachDisabled: PropTypes.bool,\n\n  /**\n   * onAttachClick handler\n   */\n  onAttachClick: PropTypes.func,\n};\n\nMessageInputInner.propTypes = MessageInput.propTypes;\n\nMessageInput.defaultProps = {\n  value: undefined,\n  placeholder: \"\",\n  disabled: false,\n  sendOnReturnDisabled: false,\n  fancyScroll: true,\n  activateAfterChange: false,\n  autoFocus: false,\n  sendButton: true,\n  attachButton: true,\n  attachDisabled: false,\n  onAttachClick: noop,\n  onChange: noop,\n  onSend: noop,\n};\n\nMessageInputInner.defaultProps = MessageInput.defaultProps;\n\nexport { MessageInput };\n\nexport default MessageInput;","import React from 'react';\nimport {\n  MessageList,\n  ChatContainer,\n  Message,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { getMessageDirection, getTargetId, mergeNewMessages } from './utils';\nimport TimeAgo from 'javascript-time-ago';\nimport en from 'javascript-time-ago/locale/en';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\nimport './styles.css';\nimport Header from './Header';\nimport MessageInput from './MessageInput';\nimport { withMessengerContext } from './Context';\nimport { makeRequest as makeRequestSendAPI } from '../../Utils';\n\nTimeAgo.addLocale(en);\nconst timeAgo = new TimeAgo('en-US');\n\nclass MessageView extends React.Component {\n  state = {\n    loading: true,\n    loadingMore: false,\n    psid: null,\n    profile: {},\n    threadInfo: {},\n    messages: [],\n    messageAfter: null,\n    messagePending: null,\n    messagePendingId: null,\n    input: '',\n  }\n  originalTitle = document.title;\n\n  componentDidMount() {\n    this.fetchConversation(this.props.tid);\n    Socket.subscribeInbox(this.inboxUpdateHandler);\n    window.setMessageInput = (input) => this.setState({ input });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.tid !== this.props.tid) {\n      this.fetchConversation(this.props.tid);\n    }\n    if (this.state.psid\n      && this.state.psid !== prevState.psid\n      && Config.INBOX_MARK_READ_ON_OPEN\n    ) {\n      this.props.markRead(this.state.psid);\n    }\n  }\n\n  componentWillUnmount() {\n    document.title = this.originalTitle;\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\n  }\n\n  inboxUpdateHandler = async (ev) => {\n    const { psid, messagePendingId } = this.state;\n    const tid = this.props.tid;\n    if (getTargetId(ev) === psid) {\n      const { data: newMessages } = await makeRequest('get', '/thread/messages', {tid, limit: 5});\n      this.setState((prevState) => ({\n        messages: mergeNewMessages(prevState.messages, newMessages),\n      }));\n    }\n    if (ev.message?.mid === messagePendingId) {\n      this.setState({ messagePending: null, messagePendingId: null });\n    }\n  }\n\n  async fetchConversation(tid) {\n    document.title = Config.INBOX_TITLE;\n    this.setState({ loading: true });\n    const [threadInfo, messages] = await Promise.all([\n      makeRequest('get', '/thread/info', {tid}),\n      makeRequest('get', '/thread/messages', {tid}),\n    ]);\n    messages.data = messages.data.reverse();\n    const psid = threadInfo.senders.data[0].id;\n    const profile = await makeRequest('get', '/profile', { psid });\n    this.setState({\n      threadInfo,\n      psid,\n      profile,\n      messages: messages.data,\n      messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\n      loading: false,\n    });\n    document.title = `${profile.name} - ${Config.INBOX_TITLE}`;\n  }\n\n  onYReachStart = async () => {\n    const {messageAfter, loadingMore} = this.state;\n    if (messageAfter && !loadingMore) {\n      this.setState({ loadingMore: true });\n      const messages = await makeRequest('get', '/thread/messages', {\n        tid: this.props.tid,\n        after: messageAfter,\n      });\n      this.setState((prevState) => {\n        const newMsgArr = messages.data.reverse().concat(prevState.messages);\n        return {\n          messages: newMsgArr,\n          messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\n          loadingMore: false,\n        };\n      });\n    }\n  }\n\n  openConversationOnFB = () => {\n    window.open(`https://fb.com${this.state.threadInfo.link}`, '_blank');\n  }\n\n  openInNewTab = (url) => () => {\n    window.open(url, '_blank');\n  }\n\n  openMainMenu = () => {\n    const { goBackTo } = this.props;\n    window.location.hash = goBackTo || '#/msg';\n  }\n\n  _renderMessages() {\n    const {loading, messages, messagePending, loadingMore} = this.state;\n    if (loading) return <MessageList loading/>\n\n    let lastDirection = '';\n    const showTimeHeader = (msg) => {\n      const direction = getMessageDirection(msg);\n      if (lastDirection !== direction) {\n        lastDirection = direction;\n        return <Message.Footer sender={timeAgo.format(new Date(msg.created_time))} />\n      } else {\n        return null;\n      }\n    };\n\n    const showTextMsg = (msg) => <Message key={msg.id} model={{\n      message: msg.message,\n      sentTime: timeAgo.format(new Date(msg.created_time)),\n      sender: msg.from.name,\n      direction: getMessageDirection(msg),\n      position: 'single',\n    }}>\n      {showTimeHeader(msg)}\n    </Message>\n\n    const getImages = (msg) => (msg.attachments?.data || [])\n      .filter(a => !!a.image_data)\n      .map(a => a.image_data);\n\n    const showImages = (msg, images) => images.map((img, i) => (\n      <Message key={msg.id + i} type=\"image\" model={{\n        direction: getMessageDirection(msg),\n        type: 'custom',\n      }}>\n        {showTimeHeader(msg)}\n        <Message.CustomContent>\n          <img src={img.preview_url} alt=\"\" onClick={this.openInNewTab(img.url)} style={{width: '200px'}}></img>\n        </Message.CustomContent>\n      </Message>\n    ));\n\n    const showPendingMsg = () => <Message model={{\n      message: messagePending,\n      sender: Config.INBOX_TITLE,\n      direction: 'outgoing',\n      position: 'single',\n    }} className=\"pending\" />\n\n    return (\n      <MessageList loadingMore={loadingMore} onYReachStart={this.onYReachStart}>\n        {messages.map(msg => {\n          const images = getImages(msg);\n          if (images.length > 0) {\n            return <>\n              {showImages(msg, images)}\n            </>\n          } else {\n            return showTextMsg(msg);\n          }\n        })}\n        {messagePending && showPendingMsg()}\n        {!Config.INBOX_SEND_ABILITY && // add margin bottom\n          <Message style={{ marginBottom: '2em', opacity: '0' }} />\n        }\n      </MessageList>\n    );\n  }\n\n  handleSendMessage = async () => {\n    const { psid, input } = this.state;\n    const { markRead } = this.props;\n    const messagePending = input.trim();\n    this.setState({ messagePending, input: '' });\n    try {\n      const { message_id } = await makeRequestSendAPI('post', '/inbox/messages', {}, {\n        messaging_type: 'MESSAGE_TAG',\n        tag: 'HUMAN_AGENT',\n        recipient: { id: psid },\n        message: { text: messagePending },\n      });\n      markRead(psid);\n      this.setState({ messagePendingId: message_id });\n    } catch (e) {\n      this.setState({ messagePending: null, input: messagePending });\n      window.alert(JSON.stringify(e.response.data));\n    }\n  };\n  _renderInput() {\n    const { input, messagePending } = this.state;\n    return <MessageInput\n      as=\"MessageInput\"\n      value={input}\n      onChange={(txt) => this.setState({ input: txt })}\n      onSend={this.handleSendMessage}\n      disabled={!!messagePending}\n      sendDisabled={!!messagePending && input.length > 0}\n      sendOnReturnDisabled={true}\n      onAttachClick={window.openTemplateDialog}\n      placeholder=\"Type here...\"\n    />\n  }\n\n  render() {\n    const { loading, profile, psid } = this.state;\n    return (\n      <ChatContainer>\n        <Header\n          as=\"ConversationHeader\"\n          loading={loading}\n          profile={profile}\n          psid={psid}\n          openConversationOnFB={this.openConversationOnFB}\n          openMainMenu={this.openMainMenu}\n        />\n        {this._renderMessages()}\n        {Config.INBOX_SEND_ABILITY && this._renderInput()}\n      </ChatContainer>\n    );\n  }\n}\n\nexport default withMessengerContext(MessageView);","import React from 'react';\nimport Conversations from './Conversations';\nimport MessageView from './MessageView';\nimport Config from '../../Config';\nimport { HashRouter, Route, withRouter } from 'react-router-dom';\nimport \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\nimport {\n  MainContainer,\n  Sidebar,\n  ChatContainer,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { MessengerContextProvider } from './Context';\n\nclass Messenger extends React.Component {\n  state = { tid: null, viewHeight: '100vh' };\n\n  updateHeight = () => {\n    if (window.NUI_VIEW_HEIGHT && this.state.viewHeight !== window.NUI_VIEW_HEIGHT) {\n      this.setState({ viewHeight: window.NUI_VIEW_HEIGHT });\n    }\n  }\n\n  componentDidMount() {\n    this.intervalId = setInterval(this.updateHeight, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  MessageView = () => {\n    const { tid, viewHeight } = this.state;\n    const { goBackTo } = this.props;\n    return <div style={{ position: \"relative\", height: viewHeight }} className={!tid ? 'home' : 'chat'}>\n      <MainContainer>\n        <Sidebar position=\"left\" scrollable={true}>\n          <Conversations tid={tid} />\n        </Sidebar>\n        {tid\n          ? <MessageView tid={tid} goBackTo={goBackTo} />\n          : <ChatContainer />\n        }\n      </MainContainer>\n      <Config.CustomMessengerWidget />\n    </div>;\n  }\n\n  MessageTidChanged = ({match}) => {\n    if (match.params.tid !== this.state.tid)\n      this.setState({ tid: match.params.tid });\n    return null;\n  }\n\n  MessageTidReset = () => {\n    if (this.state.tid !== null)\n      this.setState({ tid: null });\n    return null;\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <MessengerContextProvider>\n          <Route path=\"/msg\" component={this.MessageView} />\n          <Route exact path=\"/msg\" component={this.MessageTidReset} />\n          <Route exact path=\"/msg/:tid/:name\" component={this.MessageTidChanged} />\n        </MessengerContextProvider>\n      </HashRouter>\n    );\n  }\n}\n\nexport default withRouter(Messenger);","import Messenger from './Messenger';\n\nexport default Messenger;","import { makeStyles } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nexport const useSidebarStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px) !important`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: 0,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n  },\n}));","import React from 'react';\nimport {\n  Forum,\n  Receipt,\n  EventAvailable,\n  Help,\n  CheckCircle,\n  ExitToApp,\n  ListAlt,\n  Settings,\n} from '@material-ui/icons';\n\nexport const SidebarItems = [\n  { list: [\n    {\n      title: 'Inbox',\n      href: '#/msg',\n      icon: <Forum />,\n    },\n    {\n      title: 'Qun l',\n      href: '#/manage',\n      icon: <Receipt />,\n    },\n    {\n      title: 'Bi  ln lch',\n      href: '#/scheduled',\n      icon: <EventAvailable />,\n    },\n    {\n      title: 'Bi  ng',\n      href: '#/fbfeed',\n      icon: <ListAlt />,\n    }\n  ] },\n  { separator: true },\n  { list: [\n    {\n      title: 'Hng dn',\n      href: 'https://blog.ngxson.com/tonghopevent/',\n      icon: <Help />,\n    },\n    {\n      title: 'iu khon s dng',\n      href: 'https://sites.google.com/view/tonghopevent/',\n      icon: <CheckCircle />,\n    }\n  ] },\n  { separator: true },\n  { list: [\n    {\n      title: 'Ty chnh',\n      href: '#/settings',\n      icon: <Settings />,\n    },\n    {\n      title: 'ng xut',\n      href: '#/logout',\n      icon: <ExitToApp />,\n    }\n  ] },\n  { list: [\n    {\n      title: 'Tng hp cc d n v cuc thi',\n      href: '#/',\n      icon: null,\n    },\n    {\n      title: 'ng bi (Ly nh)',\n      href: '#/getimage',\n      icon: null,\n    },\n    {\n      title: 'ng bi',\n      href: '#/publish',\n      icon: null,\n    },\n    {\n      title: 'Xem bi vit',\n      href: '#/view',\n      icon: null,\n    }\n  ], hidden: true }\n];\n\nexport const getCurrentMenuItem = (currentHash) => {\n  for (const { list } of SidebarItems) {\n    if (!list) continue;\n    for (const item of list) {\n      if (currentHash.startsWith(item.href)) return item;\n    }\n  }\n  return null;\n}\n","import React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport { useSidebarStyles } from './styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { getCurrentMenuItem, SidebarItems } from './SidebarItems';\nimport { withRouter } from 'react-router';\n\nfunction Sidebar({children, location: {pathname}}) {\n  const classes = useSidebarStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n  const currentMenuItem = getCurrentMenuItem('#' + pathname);\n  const isPublicView = pathname.match(/\\/(view\\/|login)/);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const handleClickItem = (item) => () => {\n    const { href } = item;\n    if (href.startsWith('http')) {\n      window.open(href, '_blank').focus(); // open in new tab\n    } else {\n      window.location.href = href;\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        style={{ zIndex: open ? 80 : 100 }}\n        className={`${classes.appBar} ${open ? classes.appBarShift : ''}`}\n      >\n        <Toolbar>\n          {!isPublicView && <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={`${classes.menuButton} ${open ? classes.hide : ''}`}\n          >\n            <MenuIcon />\n          </IconButton>}\n          <Typography variant=\"h6\" noWrap>\n            {currentMenuItem.title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        style={{ zIndex: 90 }}\n        variant={isPublicView ? 'temporary' : 'permanent'}\n        className={`${classes.drawer} ${open ? classes.drawerOpen : classes.drawerClose}`}\n        classes={{\n          paper: open ? classes.drawerOpen : classes.drawerClose,\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        {SidebarItems.map((obj, i) => {\n          if (obj.list && !obj.hidden) {\n            return <List key={i}>\n              {obj.list.map((item, j) => (\n                <ListItem\n                  button\n                  selected={currentMenuItem.href === item.href}\n                  onClick={handleClickItem(item)} key={j}\n                >\n                  <ListItemIcon>{item.icon}</ListItemIcon>\n                  <ListItemText primary={item.title} />\n                </ListItem>\n              ))}\n            </List>\n          } else if (obj.separator) {\n            return <Divider key={i} />;\n          }\n          return null\n        })}\n      </Drawer>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n    </div>\n  );\n}\n\nexport default withRouter(Sidebar);","import React, { useEffect, useRef } from 'react';\n\nconst updateViewportSize = (div) => {\n  if (!div) return;\n  window.NUI_VIEW_HEIGHT = div.clientHeight - 64;\n  window.NUI_VIEW_WIDTH = div.clientWidth;\n};\n\nconst Measure = () => {\n  const elem = useRef(null);\n\n  useEffect(() => {\n    if (elem && elem.current) {\n      setInterval(() => {\n        updateViewportSize(elem.current);\n      }, 1000);\n    }\n  }, [elem]);\n\n  return (\n    <div ref={elem} style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%',\n      pointerEvents: 'none',\n      //border: '2px solid red',\n      zIndex: 1000,\n    }}></div>\n  );\n}\n\nexport default Measure;","import React from 'react';\nimport Theme from './Theme';\nimport LoginLayout from './layouts/Login';\nimport HomeLayout from './layouts/Home';\nimport ViewLayout from './layouts/View';\nimport PublishLayout from './layouts/Publish';\nimport GetImageLayout from './layouts/GetImage';\nimport './App.css';\nimport './bootstrap.css';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport Alert from './components/Alert';\nimport Scheduled from './layouts/fb/Scheduled';\nimport FBFeed from './layouts/fb/FBFeed';\nimport Settings from './layouts/Settings';\nimport Messenger from './components/messenger';\nimport Sidebar from './components/sidebar/Sidebar';\nimport Measure from './components/Measure';\nimport Config from './Config';\nimport Utils from './Utils';\n\nclass Main extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      header: 'Home',\n      publishData: Utils.getLocalStorage('publishData') || null,\n    }\n  }\n\n  changeHeader(header) {\n    if (this.state.header === header) return\n    else this.setState({header})\n  }\n\n  gotoPublish(data, publishAction) {\n    this.setState({publishData: data})\n    Utils.setLocalStorage('publishData', data)\n    window.location.hash = '#/' + publishAction\n  }\n\n  Home = () => {\n    return <HomeLayout\n      gotoPublish={this.gotoPublish.bind(this)}\n    />\n  }\n\n  View = ({match}) => {\n    return <ViewLayout\n      id={match.params.id}\n    />\n  }\n\n  Publish = () => {\n    return <PublishLayout\n      data={this.state.publishData}\n    />\n  }\n\n  GetImage = () => {\n    return <GetImageLayout\n      data={this.state.publishData}\n      gotoPublish={this.gotoPublish.bind(this)}\n    />\n  }\n\n  Copyright = () => {\n    return <center>\n      <br/><br/>\n      Developed by&nbsp;\n      <b><a href=\"https://ngxson.com\" target=\"_blank\" rel=\"noopener noreferrer\">Nui</a></b><br/>\n      Version {Config.VERSION}\n      <br/><br/>\n    </center>\n  }\n\n  Logout = () => {\n    Utils.removeLocalStorage('token')\n    window.location.href = '#/'\n    window.location.reload()\n    return null\n  }\n\n  render() {\n    window.changeHeader = this.changeHeader.bind(this)\n\n    return (\n      <>\n        <Route path=\"/manage\" component={this.Home} />\n        <Route path=\"/login\" component={LoginLayout} />\n        <Route path=\"/view/:id\" component={this.View} />\n        <Route path=\"/publish\" component={this.Publish} />\n        <Route path=\"/getimage\" component={this.GetImage} />\n        <Route path=\"/scheduled\" component={Scheduled} />\n        <Route path=\"/fbfeed\" component={FBFeed} />\n        <Route path=\"/settings\" component={Settings} />\n        <Route path=\"/logout\" component={this.Logout} />\n        <this.Copyright />\n      </>\n    );\n  }\n}\n\nconst RedirectToHome = () => {\n  window.location.href = Utils.getLocalStorage('token')\n    ? '#/msg'\n    : '#/login'\n  return null\n}\n\nfunction App() {\n  return (\n    <HashRouter>\n      <MuiThemeProvider theme={Theme}>\n        <Sidebar>\n          <div className=\"mainView\">\n            <Switch>\n              <Route exact path=\"/\" component={RedirectToHome} />\n              <Route path=\"/msg\" component={Messenger} />\n              <Route component={Main} />\n            </Switch>\n          </div>\n          <Alert />\n        </Sidebar>\n        <Measure />\n      </MuiThemeProvider>\n    </HashRouter>\n  );\n}\n\nexport default App;","import React from 'react';\n\nclass Guide extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n        <div className=\"gtco-container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n              <h2>Xin cho!</h2>\n              <p> thun tin hn trong vic tng hp thng tin, sau y, bn s cn nhp thng tin v d n, cuc thi hay s kin cn h tr truyn thng. Mt vi lu  cho bn:<br /></p>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>NHP THNG TIN</h3>\n                  <p>Hy ch  nhp y  cc thng tin c trong form.</p>\n                </div>\n              </div>\n      \n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>I DUYT</h3>\n                  <p>Admin s ph duyt bi ca bn.<br />\n                    Bn s nhn c thng bo ngay sau khi bi ng c t lch  ng ln page.</p>\n                </div>\n              </div>\n      \n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>NG VO GI VNG</h3>\n                  <p>Bi ca bn s c hn gi  up vo khung gi vng (20h - 21h).<br />\n                    V vy nu cha thy bi ca bn cha c ng ngay, <b>ng vi</b> gi li bi cho chng mnh nh!</p>\n                </div>\n              </div>\n      \n            </div>\n      \n            <div className=\"col-md-12\">\n              <center>\n                <p><br /><br />Bng vic bm nt &quot;Tip tc&quot;, bn ng  vi cc <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca fanpage</p>\n                <a className=\"btn btn-block btn-primary\" href=\"#/next\">TIP TC </a>\n                <br />\n                Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br />\n              </center>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Guide;","import React from 'react';\n\nclass NoPsid extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Hng dn</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\t ng d n, cuc thi ln fanpage, bn hy thc hin theo hng dn sau:<br/>\n\t    \t\t\t\t\tBn hy inbox vo fanpage ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br/>\n\t    \t\t\t\t\tSau  bm vo nt <b>ng d n/cuc thi</b>  menu nh!<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti thng qua inbox fanpage</small>\n\t    \t\t\t\t</p>\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default NoPsid;","import React from 'react';\n\nclass OldVersion extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Hng dn</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\tBn dng link ti phin bn c ca fanpage<br/>\n\t    \t\t\t\t\tHy bm nt <b>ng d n/cuc thi</b>  trong menu inbox  nhn link mi nh!<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a></small>\n\t    \t\t\t\t</p>\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default OldVersion;","import React from 'react';\nimport Guide from './Guide';\nimport NoPsid from './NoPsid';\nimport OldVersion from './OldVersion';\nimport Utils from '../../Utils';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.psid = Utils.getPsid();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <header id=\"gtco-header\" className=\"gtco-cover\" role=\"banner\" style={{backgroundImage: `url(theme/images/img_bg_1.jpg`}}>\n          <div className=\"gtco-container\">\n            <div className=\"row\">\n              <div className=\"col-md-8 col-md-offset-2 text-center\">\n                <div className=\"display-t\">\n                  <div className=\"display-tc animate-box\" data-animate-effect=\"fadeIn\">\n                    <h1>H tr truyn thng</h1>\n                    <h2>Form in thng tin bi ng</h2>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {this.psid !== 'none'\n          ? <Guide />\n          : !Utils.getParameterByName('psid') ? <NoPsid /> : <OldVersion />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Home;","import React from 'react';\nimport Utils from '../../Utils';\n\nconst getFormUrl = (state, plan) => {\n  const { cls } = state;\n  const data = `${Utils.getPsid()}${plan ? ';' + plan : ''}`;\n  const euc = encodeURIComponent;\n  // return `https://docs.google.com/forms/d/e/1FAIpQLSds9-as5kOcCr9_gtQ-4xic8-CTSmsQaHEajU-OX4xGpz8wHQ/viewform?usp=pp_url&entry.450789842=${euc(psid)}${tag ? '&entry.1699976597=' + euc(tag) : ''}`;\n  return `/form/?data=${euc(data)}&cls=${euc(cls)}`;\n}\n\nconst Data = [\n\n  // INDEX 0\n  (parent) => {\n    return {\n      type: 'small',\n      title: 'Bn mun ng bi v',\n      options: [\n        { text: 'D n', subtitle: 'Hot ng ngoi kha', value: 'D n' },\n        { text: 'Cuc thi', subtitle: 'Dnh cho HS, SV', value: 'Cuc thi' },\n        { text: 'S kin', subtitle: 'Dnh cho HS, SV' , value: 'S kin' },\n      ],\n      notice: 'Lu : Fanpage khng nhn ng bi v tuyn dng vic lm.',\n      next: (value) => {\n        let newState = {\n          screen: 1,\n          type: value,\n          cls: '',\n        };\n        switch (value) {\n          case 'D n':\n            newState = { screen: 1, type: value, cls: 'project' };\n            break;\n          case 'Cuc thi':\n            newState = { screen: 1, type: value, cls: 'contest' };\n            break;\n          case 'S kin':\n            newState = { screen: 1, type: value, cls: 'event' };\n            break;\n          default:\n        }\n        parent.setState(newState);\n      }\n    };\n  },\n\n  // INDEX 1\n  (parent) => {\n    return {\n      type: 'long',\n      title: <React.Fragment>{parent.state.type} ca bn c <b>iu hnh bi</b></React.Fragment>,\n      options: [\n        { text: 'Mt nhm hc sinh, sinh vin', subtitle: 'Hot ng phi li nhun', value: 'F1' },\n        { text: 'Mt cu lc b trong trng hc', subtitle: 'Hot ng phi li nhun', value: 'F2' },\n        { text: 'Mt trng hc cng lp', subtitle: 'VD: trng THCS, THPT, H, Cao ng,...', value: 'F3' },\n        { text: 'Mt t chc phi li nhun', subtitle: 'VD: AIESEC, VOGE, SOTB,...', value: 'F4' },\n        { text: 'T chc hot ng c li nhun', subtitle: 'VD: trung tm ngoi ng, ca hng,...', value: 'P1' },\n      ],\n      next: (value) => {\n        if (value === 'P1') {\n          parent.setState({ screen: 2 });\n        } else {\n          window.location.replace(getFormUrl(parent.state, value));\n        }\n      }\n    };\n  },\n\n  // INDEX 2\n  (parent) => {\n    return {\n      type: 'basic',\n      title: <React.Fragment>\n        Da theo <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca chng mnh, {parent.state.type.toLowerCase()} c t chc hoc c iu hnh bi mt hoc nhiu doanh nghip, t chc hay c nhn <b>hot ng c li nhun</b> phi tr ph theo <b>Gi P1</b><br/>\n        <br/>\n        Gi P1 c gi l 100.000 VN / 1 bi ng [<a href=\"https://sites.google.com/view/tonghopevent/gi-p1\" target=\"_blank\" rel=\"noopener noreferrer\">Bm y  xem chi tit</a>]<br/>\n        <br/>\n         tip tc, bn hy nhp thng tin vo form sau:\n        &nbsp;\n        <button className=\"btn btn-small btn-primary\"\n          style={{padding: '4px'}}\n          onClick={() => {\n            window.location.replace(getFormUrl(parent.state, 'P1'));\n          }}\n        >Ti Form </button><br/>\n        Sau , hng dn thanh ton s c gi ti inbox ca bn.\n      </React.Fragment>\n    };\n  },\n];\n\nexport default Data;","import React from 'react';\nimport Data from './Data';\nimport Utils from '../../Utils';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    const _psid = Utils.getPsid();\n    this.psid = _psid !== 'none' ? _psid : null;\n    this.state = {\n      screen: 0,\n      tag: null,\n    };\n  }\n\n  getFormUrl(plan) {\n    const psid = `${this.psid}${plan ? ';' + plan : ''}`;\n    return Utils.getFormUrl(psid, this.state.tag);\n  }\n\n  componentDidMount() {\n    setTimeout(window.scrollToTop, 50);\n  }\n\n  _renderSmallBtn(data) {\n    return data.options.map((option, i) => {\n      return (\n        <button\n          key={option.value + i}\n          className=\"btn btn-default btn-proj-cate\"\n          onClick={() => data.next(option.value)}\n        >{option.text}</button>\n      );\n    });\n  }\n\n  _renderLargeBtn(data) {\n    return data.options.map((option, i) => {\n      return (\n        <button\n          key={option.value + i}\n          className=\"btn btn-default btn-proj-type\"\n          onClick={() => data.next(option.value)}\n        >\n          <b>{option.text}</b><br/>\n          <small>{option.subtitle}</small>\n        </button>\n      );\n    });\n  }\n\n  render() {\n    const data = Data[this.state.screen](this);\n\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Thng tin chung</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\t{data.title}\n\t    \t\t\t\t</p>\n              {data.type !== 'basic' && <p>\n                {data.type === 'small'\n                  ? this._renderSmallBtn(data)\n                  : this._renderLargeBtn(data)\n                }\n              </p>}\n              {data.notice && <p style={{fontSize: '0.8em'}}>\n                {data.notice}\n              </p>}\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default Home;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer id=\"gtco-footer\" role=\"contentinfo\">\n      <div className=\"gtco-container\">\n        <div className=\"row copyright\">\n          <div className=\"col-md-12\">\n            <p className=\"pull-left\">\n              <small className=\"block\">Lp trnh bi <a rel=\"noopener noreferrer\" href=\"https://ngxson.com\" target=\"_blank\">Nui</a></small>\n              <small className=\"block\">Theme by <a rel=\"noopener noreferrer\" href=\"http://gettemplates.co/\" target=\"_blank\">GetTemplates.co</a></small>\n            </p>\n            <div className=\"pull-right\">\n              <ul className=\"gtco-social-icons pull-right\">\n                <li><a href=\"https://www.facebook.com/tonghopevent/\"><i className=\"icon-facebook\"></i></a></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport Home from './home/Home';\nimport Quiz from './quiz/Quiz';\nimport Footer from './Footer';\nimport { HashRouter, Route } from 'react-router-dom';\nimport './Landing.css';\n\nclass Main extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  Home = () => {\n    return <Home />;\n  };\n\n  Quiz = () => {\n    return <Quiz />;\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Route exact path=\"/\" component={this.Home} />\n        <Route path=\"/next\" component={this.Quiz} />\n        <Footer />\n      </React.Fragment>\n    );\n  }\n}\n\nfunction Landing() {\n  return (\n    <HashRouter>\n      <Main />\n    </HashRouter>\n  );\n}\n\nexport default Landing;\n","import React, { useState } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getStorage, ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage';\nimport { Backup } from '@material-ui/icons';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { getAuth, signInWithEmailAndPassword } from 'firebase/auth';\nimport Resizer from 'react-image-file-resizer';\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: 'AIzaSyClx2o-nDz6lLhzH_p5T_zmwHEQESnFTlk',\n  authDomain: 'chatbotcnh.firebaseapp.com',\n  databaseURL: 'https://chatbotcnh.firebaseio.com',\n  projectId: 'chatbotcnh',\n  storageBucket: 'chatbotcnh.appspot.com',\n  messagingSenderId: '344360709927',\n  appId: '1:344360709927:web:e4b99ee1dd466c0b9a8302'\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst storage = getStorage(app);\nconst auth = getAuth();\nsignInWithEmailAndPassword(auth, 'tonghopevent@ngxson.com', 'tonghopevent')\n  .then((userCredential) => {\n    const user = userCredential.user;\n    console.log(user);\n  })\n  .catch((error) => {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    console.error(errorCode, errorMessage);\n  });\n\nconst resizeFile = (file) => new Promise((resolve, reject) => {\n  try {\n    Resizer.imageFileResizer(\n      file,\n      1000,\n      1000,\n      'JPEG',\n      75,\n      0,\n      (f) => resolve(f),\n      'file'\n    );\n  } catch (e) {\n    reject(e);\n  }\n});\n\nexport const UploadButton = ({value, onChange}) => {\n  const [uploading, setUploading] = useState(false);\n  const [imgRef, setImgRef] = useState(null);\n\n  const upload = async (ev) => {\n    let file = ev.target.files[0];\n    let ext = 'jpg';\n    const type = file.type;\n    if (type === 'image/jpeg') ext = 'jpg';\n    if (type === 'image/gif') ext = 'gif';\n    if (type === 'image/png') ext = 'png';\n    try {\n      const newFile = await resizeFile(file);\n      file = newFile;\n      ext = 'jpg';\n    } catch (e) {\n      // ignored\n    }\n    if (file.size > 5 * 1024 * 1024) {\n      alert('Li: file qu ln. Hy th gim  phn gii nh xung v s dng nh dng JPG.');\n      return;\n    }\n    setUploading(true);\n    const imgRef = ref(storage, `tonghopevent/images/${Date.now()}.${ext}`);\n    try {\n      const snap = await uploadBytes(imgRef, file);\n      const downloadURL = await getDownloadURL(snap.ref);\n      // eslint-disable-next-line\n      const url = downloadURL.replace(/&token=[A-Za-z0-9\\-]+/, '');\n      console.log(url);\n      onChange(url);\n    } catch (e) {\n      alert(e);\n    }\n    setImgRef(imgRef);\n    setUploading(false);\n  };\n\n  const deleteImage = () => {\n    if (imgRef) {\n      deleteObject(imgRef);\n    }\n    onChange(null);\n  };\n\n  if (uploading) return (\n    <CircularProgress />\n  );\n\n  if (value) return (\n    <div>\n      <img src={value} alt='user uploaded' className='preview'></img>\n      <Button variant='outlined' color='primary' onClick={deleteImage}>\n        Xa nh\n      </Button>\n    </div>\n  );\n\n  return (\n    <Button component='label' variant='outlined' color='primary'>\n      <Backup style={{marginRight: '5px'}} /> Ti nh ln\n      <input\n        type='file'\n        accept='image/png, image/gif, image/jpeg'\n        onChange={upload}\n        hidden\n      />\n    </Button>\n  );\n}","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport Button from '@material-ui/core/Button';\nimport { UploadButton } from './FormUploadButton';\n\nconst classes = {\n  input: {\n    width: '500px',\n    maxWidth: '100%',\n    marginBottom: '0.1em',\n  },\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  cardStyle: {\n    maxWidth: '700px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nconst FormField = ({title, subtitle, required, children, error}) => {\n  return (\n    <Card style={classes.cardStyle}>\n      <CardContent>\n        <Typography variant=\"h6\" component=\"h6\" gutterBottom={true}>\n          {title}\n          {required && <span className=\"required\"> *</span>}\n        </Typography>\n        {error && <p className=\"error\">{error}</p>}\n        <Typography variant=\"body1\" component=\"small\" color=\"textSecondary\">\n          {subtitle}\n        </Typography>\n        <FormControl component=\"fieldset\">\n          {children}\n        </FormControl>\n      </CardContent>        \n    </Card>\n  );\n};\n\nexport const TextInput = ({value, title, subtitle, required, placeholder, onChange, error}) => {\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <TextField\n        type=\"text\"\n        value={value}\n        style={classes.input}\n        onChange={(e) => onChange(e.target.value)}\n        margin=\"normal\"\n        autoComplete=\"false\"\n        placeholder={placeholder}\n        variant=\"outlined\"\n      />\n    </FormField>\n  );\n};\n\nexport const LongTextInput = ({value, title, subtitle, required, placeholder, onChange, error, rows = 10}) => {\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <TextField\n        type=\"text\"\n        value={value}\n        style={{...classes.input, width: '100%'}}\n        onChange={(e) => onChange(e.target.value)}\n        margin=\"normal\"\n        autoComplete=\"false\"\n        placeholder={placeholder}\n        variant=\"outlined\"\n        multiline\n        rows={rows}\n        fullWidth\n      />\n    </FormField>\n  );\n};\n\nexport const MultipleCheckboxes = ({value = {}, title, subtitle, placeholder, required, onChange, error, moreLabel}) => {\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <FormGroup>\n        {Object.keys(value).map(k => k !== 'other' ? (\n          <FormControlLabel key={k} control={<Checkbox\n              checked={value[k]}\n              onChange={() => onChange({...value, [k]: !value[k]})}\n            />}\n            label={k}\n          />\n        ) : null)}\n        {value.other !== undefined && <TextField\n          label={moreLabel}\n          type=\"text\"\n          value={value.other || ''}\n          style={classes.input}\n          onChange={(e) => onChange({...value, other: e.target.value})}\n          margin=\"normal\"\n          autoComplete=\"false\"\n          placeholder={placeholder}\n          variant=\"outlined\"\n        />}\n      </FormGroup>\n    </FormField>\n  );\n};\n\nexport const MultipleCheckboxesLimitedHeight = ({value = {}, title, subtitle, required, onChange, error}) => {\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <FormGroup className=\"multiple-checkboxes-limited-height\">\n        <div>\n          {Object.keys(value).map(k => (\n            <FormControlLabel key={k} control={<Checkbox\n                checked={value[k]}\n                onChange={() => onChange({...value, [k]: !value[k]})}\n              />}\n              label={k}\n            />\n          ))}\n        </div>\n      </FormGroup>\n    </FormField>\n  );\n};\n\nexport const UploadFileInput = ({value, title, subtitle, required, onChange, error}) => {\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <UploadButton value={value} onChange={onChange} />\n    </FormField>\n  );\n};\n\nexport const YesOrNo = ({value = null, title, subtitle, required, onChange, error}) => {\n  const click = (b) => () => onChange(b);\n  return (\n    <FormField title={title} subtitle={subtitle} required={required} error={error}>\n      <div className=\"yes-or-no\">\n        <Button variant={value === true ? \"contained\" : \"outlined\"} color=\"primary\" onClick={click(true)}>\n          C\n        </Button>\n        {'   '}\n        <Button variant={value === false ? \"contained\" : \"outlined\"} color=\"primary\" onClick={click(false)}>\n          Khng\n        </Button>\n      </div>\n    </FormField>\n  );\n};\n","export const VN_CITIES = [\n  'Ton quc',\n  'H Ni',\n  'TP HCM',\n  'An Giang',\n  'B Ra Vng Tu',\n  'Bc Liu',\n  'Bc Kn',\n  'Bc Giang',\n  'Bc Ninh',\n  'Bn Tre',\n  'Bnh Dng',\n  'Bnh nh',\n  'Bnh Phc',\n  'Bnh Thun',\n  'C Mau',\n  'Cao Bng',\n  'Cn Th',\n  ' Nng',\n  'k Lk',\n  'k Nng',\n  'ng Nai',\n  'ng Thp',\n  'in Bin',\n  'Gia Lai',\n  'H Giang',\n  'H Nam',\n  'H Tnh',\n  'Hi Dng',\n  'Hi Phng',\n  'Ha Bnh',\n  'Hu Giang',\n  'Hng Yn',\n  'Khnh Ha',\n  'Kin Giang',\n  'Kon Tum',\n  'Lai Chu',\n  'Lo Cai',\n  'Lng Sn',\n  'Lm ng',\n  'Long An',\n  'Nam nh',\n  'Ngh An',\n  'Ninh Bnh',\n  'Ninh Thun',\n  'Ph Th',\n  'Ph Yn',\n  'Qung Bnh',\n  'Qung Nam',\n  'Qung Ngi',\n  'Qung Ninh',\n  'Qung Tr',\n  'Sc Trng',\n  'Sn La',\n  'Ty Ninh',\n  'Thi Bnh',\n  'Thi Nguyn',\n  'Thanh Ha',\n  'Tha Thin Hu',\n  'Tin Giang',\n  'Tr Vinh',\n  'Tuyn Quang',\n  'Vnh Long',\n  'Vnh Phc',\n  'Yn Bi',\n];","import React from 'react';\nimport {\n  TextInput,\n  MultipleCheckboxes,\n  MultipleCheckboxesLimitedHeight,\n  LongTextInput,\n  UploadFileInput,\n  YesOrNo,\n} from './FormField';\nimport { VN_CITIES } from './data';\nimport Utils from '../Utils';\n\nexport const FormQuestions = [\n  {\n    element: (props) => (\n      <UploadFileInput\n        title=\"nh cho bi ng\"\n        subtitle={<>\n          nh ny s c dng  ng ln fanpage, thng s l avatar ca d n.<br/>\n          Lu :<br/>\n          - Chng mnh KHNG CHP NHN nh chp tp th ca BTC<br/>\n          - Khng chp nhn cc nh d gy hiu nhm, hoc c ni dung khng lnh mnh<br/>\n          - nh nn c t l vung (1:1)  hin tt trn c instagram v facebook<br/>\n        </>}\n        required={true}\n        {...props}\n      />\n    ),\n    name: 'image',\n    defaultValue: () => null,\n    checkError: (value) => {\n      if (!value) return 'Bn cha chn nh  ng ln page chng mnh';\n    },\n    populateToDoc: (value, doc) => {\n      doc['image'] = [value];\n    },\n  },\n\n  {\n    element: (props) => (\n      <TextInput\n        title=\"Tn d n/cuc thi/s kin\"\n        subtitle=\"Hy nhp 1 tn ngn gn cho d n, cuc thi hay s kin ca bn nh\"\n        placeholder=\"V d: ABC Project...\"\n        required={true}\n        {...props}\n      />\n    ),\n    name: 'name',\n    defaultValue: () => '',\n    checkError: (value) => {\n      if (!value.trim()) return 'Bn cha in tn d n/cuc thi/s kin';\n    },\n    populateToDoc: (value, doc) => {\n      doc['name'] = value.trim();\n    },\n  },\n\n  {\n    element: (props) => (\n      <MultipleCheckboxes\n        title=\"Phn loi\"\n        subtitle=\"Bn c th thm phn mc d n ca bn (nu khng c trong danh sch ny) di dng hashtag\"\n        moreLabel=\"Hoc nhp thm cc hashtag khc...\"\n        placeholder=\"V d: #d_n_ABC\"\n        required={true}\n        {...props}\n      />\n    ),\n    name: 'type',\n    defaultValue: () => {\n      const cls = Utils.getParameterByName('cls') || '';\n      const val = {\n        '#d_n_gio_dc': false,\n        '#d_n_tnh_nguyn': false,\n        '#d_n_vn_ha': false,\n        '#d_n_ngh_thut': false,\n        '#d_n_khoa_hc': false,\n        '#d_n_mi_trng': false,\n        '#cuc_thi': !!cls.match(/contest/),\n        '#s_kin': !!cls.match(/event/),\n        'other': '',\n      };\n      return val;\n    },\n    checkError: (value) => {\n      const atLeastOneFilled = Object.values(value).some(t => !!t);\n      const hasOther = !!value.other.trim();\n      const otherHasHash = !!value.other.match(/#/);\n      if (!atLeastOneFilled) return 'Bn cha chn phn ny';\n      if (hasOther && !otherHasHash) return 'Phn  in phi c du hashtag, v d #d_n_ABC';\n    },\n    populateToDoc: (value, doc) => {\n      let cls = Utils.getParameterByName('cls') || 'project';\n      if (cls.match(/project/)) cls = 'project';\n      else if (cls.match(/contest/)) cls = 'contest';\n      else if (cls.match(/event/)) cls = 'event';\n      else cls = 'project';\n      const arr = Object.entries(value)\n        .filter(([key, value]) => key !== 'other' && value)\n        .map(a => a[0]);\n      const other = value.other.trim();\n      if (!!other) {\n        arr.push(other);\n      }\n      doc['cls'] = cls;\n      doc['type'] = arr;\n    },\n  },\n\n  {\n    element: (props) => (\n      <LongTextInput\n        title=\"M t v d n/cuc thi/s kin\"\n        subtitle={<>\n          Lu :<br/>\n          - Hy vit tht chi tit,  ngi c c th hiu d n/cuc thi/s kin ca bn hng n iu g nh.<br/>\n          - KHNG copy-paste link bi h tr truyn thng (phi vit y  ni dung vo y)<br/>\n          - Cc thng tin v nh ti tr s b xa sau khi kim duyt.<br/>\n          - Bn cng c th  link n ng k (nu c) trong phn m t<br/>\n        </>}\n        placeholder=\"V d: ABC Project l d n c lp ra v mc ch... Chng mnh hng ti vic...\"\n        required={true}\n        rows={15}\n        {...props}\n      />\n    ),\n    name: 'description',\n    defaultValue: () => '',\n    checkError: (value) => {\n      const v = value.trim();\n      if (!v) return 'Bn cha in phn m t ny';\n      if (v.length < 400) return 'Phn m t cho d n qu ngn. Bn hy vit 1 cch chi tit hn (d n ca bn lm g, c  ngha th no,...). Hy vit chi tit, KHNG copy-paste link bi vit';\n      // eslint-disable-next-line\n      const urls = v.match(/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([^ \\n\\r\\t]+)/gi);\n      if (urls) {\n        for (const url of urls) {\n          if (url.match(/\\.\\.\\./)) return `Do phn m t bn copy t facebook, nn link sau: \"${url}\"  b facebook rt ngn (c du 3 chm). V vy, c gi s khng th bm vo c. Bn nn t li link gc, hoc dng bit.ly hay bom.to  rt gn link nh!`;\n        }\n      }\n    },\n    populateToDoc: (value, doc) => {\n      doc['description'] = value.trim();\n    },\n  },\n\n  {\n    element: (props) => (\n      <MultipleCheckboxesLimitedHeight\n        title=\"Tnh, thnh ph\"\n        subtitle=\"Ni d n / cuc thi / s kin ca bn s din ra. Bn c th chn nhiu tnh, thnh ph (hy cun sang ngang  tm)\"\n        required={true}\n        {...props}\n      />\n    ),\n    name: 'locations',\n    defaultValue: () => {\n      const val = {};\n      for (const c of VN_CITIES) val[c] = false;\n      return val;\n    },\n    checkError: (value) => {\n      const atLeastOneFilled = Object.values(value).some(t => !!t);\n      if (!atLeastOneFilled) return 'Bn cha chn phn ny';\n    },\n    populateToDoc: (value, doc) => {\n      const arr = Object.entries(value)\n        .filter(a => a[1])\n        .map(a => a[0]);\n      doc['locations'] = arr;\n    },\n  },\n\n  {\n    element: (props) => (\n      <TextInput\n        title=\"Link facebook page\"\n        subtitle=\"Hy nhp link ti trang facebook chnh ca d n, cuc thi hay s kin ca bn nh\"\n        placeholder=\"V d: https://www.facebook.com/tonghopevent\"\n        required={true}\n        {...props}\n      />\n    ),\n    name: 'linkfb',\n    defaultValue: () => '',\n    checkError: (value) => {\n      const v = value.trim();\n      if (!v) return 'Bn cha in mc ny';\n      if (!v.match(/(fb|facebook)\\.com/)) return 'Link bn nhp khng ng nh dng. V d, link ti facebook ca chng mnh phi l: https://www.facebook.com/tonghopevent';\n    },\n    populateToDoc: (value, doc) => {\n      doc['linkfb'] = value;\n    },\n  },\n\n  {\n    element: (props) => (\n      <YesOrNo\n        title=\"D n ca bn c tuyn nhn s khng?\"\n        subtitle=\"V d nh tuyn TNV, tuyn Ban iu hnh, ngi tham gia,...\"\n        required={true}\n        {...props}\n      />\n    ),\n    name: '_recruitment',\n    defaultValue: () => null,\n    checkError: (value) => {\n      if (value === null) return 'Bn cha chn mc ny';\n    },\n    populateToDoc: (value, doc) => null,\n  },\n\n  {\n    dependsOn: '_recruitment',\n    element: (props) => (\n      <MultipleCheckboxes\n        title=\"Yu cu i tng\"\n        moreLabel=\"Hoc cc i tng khc... (khng bt buc in)\"\n        placeholder=\"Khc...\"\n        {...props}\n      />\n    ),\n    name: 'wanted',\n    defaultValue: () => ({\n      'Ban iu hnh': false,\n      'Tnh nguyn vin': false,\n      'Ngi tham gia': false,\n      'other': '',\n    }),\n    checkError: (value) => null,\n    populateToDoc: (value, doc) => {\n      const arr = Object.entries(value)\n        .filter(([key, value]) => key !== 'other' && value)\n        .map(a => a[0]);\n      if (value.other) arr.push(value.other);\n      doc['wanted'] = arr;\n    },\n  },\n\n  {\n    dependsOn: '_recruitment',\n    element: (props) => (\n      <LongTextInput\n        title=\"Deadline tuyn nhn s\"\n        subtitle=\"Nu bn c deadline ring cho tng ban, bn cng c th ghi r trong phn ny nh\"\n        placeholder=\"...\"\n        rows={2}\n        {...props}\n      />\n    ),\n    name: 'deadline',\n    defaultValue: () => '',\n    checkError: (value) => null,\n    populateToDoc: (value, doc) => doc['deadline'] = value.trim(),\n  },\n\n  {\n    dependsOn: '_recruitment',\n    element: (props) => (\n      <LongTextInput\n        title=\"Quyn li thnh vin khi tham gia d n\"\n        subtitle=\"V d: nh c chng ch, c giao lu, hc hi kinh nghim v lnh vc g,...\"\n        placeholder=\"VD: Tham gia ABC Project, bn s nhn c... v ngoi ra...\"\n        rows={7}\n        {...props}\n      />\n    ),\n    name: 'benefit',\n    defaultValue: () => '',\n    checkError: (value) => null,\n    populateToDoc: (value, doc) => doc['benefit'] = value.trim(),\n  },\n\n  // Thng tin thm\n\n  {\n    element: (props) => (\n      <TextInput\n        title=\"Bn c lu , cu hi g cho admin khng?\"\n        subtitle={<>\n          (Khng bt buc) V d: mun ng bi vo ngy no,...<br/>\n          ( in ny l cho admin c, n s khng c ghi vo bi ng ln facebook)\n        </>}\n        placeholder=\"...\"\n        {...props}\n      />\n    ),\n    name: 'feedback',\n    defaultValue: () => '',\n    checkError: (value) => null,\n    populateToDoc: (value, doc) => doc['feedback'] = value.trim(),\n  },\n\n];","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { useEffect } from \"react\";\n\nconst CHAT_SPEECH_TYPE_REGEX = / ([^a-z]|$)/;\nconst CHAT_SPEECH_TYPE_WARN = 'chat_speech';\n\nconst checkSpeechTypeWarning = (doc) => {\n  const tmp = Object.entries(doc).filter(([k]) =>\n    k === 'name'\n    || k === 'description'\n    || k === 'linkfb'\n    || k === 'deadline'\n    || k === 'benefit'\n  ).map(([k, v]) => v).join('\\n');\n  const matched = tmp.match(CHAT_SPEECH_TYPE_REGEX);\n  console.log(matched);\n  return matched\n    ? CHAT_SPEECH_TYPE_WARN\n    : null;\n};\n\nexport const checkWarning = (doc) => {\n  let res = checkSpeechTypeWarning(doc);\n  if (res) return res;\n  return null;\n};\n\nexport const FormConfirmation = ({ warn, onSubmit, clearWarn }) => {\n  const [open, setOpen] = React.useState(false);\n\n  useEffect(() => {\n    if (warn) setOpen(true);\n  }, [warn]);\n\n  const handleClose = () => {\n    setOpen(false);\n    clearWarn();\n  };\n\n  const handleConfirm = () => {\n    handleClose();\n    onSubmit();\n  };\n\n  return <>\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\"\n    >\n      <DialogTitle id=\"alert-dialog-title\">Xc nhn gi thng tin</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {warn === CHAT_SPEECH_TYPE_WARN && <>\n            Hmm... c v phn bn nhp cha n lm:<br/>\n            V d, nu bn vit <b>\"mnh xin gi admin \"</b>  trong phn m t, th c cu  s c copy-paste ln bi ng trn facebook lun.<br/>\n            Cc  in trong form ny u c my x l t ng (tr  in \"lu , cu hi cho admin\"  cui cng), vy nn bn hy check li gip  Jiji nha!<br/>\n            <br/>\n            Cn nu bn chc l tt c u n (c th  Jiji nhm ln g , mnh ch l con mo thi m!), th bn hy bm nt \"Xc nhn gi\" di y\n          </>}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleConfirm} color=\"primary\" autoFocus>\n          Xc nhn gi\n        </Button>\n        <Button onClick={handleClose} color=\"primary\">\n          Quay li\n        </Button>\n      </DialogActions>\n    </Dialog>\n  </>;\n};","import React, { useState, useEffect } from 'react';\nimport Theme from '../Theme';\nimport Config from '../Config';\nimport axios from 'axios';\nimport '../App.css';\nimport '../bootstrap.css';\nimport './styles.css';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Button from '@material-ui/core/Button';\nimport { FormQuestions } from './FormQuestions';\nimport { checkWarning, FormConfirmation } from './FormConfirmation';\nimport * as Sentry from '@sentry/browser';\n\nconst FORM_SUBMIT_ENDPOINT =  'https://tonghopevent-form-submit-btpjgpbvma-uc.a.run.app/form/submit';\n\nconst classes = {\n  input: {\n    marginBottom: '20px',\n    width: '500px',\n    maxWidth: '100%'\n  },\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  cardStyle: {\n    maxWidth: '700px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nconst getDefaultValues = () => {\n  const values = {};\n  for (const q of FormQuestions) {\n    values[q.name] = q.defaultValue();\n  }\n  return values;\n};\n\nconst getUserContext = () => {\n  try {\n    const data = decodeURIComponent(window.location.href.match(/data=([^&]+)/)[1]);\n    const [hashPsid, org] = data.split(';');\n    return {\n      psid: hashPsid.substr(0, hashPsid.length - 5),\n      hash: hashPsid.substr(-5),\n      org: org.toLowerCase(),\n    };\n  } catch (e) {\n    alert('ERROR: NO CONTEXT');\n    return null;\n  }\n};\n\nconst submitForm = async (doc) => {\n  try {\n    const ctx = window.TONGHOPEVENT_CONTEXT;\n    const data = {...doc, ...ctx};\n    // on backend: validate & remove \"hash\", add \"created\": Date.now()\n    await axios.post(FORM_SUBMIT_ENDPOINT, data);\n    return true;\n  } catch (e) {\n    Sentry.captureException(e);\n    console.error(e);\n    if (e.response?.data?.error) {\n      alert(`C li xy ra, xin vui lng chp mn hnh v bo li vi admin: ${e.response.data.error}`);\n    }\n    return false;\n  }\n};\n\nconst Form = () => {\n  const [values, setValues] = useState(getDefaultValues());\n  const [errors, setErrors] = useState({});\n  const [hasError, setHasErrors] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const [warn, setWarn] = useState(null);\n  const [docRecord, setDocRecord] = useState(null);\n\n  if (!window.TONGHOPEVENT_CONTEXT) {\n    window.TONGHOPEVENT_CONTEXT = getUserContext();\n    console.log(window.TONGHOPEVENT_CONTEXT);\n  }\n\n  const checkIfHasError = (errors) => {\n    return Object.values(errors).some(t => !!t);\n  };\n\n  const onSubmit = async (_doc) => {\n    const isTest = window.location.href.match(/nui_test/);\n    const doc = _doc || docRecord;\n    if (!checkIfHasError(errors)) {\n      setLoading(true);\n      console.log(doc);\n      if (!isTest) {\n        const success = await submitForm(doc);\n        setSuccess(success);\n        if (!success) alert('C li xy ra, xin vui lng th li!');\n      } else { // nui_test\n        setSuccess(true);\n      }\n      setLoading(false);\n    }\n  };\n\n  const onPreSubmit = () => {\n    const doc = {};\n    const errors = {};\n    for (const q of FormQuestions) {\n      const name = q.name;\n      const v = values[name];\n      errors[name] = q.checkError(v);\n      q.populateToDoc(v, doc);\n    }\n    setErrors(errors);\n    // make sure there is no error\n    if (!checkIfHasError(errors)) {\n      setDocRecord(doc);\n      const warn = checkWarning(doc);\n      if (warn) {\n        setWarn(warn);\n      } else {\n        onSubmit(doc);\n      }\n    }\n  };\n\n  useEffect(() => {\n    setHasErrors(checkIfHasError(errors));\n  }, [errors]);\n\n  const onFieldChanged = (name) => (val) => {\n    setValues({ ...values, [name]: val });\n    if (errors[name]) {\n      setErrors({ ...errors, [name]: null });\n    }\n  };\n\n  return (\n    <MuiThemeProvider theme={Theme}>\n      <CssBaseline />\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" style={{flexGrow: 1}}>\n            Form nhp d liu\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <div className=\"mainView\">\n        <Card style={classes.cardStyle}>\n          <CardContent>\n            <Typography variant=\"h5\" component=\"h2\" gutterBottom={true}>\n              Form nhp d liu h tr truyn thng\n            </Typography>\n            {!success && <Typography variant=\"subtitle1\" color=\"textSecondary\" gutterBottom={true}>\n              Chng mnh s copy cc thng tin bn nhp di y v ng ln page, vy nn cc bn hy ch  vit mt cch r rng, d hiu cho ngi c nh!\n            </Typography>}\n            {!success && <Typography variant=\"body1\" component=\"small\" color=\"textSecondary\">\n              (Cc  c du * l bt buc)\n            </Typography>}\n            {success && <Typography variant=\"subtitle1\" color=\"textSecondary\" gutterBottom={true}>\n              D liu bn nhp  c lu li.<br/>Chng mnh s thng bo vi bn ngay khi bi ng c duyt!\n            </Typography>}\n          </CardContent>        \n        </Card>\n\n        {!success && FormQuestions.map(q => {\n          // q does not depends on other question\n          // OR q does depends on other question and that question is true\n          if (!q.dependsOn || (q.dependsOn && values[q.dependsOn])) {\n            const name = q.name;\n            const elem = q.element({\n              value: values[name],\n              key: name,\n              onChange: onFieldChanged(name),\n              error: errors[name],\n            });\n            return elem;\n          } else {\n            return null;\n          }\n        })}\n\n        {!success && <Card style={classes.cardStyle}>\n          <CardContent>\n            <div>\n              <small>ng qun bm nt \"Hon thnh\" khi bn  in xong nh:<br/><br/></small>\n              <Button \n                color=\"primary\"\n                variant=\"contained\"\n                onClick={onPreSubmit}\n                disabled={hasError}\n              >Hon thnh</Button>\n              {hasError && <p className=\"error\">\n                Vn cn mt vi  in c vn . Bn hy kim tra li nh.\n              </p>}\n              <br/>\n              <br/>\n              <small>\n                ------<br/>\n                 Jiji: H thng form in ny ang trong giai on th nghim.<br/>Nu bn gp li g, hy inbox cho Jiji nh!\n              </small>\n            </div>\n          </CardContent>        \n        </Card>}\n\n        {/* Copyright */}\n        <center>\n          <br/><br/>\n          Developed by&nbsp;\n          <b><a href=\"https://ngxson.com\" target=\"_blank\" rel=\"noopener noreferrer\">Nui</a></b><br/>\n          Version {Config.VERSION}\n          <br/><br/>\n        </center>\n      </div>\n\n      {loading && <div className=\"loading-overlay\">\n        <div>\n          <CircularProgress /><br/>\n          ang gi d liu...\n        </div>\n      </div>}\n\n      <FormConfirmation\n        warn={warn}\n        onSubmit={onSubmit}\n        clearWarn={() => setWarn(null)}\n      />\n    </MuiThemeProvider>\n  );\n};\n\nexport default Form;","import Form from './Form';\nexport default Form;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `/data/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Landing from './landing/Landing';\nimport Form from './form';\nimport * as serviceWorker from './serviceWorker';\nimport Config from './Config';\nimport Utils from './Utils';\nimport * as Sentry from '@sentry/react';\nimport { Integrations } from '@sentry/tracing';\n\nif (process.env.REACT_APP_MODE === 'production') {\n  Sentry.init({\n    dsn: 'https://eed214d9c56c4e7085cccd764a9ac6a8@o1087634.ingest.sentry.io/6101146',\n    integrations: [new Integrations.BrowserTracing()],\n    tracesSampleRate: 0.05,\n  });\n}\n\nif (window.location.pathname.match(/\\/data/)) {\n  console.log(Config.VERSION);\n  Utils.loadSettings();\n  ReactDOM.render(<App />, document.getElementById('root'));\n} else if (window.location.pathname.match(/\\/form/)) {\n  ReactDOM.render(<Form />, document.getElementById('root'));\n} else {\n  ReactDOM.render(<Landing />, document.getElementById('root'));\n}\n\nserviceWorker.unregister();\n"],"sourceRoot":""}