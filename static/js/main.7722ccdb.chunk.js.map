{"version":3,"sources":["Theme.js","components/messenger/utils.js","Utils.js","components/messenger/custom/TongHopEvent.jsx","Config.js","layouts/Login.jsx","components/NoteEditDialog.jsx","components/Doc.jsx","components/ToolsDialog.jsx","components/DuplicateDocDialog.jsx","DuplicateHelper.js","layouts/Home.jsx","layouts/View.jsx","components/DatePicker.jsx","components/Timeslots.jsx","layouts/Publish.jsx","layouts/GetImage.jsx","components/Alert.jsx","components/FBPostEditDialog.jsx","layouts/fb/PostList.jsx","layouts/fb/Scheduled.jsx","layouts/fb/FBFeed.jsx","layouts/Settings.jsx","components/messenger/socket.js","components/messenger/Context.jsx","components/messenger/Conversations.jsx","components/messenger/Header.jsx","components/messenger/MessageView.jsx","components/messenger/Messenger.jsx","components/messenger/index.js","components/sidebar/styles.js","components/sidebar/SidebarItems.js","components/sidebar/Sidebar.jsx","components/Measure.jsx","App.jsx","landing/home/Guide.jsx","landing/home/NoPsid.jsx","landing/home/OldVersion.jsx","landing/home/Home.jsx","landing/quiz/Data.jsx","landing/quiz/Quiz.jsx","landing/Footer.jsx","landing/Landing.jsx","serviceWorker.js","index.js"],"names":["createMuiTheme","palette","primary","main","blueGrey","secondary","error","orange","getMessageDirectionLastData","arg","res","getMessageDirection","message","senderId","from","id","isFromPage","Config","SELF_PAGE_ID","mergeNewMessages","oldArr","newArr","addedMessages","isExistInOldArr","some","msg","unshift","mergeNewConversations","convIds","filter","conv","getTargetId","ev","senders","recipient","sender","data","s","removeVietnameseTones","str","replace","trim","ORG_CODE","Utils","INBOX_MARK_READ_ON_OPEN","settings","markReadOnOpenInbox","token","getLocalStorage","window","location","href","name","lastRun","last","now","Date","removeLocalStorage","reload","value","localStorage","setItem","JSON","stringify","item","getItem","parse","removeItem","timestamp","date","d","getDate","m","getMonth","y","getFullYear","hh","getHours","mm","getMinutes","text","matched","match","length","uname","_id","url","method","payload","_url","indexOf","axios","doc","org","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","execCommand","console","log","err","removeChild","navigator","clipboard","writeText","then","fallbackCopyTextToClipboard","split","map","i","arr","isLast","key","psid","tag","euc","encodeURIComponent","results","RegExp","exec","decodeURIComponent","_psid","getParameterByName","inboxData","n","toLowerCase","baseUrl","open","setLocalStorage","loadSettings","makeRequest","endpoint","a","qs","getToken","post","BACKEND","params","checkError","Card","children","padding","marginBottom","border","PROD","process","SOCKETIO","SOCKETIO_MODULE","INBOX_TITLE","INBOX_SEND_ABILITY","INBOX_UNREAD_ABILITY","INBOX_IGNORED_CONVERSATION","VERSION","CustomMessengerWidget","state","templates","loading","editingIndex","editingText","showing","openTemplateDialog","setState","loadTemplates","Object","keys","save","fillToInput","t","setMessageInput","this","maxWidth","width","height","Maxheight","background","zIndex","transform","overflow","right","onClick","onChange","e","target","rows","cursor","nl2br","React","Component","Login","props","handleChange","event","changeHeader","username","password","showAlert","title","classes","input","container","display","flexWrap","cardStyle","marginTop","marginRight","marginLeft","CircularProgress","form","CardContent","Typography","variant","component","color","TextField","label","type","margin","Button","onLogin","bind","NoteEditDialog","comment","onClose","Fragment","Dialog","fullWidth","aria-labelledby","DialogTitle","DialogContent","DialogContentText","multiline","rowsMax","DialogActions","Doc","isNoteEditOpen","isCopied","isExpanded","admin","copyContent","getCopyContent","linkfb","fbusername","extractFacebookUsername","image","publishAction","field","val","success","newDoc","setDoc","trashed","updateDocField","approved","cmt","generateLocationTag","join","description","cleanFBLink","wanted","deadline","benefit","backgroundColor","duplicateHelper","openDuplicateDocDialog","duplicatedDocs","checkDoc","Fab","size","getTimeStr","created","getDateStr","getOrgName","feedback","gotoPublish","content","maxHeight","className","_renderNonAdminInfo","disabled","_renderDuplicatedWarningIcon","plan","toUpperCase","componentDecorator","rel","_renderPostContent","Divider","toggleTrashDoc","toggleApproved","caption","getImageUrl","openToolsDialog","paddingBottom","updateComment","_renderTrashedDoc","_renderMainCard","TEMPLATES","desc","ToolsDialog","showTemplates","sendInboxData","isLinkCopied","response","obj","closeToolsDialog","toastr","goToInbox","isWithin24HWindow","handleClose","copyTextToClipboard","sendInbox","goToPageInbox","List","ListItem","button","ListItemText","protocol","host","onCopy","_renderSendInboxDialogAsk","onEnter","fetchData","onBackdropClick","substr","_renderError","_renderContent","DuplicateDocDialog","docs","selectedDocID","daysAgo","Math","floor","closeDuplicateDocDialog","DuplicateHelper","seen","lookbackArr","fbname","push","Home","markDocApproved","DOCID_APPROVED","dispatchDocApproved","prevState","list","toolsDialogOpen","toolsDialogDoc","duplicateDocDialog","loadData","Promise","all","get","pushLookbackData","edit","docid","home","columnsCountBreakPoints","350","1000","1550","gutter","View","_renderDocView","_renderDocNotFound","MaterialUIPickers","publish_time","handleDateChange","getTime","utils","DateFnsUtils","KeyboardButtonProps","isSlotTaken","stat","time","INTERVAL_BETWEEN_POSTS_IN_MS","splice","ScheduledList","TimeslotPicker","statArr","useState","useOldPicker","setUseOldPicker","timeslots","beginOfDay","day","startAt","slotsOfDay","generateTimeslots","round","DatePicker","Publish","getErrorMessage","completed","scheduled_publish_time","loadStat","loadInbox","idInDatabase","postData","toast","info","timeOut","hash","clear","imgStyle","alt","src","loader","isDateOK","onClickOK","doPublish","showCancel","messages","750","900","_renderComposerCard","_renderPublishCard","_renderInboxCard","_renderCompletedCard","_renderMain","imgLoaderStyle","GetImage","showGetToken","access_token","imgs","fetchFacebookApi","fbtoken","feed","full_picture","picture","status","urlNow","setTimeout","alert","float","_data","onSaveToken","_renderGetTokenCard","_renderTitleCard","_renderImageCard","Alert","handleClickOK","handleCancel","show","aria-describedby","autoFocus","FBPostEditDialog","onEditPost","patch","editPostEndpoint","ImgLoader","PostList","processTimeField","timeFieldName","p","created_time","deletePost","confirm","delete","deletePostEndpoint","openOnFB","onEditDialogClose","shouldReload","editingPost","posts","newestFirst","loadFeedEndpoint","reverse","isFromUser","fontWeight","expanded","substring","preventDefault","j","cloned","loadingComponent","_renderMainView","Scheduled","FBFeed","Settings","saveSettings","setSettings","FormControlLabel","control","Switch","checked","Socket","socket","io","transports","query","on","handler","getSocket","offAny","uuidv4","c","crypto","getRandomValues","Uint8Array","toString","resolve","requestId","callback","emit","MessengerContext","createContext","MessengerContextProvider","unreadMark","fetchUnread","markUnread","markRead","Provider","withMessengerContext","Consumer","contexts","ready","conversations","next","openConversation","inboxUpdateHandler","limit","onYReachEnd","loadMoreConversations","subscribeInbox","unsubscribeInbox","after","paging","cursors","loadingMore","message_count","snippet","active","tid","unreadDot","MarkButton","icon","faEnvelopeOpenText","faEnvelope","Header","profile","openConversationOnFB","openMainMenu","Back","Content","userName","profile_pic","Actions","as","TimeAgo","addLocale","en","timeAgo","threadInfo","messageAfter","messagePending","messagePendingId","originalTitle","newMessages","mid","onYReachStart","concat","link","openInNewTab","goBackTo","handleInputChange","_","v","innerText","handleSendMessage","messaging_type","message_id","fetchConversation","prevProps","lastDirection","showTimeHeader","direction","Footer","format","images","attachments","image_data","getImages","img","model","CustomContent","preview_url","showImages","sentTime","showTextMsg","opacity","onSend","sendDisabled","sendOnReturnDisabled","onAttachClick","placeholder","_renderMessages","_renderInput","Messenger","viewHeight","updateHeight","NUI_VIEW_HEIGHT","MessageView","scrollable","MessageTidChanged","MessageTidReset","intervalId","setInterval","clearInterval","path","exact","withRouter","useSidebarStyles","makeStyles","theme","root","appBar","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","spacing","toolbar","alignItems","justifyContent","mixins","flexGrow","SidebarItems","separator","hidden","pathname","useTheme","setOpen","currentMenuItem","currentHash","startsWith","getCurrentMenuItem","isPublicView","handleClickItem","CssBaseline","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","Drawer","paper","selected","ListItemIcon","Measure","elem","useRef","useEffect","current","div","clientHeight","NUI_VIEW_WIDTH","clientWidth","ref","pointerEvents","Main","publishData","Copyright","Logout","header","LoginLayout","RedirectToHome","App","Theme","Guide","data-animate-effect","NoPsid","OldVersion","getPsid","role","backgroundImage","Data","parent","options","subtitle","notice","newState","screen","getFormUrl","scrollToTop","option","_renderSmallBtn","_renderLargeBtn","fontSize","Quiz","Landing","Boolean","hostname","ReactDOM","render","getElementById","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.7722ccdb.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blueGrey from '@material-ui/core/colors/blueGrey';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: { main: blueGrey[700] },\r\n    secondary: { main: blueGrey[200] },\r\n    error: { main: orange[900] }\r\n  }\r\n})","import Config from '../../Config';\n\nconst getMessageDirectionLastData = {arg: null, res: null};\nexport const getMessageDirection = (message) => {\n  if (getMessageDirectionLastData.arg === message) {\n    return getMessageDirectionLastData.res;\n  } else {\n    getMessageDirectionLastData.arg = message;\n    const senderId = message.from.id;\n    const isFromPage = senderId === Config.SELF_PAGE_ID || senderId === '182794865548469';\n    getMessageDirectionLastData.res = isFromPage ? 'outgoing' : 'incoming';\n    return getMessageDirectionLastData.res;\n  }\n};\n\nexport const mergeNewMessages = (oldArr, newArr) => {\n  const addedMessages = [];\n  const isExistInOldArr = (id) => oldArr.some(msg => msg.id === id);\n  for (const msg of newArr) {\n    if (isExistInOldArr(msg.id)) break;\n    addedMessages.unshift(msg);\n  }\n  return [...oldArr, ...addedMessages];\n};\n\nexport const mergeNewConversations = (oldArr, newArr) => {\n  const convIds = {};\n  return [...newArr, ...oldArr].filter(conv => {\n    if (!convIds[conv.id]) {\n      convIds[conv.id] = true;\n      return true;\n    } else {\n      return false;\n    }\n  });\n}\n\nexport const getTargetId = (ev) => {\n  if (ev.senders) {\n    for (const s of ev.senders.data) {\n      if (s.id !== Config.SELF_PAGE_ID) return s.id;\n    }\n  } else if (ev.recipient && ev.recipient.id !== Config.SELF_PAGE_ID) {\n    return ev.recipient.id;\n  } else if (ev.sender && ev.sender.id !== Config.SELF_PAGE_ID) {\n    return ev.sender.id;\n  } else {\n    return null;\n  }\n}\n\n/*eslint-disable */\nexport const removeVietnameseTones = (str) => {\n  str = str.replace(/||||||||||||||||/g,\"a\"); \n  str = str.replace(/||||||||||/g,\"e\"); \n  str = str.replace(/||||/g,\"i\"); \n  str = str.replace(/||||||||||||||||/g,\"o\"); \n  str = str.replace(/||||||||||/g,\"u\"); \n  str = str.replace(/||||/g,\"y\"); \n  str = str.replace(//g,\"d\");\n  str = str.replace(/||||||||||||||||/g, \"A\");\n  str = str.replace(/||||||||||/g, \"E\");\n  str = str.replace(/||||/g, \"I\");\n  str = str.replace(/||||||||||||||||/g, \"O\");\n  str = str.replace(/||||||||||/g, \"U\");\n  str = str.replace(/||||/g, \"Y\");\n  str = str.replace(//g, \"D\");\n  // Some system encode vietnamese combining accent as individual utf-8 characters\n  // Mt vi b encode coi cc du m, du ch nh mt k t ring bit nn thm hai dng ny\n  str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); //       huyn, sc, ng, hi, nng\n  str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); //     , , , , \n  // Remove extra spaces\n  // B cc khong trng lin nhau\n  str = str.replace(/ + /g,\" \");\n  str = str.trim();\n  // Remove punctuations\n  // B du cu, k t c bit\n  str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\" \");\n  return str;\n};\n/*eslint-enable */","import React from 'react'\r\nimport axios from 'axios'\r\nimport Config from './Config'\r\nimport { removeVietnameseTones } from './components/messenger/utils'\r\n\r\nconst ORG_CODE = {\r\n  'f1': 'Nhm HS, SV',\r\n  'f2': 'CLB thuc trng hc',\r\n  'f3': 'Trng cng lp',\r\n  'f4': 'T chc phi li nhun',\r\n  'p1': 'T chc c li nhun',\r\n}\r\n\r\nclass Utils {\r\n  static loadSettings() {\r\n    Config.INBOX_MARK_READ_ON_OPEN = Utils.settings.markReadOnOpenInbox\r\n  }\r\n\r\n  static getToken() {\r\n    const token = Utils.getLocalStorage('token')\r\n    if (!token) window.location.href = '#/login'\r\n    else return token\r\n  }\r\n\r\n  static checkDebounce(name) {\r\n    if (!window.lastRun) window.lastRun = {}\r\n    const last = window.lastRun[name] || 0\r\n    const now = Date.now()\r\n    if (now - last < 500) {\r\n      return true\r\n    } else {\r\n      window.lastRun[name] = now\r\n    }\r\n  }\r\n\r\n  static checkError(res) {\r\n    if (res && res.data && res.data.error === 'Invalid token') {\r\n      Utils.removeLocalStorage('token')\r\n      window.location.href = '#/'\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  static setLocalStorage(name, value) {\r\n    localStorage.setItem('tonghopevent:' + name, JSON.stringify(value))\r\n  }\r\n  \r\n  static getLocalStorage(name) {\r\n    const item = localStorage.getItem('tonghopevent:' + name) || null\r\n    if (item === null) return null\r\n    return JSON.parse(item)\r\n  }\r\n  \r\n  static removeLocalStorage(name) {\r\n    localStorage.removeItem('tonghopevent:' + name)\r\n  }\r\n  \r\n  static getDateStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let d = date.getDate()\r\n    let m = date.getMonth() + 1\r\n    let y = date.getFullYear()\r\n    return `${d < 10 ? '0' : ''}${d}-${m < 10 ? '0' : ''}${m}-${y}`\r\n  }\r\n\r\n  static getTimeStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let hh = date.getHours()\r\n    let mm = date.getMinutes()\r\n    return `${hh < 10 ? '0' : ''}${hh}h${mm < 10 ? '0' : ''}${mm}`\r\n  }\r\n\r\n  static extractFacebookUsername(text = '') {\r\n    const matched = text.replace('/pg/', '/').match(/[facebok]+\\.com\\/([^?/]+)/)\r\n    if (!matched || matched.length < 1) return null\r\n    const uname = matched[1]\r\n    if (uname === 'events') return null\r\n    const _id = uname.match(/-([0-9]{7,20})$/)\r\n    if (!_id || _id.length < 1) return uname\r\n    else return _id[1]\r\n  }\r\n\r\n  static makeRequest(url, method = 'get', payload = {}) {\r\n    const token = Utils.getLocalStorage('token')\r\n    const _url = url + (url.indexOf('?') !== -1 ? '&' : '?') + 'token=' + token\r\n    return axios[method](_url, payload)\r\n  }\r\n\r\n  static cleanFBLink(url = '') {\r\n    return url.replace(/[&?](__|eid|fref)[^&?\\s]+/g, '')\r\n  }\r\n\r\n  static getOrgName(doc) {\r\n    return ORG_CODE[doc.org]\r\n  }\r\n\r\n  static fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n    \r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n  \r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n  \r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n  \r\n    document.body.removeChild(textArea);\r\n  }\r\n\r\n  static copyTextToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n      Utils.fallbackCopyTextToClipboard(text);\r\n      return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function() {\r\n      console.log('Async: Copying to clipboard was successful!');\r\n    }, function(err) {\r\n      console.error('Async: Could not copy text: ', err);\r\n    });\r\n  }\r\n\r\n  static nl2br(text) {\r\n    return text.trim().replace(/\\r/g, '').split('\\n').map(function(item, i, arr) {\r\n      const isLast = i === arr.length - 1\r\n      return <span key={i}>{item}{!isLast && <br/>}</span>\r\n    })\r\n  }\r\n\r\n  static getFormUrl(psid, tag) {\r\n    const euc = encodeURIComponent;\r\n    return `https://docs.google.com/forms/d/e/1FAIpQLSds9-as5kOcCr9_gtQ-4xic8-CTSmsQaHEajU-OX4xGpz8wHQ/viewform?usp=pp_url&entry.450789842=${euc(psid)}${tag ? '&entry.1699976597=' + euc(tag) : ''}`;\r\n  }\r\n\r\n  static getParameterByName(name) {\r\n    const url = window.location.href;\r\n    /*eslint-disable */\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    /*eslint-enable */\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\r\n    var results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n\r\n  static getPsid() {\r\n    const _id = Utils.getParameterByName('psid_hashed') || '';\r\n    const _psid = _id.match(/[0-9]{3,20}[A-Z]{3,10}/);\r\n    const psid = _psid ? _psid[0] : 'none';\r\n    return psid;\r\n  }\r\n\r\n  static goToInbox(inboxData) {\r\n    const {id, senders} = inboxData;\r\n    const name = senders.data[0].name;\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\r\n    const baseUrl = window.location.href.replace(/#.*/, '');\r\n    window.open(`${baseUrl}#/msg/${id}/${n}`, '_blank').focus();\r\n  }\r\n\r\n  static settings = {\r\n    markReadOnOpenInbox: false,\r\n    ...(Utils.getLocalStorage('settings') || {})\r\n  }\r\n  static setSettings(settings) {\r\n    Utils.setLocalStorage('settings', settings)\r\n    Utils.settings = { ...settings }\r\n    Utils.loadSettings()\r\n  }\r\n}\r\n\r\n// used by inbox component\r\nexport const makeRequest = async (method, endpoint, qs = {}, body = {}) => {\r\n  qs.token = Utils.getToken()\r\n  endpoint = endpoint.replace('/inbox/', '/inbox2/');\r\n  const res = method === 'post'\r\n    ? await axios.post(`${Config.BACKEND}${endpoint}`, body, { params: qs })\r\n    : await axios[method](`${Config.BACKEND}${endpoint}`, { params: qs })\r\n  Utils.checkError(res)\r\n  return res.data\r\n}\r\n\r\nexport default Utils\r\n","import React from 'react';\nimport nl2br from 'react-nl2br';\nimport Loader from '@chatscope/chat-ui-kit-react/dist/cjs/Loader';\nimport { makeRequest } from '../../../Utils';\n\nfunction Card({children}) {\n  return <div style={{\n    padding: '10px',\n    marginBottom: '10px',\n    border: '#cecece solid 2px',\n    position: 'relative',\n  }}>{children}</div>\n}\n\nclass TongHopEvent extends React.Component {\n  state = {\n    templates: [],\n    loading: true,\n    editingIndex: null,\n    editingText: null,\n    showing: false,\n  };\n\n  componentDidMount() {\n    this.loadTemplates();\n    window.openTemplateDialog = this.openTemplateDialog;\n  }\n\n  openTemplateDialog = () => {\n    this.setState({ showing: true });\n  };\n\n  loadTemplates = async () => {\n    this.setState({ loading: true });\n    let templates = (await makeRequest('get', '/inbox/templates'));\n    templates = Object.keys(templates).map(id => ({ id, ...templates[id] }));\n    this.setState({\n      templates, loading: false,\n      editingIndex: null, editingText: null\n    });\n  }\n\n  save = async () => {\n    const { templates, editingIndex, editingText } = this.state;\n    this.setState({ loading: true });\n    await makeRequest('post', '/inbox/templates', {}, {\n      id: templates[editingIndex].id,\n      text: editingText ? editingText : '(empty)',\n    });\n    this.loadTemplates();\n  }\n\n  fillToInput = (t) => () => {\n    window.setMessageInput(t.text);\n    this.setState({ showing: false });\n  }\n\n  render() {\n    const { loading, templates, editingIndex, editingText, showing } = this.state;\n    if (!showing) return null;\n\n    return <div style={{\n      position: 'fixed',\n      maxWidth: '100vw',\n      width: '600px',\n      height: '80vh',\n      Maxheight: '80vh',\n      background: 'white',\n      zIndex: '100',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      border: '#bbb solid 2px',\n      padding: '10px',\n      overflow: 'auto',\n    }}>\n      <button style={{ position: 'absolute', right: '10px' }} onClick={() => this.setState({ showing: false })}>[x] Thot</button>\n      <br/><br/>\n      {!loading && templates.map((t, i) => {\n        return editingIndex === i\n          ? <Card key={i}>\n            <textarea\n              style={{width: '100%'}}\n              value={editingText}\n              onChange={(e) => this.setState({ editingText: e.target.value })}\n              rows={5}\n            ></textarea>\n            <button onClick={this.save}>Save</button>\n            {'  '}\n            <button onClick={() => this.setState({ editingIndex: null, editingText: null })}>Cancel</button>\n          </Card>\n          : <Card key={i}>\n            <p style={{cursor: 'pointer'}} onClick={this.fillToInput(t)}>\n              {nl2br(t.text)}\n            </p>\n            <button onClick={() => this.setState({ editingIndex: i, editingText: t.text })}>Edit</button>\n            {'  '}\n            <button onClick={this.fillToInput(t)}>COPY &amp; PASTE</button>\n            {'  '}\n            {/* <button onClick={() => }>Delete</button> */}\n          </Card>\n      })}\n      {loading && <center><Loader /></center>}\n    </div>\n  }\n}\n\nexport default TongHopEvent;","import TongHopEvent from './components/messenger/custom/TongHopEvent';\r\n\r\n/*var ConfigDebug = {\r\n  BACKEND: 'http://localhost:5000/tonghopevent'\r\n}\r\nvar ConfigProduction = {\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent'\r\n}\r\n\r\nvar Config = ConfigDebug\r\nvar MODE = process.env.REACT_APP_MODE\r\nif (MODE === 'production')\r\n  Config = ConfigProduction*/\r\n\r\nconst Config = {\r\n  PROD: process.env.REACT_APP_MODE === 'production',\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent',\r\n  SOCKETIO: 'https://nuichatbot.herokuapp.com/',\r\n  SOCKETIO_MODULE: 'tonghopevent',\r\n  SELF_PAGE_ID: '242401956152220',\r\n  INBOX_TITLE: 'tonghopevent',\r\n  INBOX_SEND_ABILITY: true,\r\n  INBOX_UNREAD_ABILITY: true,\r\n  INBOX_IGNORED_CONVERSATION: 't_229190944264162',\r\n  INBOX_MARK_READ_ON_OPEN: false,\r\n  VERSION: '4.22',\r\n  CustomMessengerWidget: TongHopEvent,\r\n}\r\n\r\nexport default Config","import React from 'react'\n\nimport Card from '@material-ui/core/Card'\nimport Typography from '@material-ui/core/Typography'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\n\nclass Login extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {}\n    window.changeHeader('Login')\n  }\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value })\n  }\n\n  async onLogin() {\n    if (this.state.username === '' || this.state.password === '') {\n      return window.showAlert({\n        title: 'Please fill in',\n        text: 'Please fill in your username and password'\n      })\n    } else {\n      this.setState({loading: true})\n      const {username, password} = this.state\n      const res = await axios.post(`${Config.BACKEND}/login`, {\n        username, password\n      })\n      this.setState({loading: false})\n      if (res.data.token) {\n        Utils.setLocalStorage('token', res.data.token)\n        window.location.href = '#/'\n      } else {\n        return window.showAlert({\n          title: 'Error',\n          text: res.data.error\n        })\n      }\n    }\n  }\n\n  async onRegister() {}\n\n  render() {\n    var classes = {\n      input: {\n        marginBottom: '20px',\n        width: '500px',\n        maxWidth: '100%'\n      },\n      container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      cardStyle: {\n        maxWidth: '500px',\n        marginTop: '20px',\n        marginRight: 'auto',\n        marginLeft: 'auto',\n      }\n    }\n\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    const form = (\n      <div>\n        <Card style={classes.cardStyle}>\n          <CardContent>\n            <Typography variant=\"h5\" component=\"h2\">Admin - TongHopEvent</Typography>\n            <Typography color=\"textSecondary\">Please login to continue</Typography>\n            <TextField\n              label=\"Username\"\n              type=\"text\"\n              value={this.state.username}\n              style={classes.input}\n              onChange={this.handleChange('username')}\n              margin=\"normal\"\n            />\n            <TextField\n              label=\"Password\"\n              type=\"password\"\n              value={this.state.password}\n              style={classes.input}\n              onChange={this.handleChange('password')}\n              margin=\"normal\"\n            />\n            <div>\n              <Button onClick={this.onLogin.bind(this)} color='primary'>Login</Button>\n            </div>\n          </CardContent>        \n        </Card>\n      </div>\n    )\n\n    return this.state.loading ? loading : form\n  }\n}\n\nexport default Login","import React from 'react'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport PropTypes from 'prop-types'\n\nclass NoteEditDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      comment: props.doc.comment || '',\n    }\n  }\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    doc: PropTypes.any.isRequired,\n  }\n\n  render() {\n    const { comment } = this.state\n    const { onClose } = this.props\n\n    return (\n      <React.Fragment>\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">Ghi ch</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Bn c th  li ghi ch cho bi vit ny. Ch c Admin mi nhn thy ghi ch.\n            </DialogContentText>\n            <TextField\n              multiline\n              rowsMax=\"20\"\n              value={comment}\n              onChange={event => {this.setState({ comment: event.target.value })}}\n              margin=\"normal\"\n              variant=\"outlined\"\n              fullWidth\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => onClose(false)} color=\"primary\">\n              Quay li\n            </Button>\n            <Button onClick={() => onClose(comment)} color=\"primary\">\n              LU GHI CH\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default NoteEditDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport Linkify from 'react-linkify'\nimport Fab from '@material-ui/core/Fab'\nimport Divider from '@material-ui/core/Divider'\nimport CheckIcon from '@material-ui/icons/Check'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport NoteEditDialog from './NoteEditDialog'\nimport './Doc.css'\n\nclass Doc extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: false,\n      isNoteEditOpen: false,\n      isCopied: false,\n      isExpanded: !this.props.admin,\n      copyContent: this.props.admin ? this.getCopyContent() : '',\n    }\n\n    if (this.props.doc && this.props.doc.linkfb) {\n      this.fbusername = Utils.extractFacebookUsername(this.props.doc.linkfb)\n    }\n\n    if (props.admin) {\n      if (props.doc.image)\n        this.state.publishAction = 'publish'\n      else if (this.fbusername)\n        this.state.publishAction = 'getimage'\n      else\n        this.state.publishAction = null\n    }\n  }\n\n  static propTypes = {\n    doc: PropTypes.object.isRequired,\n  }\n\n  async updateDocField(field, val, url, data) {\n    this.setState({loading: true})\n    const {doc} = this.props\n    const res = await axios.post(url, data)\n    if (res.data.success) {\n      const newDoc = JSON.parse(JSON.stringify(doc))\n      newDoc[field] = val\n      this.props.setDoc(this.props.i, newDoc)\n    } else {\n      window.showAlert({\n        title: 'Error',\n        text: res.data.error\n      })\n    }\n    this.setState({loading: false})\n  }\n\n  async toggleTrashDoc() {\n    const { doc } = this.props\n    const trashed = !doc.trashed\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'trashed', trashed,\n      `${Config.BACKEND}/doc/${doc.id}/trashed?token=${token}`, {trashed}\n    )\n  }\n\n  async toggleApproved() {\n    const {doc} = this.props\n    const approved = !doc.approved\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'approved', approved,\n      `${Config.BACKEND}/doc/${doc.id}/approved?token=${token}`, {approved}\n    )\n  }\n\n  async updateComment(cmt) {\n    const {doc} = this.props\n    const token = Utils.getLocalStorage('token')\n    await this.updateDocField(\n      'comment', cmt || '',\n      `${Config.BACKEND}/doc/${doc.id}/comment?token=${token}`, {comment: cmt}\n    )\n  }\n\n  getCopyContent() {\n    const { doc } = this.props\n\n    const content = `-- ${doc.name} --\\n` +\n    `${this.generateLocationTag(doc)} ${doc.type.join(' ')}\\n\\n` +\n    ` M t: ${doc.description.trim()}\\n\\n` +\n    ` Link facebook: ${Utils.cleanFBLink(doc.linkfb)}\\n` +\n    (!!doc.wanted ? ' Yu cu i tng: ' + doc.wanted.join(', ').trim() + '\\n' : '') + \n    (!!doc.deadline ? ' Deadline tuyn nhn s: ' + doc.deadline.trim() + '\\n' : '') +\n    (!!doc.benefit ? ' Quyn li khi tham gia d n:\\n' + doc.benefit.trim() + '\\n' : '') +\n    `\\nTrackID:${doc.psid}:${doc.id}`\n\n    return content.trim()\n  }\n\n  generateLocationTag(doc) {\n    const { location } = doc\n    if (!location) return ''\n    return location === 'Ton quc'\n      ? `#d_n_ton_quc`\n      : `#d_n__${doc.location.replace(/\\s+/g, '_')}`\n  }\n\n  getImageUrl() {\n    const { doc } = this.props\n    return doc.image ? 'https://drive.google.com/uc?export=view&id=' + doc.image[0] : null\n  }\n\n  _renderNonAdminInfo() {\n    const { doc } = this.props\n    return <p style={{\n      backgroundColor: doc.trashed ? '#ffa3a3' : '#eee',\n      padding: '10px',\n      width: '100%'}}\n    >\n      <center>\n        {doc.trashed ? 'Bi vit ny  b t chi'\n          : (doc.approved\n            ? 'Bi vit ny  c duyt v s sm c ng ln fanpage'\n            : 'Bi vit ny ang i  c kim duyt')\n        }\n      </center>\n    </p>\n  }\n\n  _renderDuplicatedWarningIcon() {\n    const { doc, duplicateHelper, openDuplicateDocDialog } = this.props\n    if (!duplicateHelper || doc.approved) return null\n    const duplicatedDocs = duplicateHelper.checkDoc(doc)\n    if (!duplicatedDocs) return null\n    else return (\n      <Fab\n        size=\"small\"\n        color=\"primary\"\n        style={{marginRight: '15px'}}\n        onClick={() => openDuplicateDocDialog(duplicatedDocs, doc.id)}\n      >\n        <WarningIcon />\n      </Fab>\n    )\n  }\n\n  _renderPostContent() {\n    const { doc } = this.props\n    return (\n      <React.Fragment>\n        <p>{this.generateLocationTag(doc)} {doc.type.join(' ')}</p>\n        <p>{Utils.nl2br(doc.description)}</p>\n        <p>\n           Link facebook: {Utils.cleanFBLink(doc.linkfb)}<br/>\n          {!!doc.wanted && <span> Yu cu i tng: {doc.wanted.join(', ')}<br/></span>}\n          {!!doc.deadline && <span> Deadline tuyn nhn s: {Utils.nl2br(doc.deadline)}<br/></span>}\n          {!!doc.benefit && <span> Quyn li khi tham gia d n: <br/>{Utils.nl2br(doc.benefit)}<br/></span>}\n        </p>\n        {this.props.admin && <p>TrackID:{doc.psid}:{doc.id}</p>}\n        {!!doc.image && <p>nh tu chn: {'https://drive.google.com/open?id=' + doc.image[0]}</p>}\n        <p>\n          (Gi lc {Utils.getTimeStr(doc.created)} ngy {Utils.getDateStr(doc.created)})\n          {!!doc.org && <span><br/>n v t chc: {Utils.getOrgName(doc)}</span>}\n        </p>\n        {(!this.props.admin && !!doc.feedback) && <p> Cu hi, gp : {doc.feedback}</p>}\n      </React.Fragment>\n    )\n  }\n\n  _renderMainCard() {\n    const { doc } = this.props\n    const { isExpanded, copyContent, publishAction, isNoteEditOpen } = this.state\n    const gotoPublish = this.props.gotoPublish || (() => {})\n\n    const componentDecorator = (href, text, key) => (\n      <a href={href} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\n        {text}\n      </a>\n    )\n\n    /* TEXT CONTENT (visible for all) */\n\n    const content = <div>\n      <div style={isExpanded ? null : {maxHeight: '315px', overflow:'hidden', position: 'relative'}} className={isExpanded ? null : 'fade-out'}>\n        {!this.props.admin && this._renderNonAdminInfo()}\n        <p>\n          {doc.approved && <Fab size=\"small\" color=\"primary\" style={{marginRight: '15px'}} disabled>\n            <CheckIcon />\n          </Fab>}\n          {this._renderDuplicatedWarningIcon()}\n          <b>-- {doc.name} --</b>\n          {doc.plan && <p><span className='doc-plan'> Gi {doc.plan.toUpperCase()}</span></p>}\n        </p>\n        <Linkify componentDecorator={componentDecorator}>\n          {this._renderPostContent()}\n        </Linkify>\n      </div>\n      {this.props.admin && <div>\n        <center>\n          <Button onClick={() => this.setState({isExpanded: !isExpanded})}>\n            {isExpanded ? 'Thu gn' : 'Hin thm ...'}\n          </Button>\n        </center>\n      </div>}\n      <Divider />\n\n      {/* ADMIN BUTTONS */}\n\n      {this.props.admin &&\n        <React.Fragment>\n          {!this.state.loading ? <div>\n            {doc.comment && doc.comment.trim().length > 0 && <p><b> Ghi ch:</b> {Utils.nl2br(doc.comment)}</p>}\n            {!!doc.feedback && <p> Cu hi, gp : {doc.feedback}</p>}\n            <Button variant=\"outlined\" onClick={this.toggleTrashDoc.bind(this)} color='primary'>Xa</Button>\n            <Button variant=\"outlined\" onClick={this.toggleApproved.bind(this)} color='primary'>Tick</Button>\n            {publishAction &&\n              <Button variant=\"outlined\" onClick={() => {gotoPublish({\n                id: doc.id,\n                caption: copyContent,\n                url: this.getImageUrl(),\n                fbusername: this.fbusername,\n                psid: doc.psid,\n              }, publishAction)}} color='primary'>ng bi</Button>\n            }\n            <Button variant=\"outlined\" onClick={() => this.setState({isNoteEditOpen: true})} color='primary'>Ghi ch</Button>\n            <Button variant=\"outlined\" onClick={() => this.props.openToolsDialog(doc)} color='primary'>+</Button>\n          </div>\n          : <center>\n            <CircularProgress />\n          </center>}\n        </React.Fragment>\n      }\n    </div>\n\n    /* CARD BACKGROUND */\n\n    return (\n      <div style={{paddingBottom: '20px'}}>\n        <Card>\n          <CardContent\n            style={{backgroundColor: (doc.approved && this.props.admin) ? '#cfd8dc' : '#fff'}}\n            className={(doc.approved && this.props.admin) ? 'approved' : null}\n          >\n            {content}\n          </CardContent>\n        </Card>\n        {isNoteEditOpen && <NoteEditDialog doc={doc} onClose={(cmt) => {\n          this.setState({isNoteEditOpen: false})\n          if (cmt !== false) this.updateComment(cmt)\n        }}/>}\n      </div>\n    )\n  }\n\n  _renderTrashedDoc() {\n    const { doc } = this.props\n    if (this.state.loading) return <center><CircularProgress /></center>\n    else return <p>\n      <b>( xa)</b> {doc.name} &nbsp;&nbsp;&nbsp;\n      <Button\n        variant=\"outlined\"\n        size=\"small\"\n        color=\"primary\"\n        className=\"restore-btn\"\n        onClick={this.toggleTrashDoc.bind(this)}\n      >\n        Khi phc\n      </Button>\n    </p>\n  }\n\n  render() {\n    const { doc, admin } = this.props\n    return doc.trashed && admin\n      ? this._renderTrashedDoc()\n      : this._renderMainCard()\n  }\n}\n\nexport default Doc","import React from 'react'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport TextField from '@material-ui/core/TextField'\nimport Utils from '../Utils'\nimport Config from '../Config'\nimport PropTypes from 'prop-types'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport './ToolsDialog.css'\n\nconst copyObj = (obj) => JSON.parse(JSON.stringify(obj))\n\nconst TEMPLATES = [\n  {\n    desc: 'Bo trng bi',\n    text: ' c ngi nhp thng tin ca d n / cuc thi / s kin ny. Khng bit bn c mun b sung hay thay i g khng nh?\\n\\nNu khng, chng mnh s xa thng tin bn  nhp  khng b trng vi bi  ng.'\n  },{\n    desc: 'Bo b xa v ko ph hp',\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn  b xa do khng ph hp vi iu khon s dng ca chng mnh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\n  }, {\n    desc: 'Bo d n c li nhun',\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn c iu hnh bi mt t chc / c nhn hot ng c li nhun. Da theo iu khon s dng ca chng mnh, bi ca bn phi tr ph 100.000 VN  c th c ng bi ln fanpage nh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\n  },\n  {\n    desc: 'Bo thiu thng tin',\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, do bi vit ca bn cn thiu mt s thng tin nn chng mnh cha th ph duyt c. Bn hy in li form vi y  thng tin hn nh!\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\n  },\n  {\n    desc: 'in li (khng paste link)',\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, chng mnh khng th x l nu bn ch copy-paste mi link bi vit. Bn hy in li form tht r rng, bao gm c phn gii thiu,  ngha d n / cuc thi / s kin nh.\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\n  },\n]\n\nclass ToolsDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true,\n      error: false,\n      showTemplates: true,\n      sendInboxData: null,\n      inboxData: {},\n      isLinkCopied: false,\n    }\n  }\n\n  static propTypes = {\n    open: PropTypes.bool.isRequired,\n    closeToolsDialog: PropTypes.func.isRequired,\n    name: PropTypes.string,\n    psid: PropTypes.string,\n    doc: PropTypes.any.isRequired,\n  }\n\n  async fetchData() {\n    this.setState({ error: false, loading: true, showTemplates: true, isLinkCopied: false })\n    const response = await Utils.makeRequest(\n      `${Config.BACKEND}/inbox/${this.props.psid}`\n    )\n    const { data } = response\n    if (data && Object.keys(data).length > 0) {\n      this.setState({\n        loading: false,\n        error: false,\n        inboxData: data,\n      })\n    } else {\n      this.setState({\n        loading: false,\n        error: true,\n      })\n    }\n  }\n\n  async sendInbox() {\n    const inboxData = copyObj(this.state.sendInboxData)\n    this.setState({sendInboxData: null})\n    this.props.closeToolsDialog()\n    const res = await Utils.makeRequest(\n      `${Config.BACKEND}/inbox/${this.props.psid}`,\n      'post', { message: ' ' + inboxData.text }\n    )\n    if (res.data && res.data.success) {\n      window.toastr.success(' gi tin nhn thnh cng!')\n    } else {\n      window.toastr.error(' C li xy ra, ko th gi tin nhn ')\n    }\n  }\n\n  goToPageInbox() {\n    Utils.goToInbox(this.state.inboxData);\n    this.props.closeToolsDialog();\n  }\n\n  _renderSendInboxDialogAsk() {\n    const { sendInboxData } = this.state;\n    const isWithin24HWindow = (Date.now() - this.props.doc.created) < (86400 * 1000)\n    const handleClose = () => this.setState({sendInboxData: null});\n    if (!sendInboxData) return null;\n    else return <Dialog open={!!sendInboxData} onClose={handleClose}>\n      <DialogTitle id=\"alert-dialog-title\">{sendInboxData.desc}</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {\n            isWithin24HWindow\n             ? 'Gi tin nhn c ni dung nh sau (c th sa):'\n             : 'Khng th t ng gi tin nhn. Hy copy-paste v inbox th cng:'\n          }<br/><br/>\n          <TextField\n            multiline\n            rowsMax=\"20\"\n            value={sendInboxData.text}\n            onChange={event => {this.setState({\n              sendInboxData: {\n                ...sendInboxData,\n                text: event.target.value,\n              }\n            })}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          />\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\"> Quay li </Button>\n        {!isWithin24HWindow\n          && <Button onClick={() => Utils.copyTextToClipboard(sendInboxData.text)} color=\"primary\"> Copy tin nhn </Button>\n        }\n        {isWithin24HWindow\n          ? <Button onClick={() => this.sendInbox()} color=\"primary\"> GI </Button>\n          : <Button onClick={() => this.goToPageInbox()} color=\"primary\"> i ti inbox </Button>\n        }\n      </DialogActions>\n    </Dialog>\n  }\n\n  _renderError() {\n    return (\n      <List>\n        <ListItem button>\n          <ListItemText primary=\"(C li xy ra)\" />\n        </ListItem>\n        <ListItem button onClick={this.props.closeToolsDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  _renderContent() {\n    const { inboxData, showTemplates, isLinkCopied } = this.state\n\n    return (\n      <List>\n        <ListItem button onClick={this.goToPageInbox.bind(this)}>\n          <ListItemText\n            primary=\"i ti inbox\"\n            secondary={`Tn FB: ${inboxData.senders.data[0].name}`}\n          />\n        </ListItem>\n        <Divider />\n        {!showTemplates && <ListItem button onClick={() => this.setState({showTemplates: true})}>\n          <ListItemText primary={` (Hin cc mu tin nhn)`} />\n        </ListItem>}\n        {showTemplates && TEMPLATES.map((t, i) => {\n          return <ListItem button onClick={() => this.setState({ sendInboxData: t })} key={i}>\n            <ListItemText primary={` ${t.desc}`} />\n          </ListItem>\n        })}\n        <Divider />\n          <CopyToClipboard\n            text={`${window.location.protocol}//${window.location.host}/data/#/view/${this.props.doc.id}`}\n            onCopy={() => this.setState({isLinkCopied: true})}\n          >\n            <ListItem button>\n              <ListItemText primary={isLinkCopied ? \"( copy link)\" : \"Copy link bi vit\"} />\n            </ListItem>\n          </CopyToClipboard>\n        <Divider />\n        <ListItem button onClick={this.props.closeToolsDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  render() {\n    const { name, open } = this.props\n\n    return (\n      <React.Fragment>\n        {this._renderSendInboxDialogAsk()}\n        <Dialog\n          open={open}\n          onEnter={this.fetchData.bind(this)}\n          onBackdropClick={this.props.closeToolsDialog}\n          className=\"tools-dialog\"\n          aria-labelledby=\"simple-dialog-title\"\n        >\n          <DialogTitle id=\"simple-dialog-title\">{name ? name.substr(0,24) : ''}</DialogTitle>\n          {this.state.loading\n            ? <center><CircularProgress /></center>\n            : this.state.error ? this._renderError() : this._renderContent()\n          }\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default ToolsDialog\n","import React from 'react'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Dialog from '@material-ui/core/Dialog'\nimport Divider from '@material-ui/core/Divider'\nimport PropTypes from 'prop-types'\nimport Utils from '../Utils'\n\nclass DuplicateDocDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n  }\n\n  static propTypes = {\n    docs: PropTypes.any,\n    selectedDocID: PropTypes.any,\n    closeDuplicateDocDialog: PropTypes.func.isRequired,\n  }\n\n  _renderContent() {\n    const { docs, selectedDocID } = this.props\n    const now = Date.now()\n\n    return (\n      <List>\n        {docs.map((doc) => {\n          if (doc.id === selectedDocID) return null\n          const daysAgo = Math.floor((now - doc.created) / 86400 / 1000)\n          return <ListItem button onClick={\n            () => window.open(`/data/#/view/${doc.id}`, '_blank')\n          } key={doc.id}>\n            <ListItemText\n              primary={doc.name}\n              secondary={`${\n                Utils.getDateStr(doc.created)\n              } lc ${\n                Utils.getTimeStr(doc.created)\n              } ${daysAgo > 0 ? ` (${daysAgo} ngy trc)` : ''}`}\n            />\n          </ListItem>\n        })}\n        <Divider />\n        <ListItem button onClick={this.props.closeDuplicateDocDialog}>\n          <ListItemText primary=\"Quay li\" />\n        </ListItem>\n      </List>\n    )\n  }\n\n  render() {\n    const { docs } = this.props\n\n    return (\n      <Dialog\n        open={!!docs}\n        aria-labelledby=\"simple-dialog-title\"\n      >\n        <DialogTitle id=\"simple-dialog-title\">Bi ng trng</DialogTitle>\n        <DialogContent>\n          Bi ng ny c th b trng vi nhng bi sau:\n        </DialogContent>\n        {docs && this._renderContent()}\n      </Dialog>\n    )\n  }\n}\n\nexport default DuplicateDocDialog\n","\r\nimport Utils from './Utils'\r\n\r\nclass DuplicateHelper {\r\n  seen = {}\r\n\r\n  pushLookbackData(lookbackArr) {\r\n    for (const doc of lookbackArr) {\r\n      const { fbname } = doc;\r\n      if (this.seen[fbname]) {\r\n        this.seen[fbname].push(doc)\r\n      } else {\r\n        this.seen[fbname] = [doc]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remember that we've seen this doc\r\n   * @param {*} doc \r\n   */\r\n  pushDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    if (!uname) return null\r\n    if (this.seen[uname]) {\r\n      this.seen[uname].push(doc)\r\n    } else {\r\n      this.seen[uname] = [doc]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns arr of docs if doc is seen\r\n   * Returns null if doc isn't seen\r\n   * @param {*} doc \r\n   */\r\n  checkDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    const arr = this.seen[uname]\r\n    return (arr && arr.length > 1) ? arr : null\r\n  }\r\n\r\n  /**\r\n   * Clear all remembered docs\r\n   */\r\n  clear() {\r\n    this.seen = {}\r\n  }\r\n}\r\n\r\nexport default DuplicateHelper","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Doc from '../components/Doc'\nimport ToolsDialog from '../components/ToolsDialog'\nimport DuplicateDocDialog from '../components/DuplicateDocDialog'\nimport DuplicateHelper from '../DuplicateHelper'\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\n\nclass Home extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      list: [],\n      toolsDialogOpen: false,\n      toolsDialogDoc: {},\n      duplicateHelper: new DuplicateHelper(),\n      duplicateDocDialog: null,\n      selectedDocID: '',\n    }\n    window.changeHeader('Qun l d liu - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadData()\n    window.markDocApproved = this.markDocApproved\n  }\n\n  componentWillUnmount() {\n    window.markDocApproved = null\n  }\n\n  markDocApproved = (id) => {\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\n    window.DOCID_APPROVED[id] = true\n    this.dispatchDocApproved()\n  }\n\n  dispatchDocApproved = () => {\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\n    this.setState(prevState => ({\n      list: prevState.list.map(doc => {\n        if (window.DOCID_APPROVED[doc.id]) doc.approved = true\n        return doc\n      })\n    }))\n  }\n\n  async loadData() {\n    const duplicateHelper = new DuplicateHelper()\n    const token = Utils.getToken()\n    const [res, {data: lookbackArr}] = await Promise.all([\n      axios.get(`${Config.BACKEND}/feed?token=${token}`),\n      axios.get(`${Config.BACKEND}/lookback?token=${token}`),\n    ])\n    Utils.checkError(res)\n    duplicateHelper.pushLookbackData(lookbackArr);\n    this.setState({\n      loading: false,\n      list: res.data,\n      duplicateHelper,\n    })\n    this.dispatchDocApproved()\n  }\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value })\n  }\n\n  onClickEdit() {\n    this.setState({edit: true})\n  }\n\n  setDoc(i, data) {\n    this.setState(state => {\n      const list = state.list\n      list[i] = data\n      return {list}\n    })\n  }\n\n  openToolsDialog(doc) {\n    this.setState({\n      toolsDialogOpen: true,\n      toolsDialogDoc: doc\n    })\n  }\n\n  openDuplicateDocDialog(docs, docid) {\n    this.setState({\n      duplicateDocDialog: docs,\n      selectedDocID: docid,\n    })\n  }\n\n  render() {\n    var classes = {\n      input: {\n        marginBottom: '20px',\n        width: '500px',\n        maxWidth: '100%'\n      },\n      container: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      cardStyle: {\n        //maxWidth: '800px',\n        marginTop: '20px',\n        marginRight: '20px',\n        marginLeft: '20px',\n      }\n    }\n\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    const { gotoPublish } = this.props\n    const { duplicateDocDialog, duplicateHelper, selectedDocID } = this.state\n    const home = (\n      <React.Fragment>\n        <div style={classes.cardStyle}>\n          { this.state.list.length === 0 && <center><h2>Cha c bi ng no</h2></center> }\n          <ResponsiveMasonry\n            columnsCountBreakPoints={{350: 1, 1000: 2, 1550: 3}}\n          >\n            <Masonry gutter=\"10px\">\n              {this.state.list.map((doc, i) => {\n                return doc ? (\n                  <div key={doc.id}>\n                    <Doc\n                      doc={doc}\n                      setDoc={this.setDoc.bind(this)}\n                      i={i}\n                      admin\n                      gotoPublish={gotoPublish}\n                      openToolsDialog={this.openToolsDialog.bind(this)}\n                      openDuplicateDocDialog={this.openDuplicateDocDialog.bind(this)}\n                      duplicateHelper={duplicateHelper}\n                    />\n                  </div>\n                ) : null\n              })}\n            </Masonry>\n          </ResponsiveMasonry>\n        </div>\n        <ToolsDialog\n          open={this.state.toolsDialogOpen}\n          closeToolsDialog={() => this.setState({toolsDialogOpen: false})}\n          name={this.state.toolsDialogDoc.name}\n          psid={this.state.toolsDialogDoc.psid}\n          doc={this.state.toolsDialogDoc}\n        />\n        <DuplicateDocDialog\n          docs={duplicateDocDialog}\n          selectedDocID={selectedDocID}\n          closeDuplicateDocDialog={() => this.setState({duplicateDocDialog: null})}\n        />\n      </React.Fragment>\n    )\n\n    return this.state.loading ? loading : home\n  }\n}\n\nexport default Home","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Doc from '../components/Doc'\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass View extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      doc: {},\n    }\n    window.changeHeader('Qun l d liu - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadData()\n  }\n\n  async loadData() {\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${Config.BACKEND}/doc/${this.props.id}?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, doc: null})\n    else\n      this.setState({loading: false, doc: res.data})\n  }\n\n  _renderDocView() {\n    return (\n      <div style={classes.cardStyle}>\n        <Doc doc={this.state.doc || {}} />\n      </div>\n    )\n  }\n\n  _renderDocNotFound() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        Bi ng ny khng tn ti hoc  b xo<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    return this.state.loading ? loading : \n      this.state.doc ? this._renderDocView() : this._renderDocNotFound()\n  }\n}\n\nexport default View","import 'date-fns';\nimport React from 'react';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\nclass MaterialUIPickers extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      publish_time: new Date(\n        Date.now() + 20 * 60 * 1000\n      )\n    }\n  }\n\n  componentDidMount() {\n    this.props.handleDateChange(this.state.publish_time.getTime() / 1000)\n  }\n\n  handleDateChange(date) {\n    this.setState({publish_time: date})\n    this.props.handleDateChange(date.getTime() / 1000)\n  }\n\n  render() {\n    const { publish_time } = this.state;\n\n    return (\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\n        <KeyboardDatePicker\n          margin=\"normal\"\n          id=\"mui-pickers-date\"\n          label=\"Date picker\"\n          value={publish_time}\n          onChange={this.handleDateChange.bind(this)}\n          KeyboardButtonProps={{\n            'aria-label': 'change date',\n          }}\n        />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n        <KeyboardTimePicker\n          margin=\"normal\"\n          id=\"mui-pickers-time\"\n          label=\"Time picker\"\n          value={publish_time}\n          onChange={this.handleDateChange.bind(this)}\n          KeyboardButtonProps={{\n            'aria-label': 'change time',\n          }}\n        />\n      </MuiPickersUtilsProvider>\n    );\n  }\n}\n\nexport default MaterialUIPickers;","import React, {useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport Utils from '../Utils';\nimport DatePicker from '../components/DatePicker';\n\nconst ONE_DAY_IN_MS = 86400 * 1000;\nconst INTERVAL_BETWEEN_POSTS_IN_MS = 15 * 60000; // 10 mins\nconst TIMESLOT_BEGIN_AT = (-7 + 20) * 60 * 60000; // 20h everyday GMT+7\nconst MIN_SCHEDULED_TIME_INTERVAL = 20 * 60000; // must schedule at least 20 mins in advance\nconst NUMBER_OF_DAYS = 5;\nconst NUMBER_OF_TIMESLOT = 9;\n\nconst generateTimeslots = () => {\n  const now = Date.now();\n  const beginOfDay = Math.floor(now / ONE_DAY_IN_MS) * ONE_DAY_IN_MS;\n\n  const timeslots = [];\n  let day = 0;\n  while (timeslots.length < NUMBER_OF_DAYS) {\n    const startAt = beginOfDay + TIMESLOT_BEGIN_AT + day*ONE_DAY_IN_MS;\n    const slotsOfDay = [];\n    for (let i = 0; i < NUMBER_OF_TIMESLOT; i++) {\n      const time = startAt + INTERVAL_BETWEEN_POSTS_IN_MS*i;\n      if (time - now > MIN_SCHEDULED_TIME_INTERVAL) {\n        slotsOfDay.push(time);\n      }\n    }\n    if (slotsOfDay.length > 2) timeslots.push({\n      startAt,\n      slotsOfDay,\n    });\n    day++;\n  }\n\n  return timeslots;\n};\n\nconst isSlotTaken = (stat, time) => {\n  return stat.some((t, i) => {\n    if (time - INTERVAL_BETWEEN_POSTS_IN_MS/2 < t\n      && t < time + INTERVAL_BETWEEN_POSTS_IN_MS/2\n    ) {\n      stat.splice(i, 1);\n      return true;\n    }\n    return false;\n  });\n}\n\nconst ScheduledList = ({stat}) => {\n  return <>\n    <p><b>Cc bi ng  ln lch</b></p>\n    <ul>\n      {stat.map(s => {\n        return <li key={s}>{Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</li>\n      })}\n    </ul>\n  </>;\n}\n\n// statArr = [int, int...]\nexport const TimeslotPicker = ({ statArr, value, onChange }) => {\n  const [useOldPicker, setUseOldPicker] = useState(false);\n  const timeslots = generateTimeslots();\n  const stat = JSON.parse(JSON.stringify(statArr));\n  const val = value * 1000;\n\n  return <>\n    <p>\n      <b>Ln lch bi ng</b>{'   '}\n      <Button\n        variant='outlined'\n        size='small'\n        onClick={() => setUseOldPicker(!useOldPicker)}\n      >{useOldPicker ? 'Chn gi theo slot' : 'Chn gi th cng'}</Button>\n    </p>\n\n    {!useOldPicker && timeslots.map(day => <p key={day.startAt}>\n      {Utils.getDateStr(day.startAt)}<br/>\n      {day.slotsOfDay.map(time => <React.Fragment key={time}>\n        <Button\n          variant={val === time ? 'contained' : 'outlined'} size='small'\n          onClick={() => onChange(Math.round(time/1000))}\n          disabled={isSlotTaken(stat, time)}\n        >{Utils.getTimeStr(time)}</Button>\n        {'  '}\n      </React.Fragment>)}\n    </p>)}\n\n    {useOldPicker && <>\n      <DatePicker\n        handleDateChange={(date) => onChange(Math.round(date))}\n      />\n      <ScheduledList stat={statArr} />\n    </>}\n  </>\n}\n","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Config from '../Config'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Img from 'react-image'\nimport { TimeslotPicker } from '../components/Timeslots'\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\n\nconst classes = {\n  cardStyle: {\n    marginTop: '20px',\n    marginRight: '1em',\n    marginLeft: '1em',\n    display: 'flex',\n    flexWrap: 'wrap',\n  }\n}\n\nclass Publish extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      completed: false,\n      loading: true,\n      stat: [],\n      inboxData: null,\n    }\n    if (props.data) {\n      this.state.id = props.data.id\n      this.state.caption = props.data.caption\n      this.state.url = props.data.url\n      this.state.psid = props.data.psid\n      this.state.scheduled_publish_time = 0\n    }\n    window.changeHeader('Cng c ng bi - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.loadStat()\n    this.loadInbox()\n  }\n\n  async loadStat() {\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${Config.BACKEND}/publish/stat?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, stat: []})\n    else\n      this.setState({loading: false, stat: res.data})\n  }\n\n  async loadInbox() {\n    const { data } = await Utils.makeRequest(`${Config.BACKEND}/inbox/${this.state.psid}`)\n    if (data && Object.keys(data).length > 0) {\n      this.setState({ inboxData: data })\n    }\n  }\n\n  getErrorMessage = (data) => {\n    if (data?.error?.message) {\n      return 'L do: ' + data.error.message\n    } else {\n      return 'Hy bo li cho Nui.'\n    }\n  }\n  \n  async doPublish() {\n    //this.setState({loading: true})\n    const token = Utils.getLocalStorage('token')\n    const idInDatabase = this.state.id\n    const postData = {\n      caption: this.state.caption,\n      url: this.state.url,\n      scheduled_publish_time: this.state.scheduled_publish_time\n    }\n    const toast = window.toastr.info('ang ng bi...', 'Publish tool', {timeOut: 60000})\n    window.location.hash = '#/manage'\n    const { data } = await axios.post(`${Config.BACKEND}/publish?token=${token}`, postData)\n    window.toastr.clear(toast)\n    if (data.id) {\n      window.toastr.success(' ng bi thnh cng!', 'Publish tool')\n      if (window.markDocApproved) window.markDocApproved(idInDatabase)\n    } else {\n      window.toastr.error('Li: Khng th ng bi. ' + this.getErrorMessage(data), 'Publish tool', {timeOut: 20000})\n    }\n  }\n\n  _renderComposerCard() {\n    const imgStyle = {\n      height: '300px',\n      maxWidth: '100%',\n    }\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/manage'}>Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Son bi ng</b>\n          </p>\n          <center>\n            <Img alt=''\n              src={this.state.url}\n              style={imgStyle}\n              loader={<div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>}\n            />  \n          </center>\n          <TextField\n            label=\"Ni dung bi ng\"\n            multiline\n            rowsMax=\"20\"\n            value={this.state.caption}\n            onChange={event => {this.setState({ caption: event.target.value });}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          />\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderPublishCard() {\n    const { scheduled_publish_time, stat } = this.state\n    const isDateOK = (scheduled_publish_time - (Date.now() / 1000)) > 15*60\n    const s = scheduled_publish_time * 1000\n\n    return (\n      <Card>\n        <CardContent>\n          <TimeslotPicker\n            value={scheduled_publish_time}\n            statArr={stat}\n            onChange={(time) => this.setState({ scheduled_publish_time: time })}\n          />\n          <br/><br/>\n          {isDateOK && <Button variant='outlined' onClick={() => {\n            window.showAlert({\n              title: 'Xc nhn ng bi',\n              text: `ng bi vo lc ${Utils.getTimeStr(s)} ngy ${Utils.getDateStr(s)} ?`,\n              onClickOK: this.doPublish.bind(this),\n              showCancel: true\n            })\n          }}>ng bi</Button>}\n          {!isDateOK && scheduled_publish_time > 0\n            && <p style={{color: 'red'}}>Gi ng bi phi cch hin ti t nht 15 pht</p>\n          }\n        </CardContent>\n      </Card>\n    )\n  }\n\n  _renderCompletedCard() {\n    const { scheduled_publish_time } = this.state\n    const s = scheduled_publish_time * 1000\n\n    return (\n      <div style={classes.cardStyle}>\n        <Card>\n          <CardContent>\n            <h2>ng bi thnh cng</h2>\n            <p>Bi vit  c t gi  ng vo lc {Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</p>\n            <Button\n              variant='outlined'\n              onClick={() => window.location.hash = '#/'}>Tr v trang ch</Button>\n          </CardContent>\n        </Card>\n      <br/><br/>\n      </div>\n    )\n  }\n\n  _renderInboxCard() {\n    const { inboxData } = this.state;\n    return (\n      <Card>\n        <CardContent>\n          {!inboxData && <center><CircularProgress /></center>}\n          {inboxData && <>\n            <b>Tin nhn mi nht ( trn l mi, di l c)</b>\n            {'   '}\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => Utils.goToInbox(inboxData)}\n            >M inbox</Button>\n            <br/>\n            ------<br/>\n            {inboxData.messages.data.map(msg => <p key={msg.id}>\n              <b>{msg.from.name}</b>: {msg.message}\n            </p>)}\n          </>}\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderMain() {\n    return (\n      <div style={{margin: '20px'}}>\n        <ResponsiveMasonry\n          columnsCountBreakPoints={{350: 1, 750: 2, 900: 2}}\n        >\n          <Masonry gutter=\"10px\">\n            {this._renderComposerCard()}\n            <div></div> {/* this is to make sure inboxCard is on the right */}\n            {this._renderPublishCard()}\n            {this._renderInboxCard()}\n          </Masonry>\n        </ResponsiveMasonry>\n        <br/><br/><br/>\n      </div>\n    )\n  }\n\n  _renderError() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        Hy vo trang ch v th li<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    if (this.state.loading) return loading\n    if (this.state.completed) return this._renderCompletedCard()\n\n    return this.props.data ? this._renderMain() : this._renderError()\n  }\n}\n\nexport default Publish","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Img from 'react-image'\n\nconst imgStyle = {\n  maxHeight: '300px',\n  maxWidth: '100%',\n}\n\nconst imgLoaderStyle = {\n  height: '300px',\n  width: '100%',\n}\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass GetImage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      showGetToken: false,\n      access_token: '',\n      completed: false,\n      loading: true,\n      imgs: [],\n    }\n    if (props.data) {\n      this.state.caption = props.data.caption\n      this.state.fbusername = props.data.fbusername\n    } else {\n      this.state.error = 'Hy v trang ch v th li'\n    }\n    window.changeHeader('Chn nh bi ng - TongHopEvent')\n  }\n\n  componentDidMount() {\n    this.fetchFacebookApi()\n  }\n\n  async fetchFacebookApi() {\n    const fbtoken = Utils.getLocalStorage('fbtoken')\n    try {\n      const res = await axios.get(`https://graph.facebook.com/${this.state.fbusername}?fields=feed.limit(20)%7Bfull_picture%7D%2Cpicture.width(720)%7Burl%7D&access_token=${fbtoken}`)\n      if (res.data.error) {\n        this.setState({loading: false, showGetToken: true})\n      } else {\n        const imgs = res.data.feed.data.map(post => post.full_picture)\n        imgs.unshift(res.data.picture.data.url)\n        this.setState({\n          loading: false,\n          showGetToken: false,\n          imgs: imgs,\n        })\n      }\n    } catch (e) {\n      if (e.response.status === 404) {\n        this.setState({loading: false, error: 'Khng th m trang facebook ny'})\n      } else {\n        this.setState({loading: false, showGetToken: true})\n      }\n    }\n  }\n\n  onSaveToken() {\n    let fbtoken = this.state.access_token\n    fbtoken = fbtoken.match(/EA[a-zA-Z0-9]+/)\n    try {\n      Utils.setLocalStorage('fbtoken', fbtoken[0])\n      const urlNow = window.location.hash\n      window.location.hash = '#/reload'\n      setTimeout(() => { window.location.hash = urlNow }, 50)\n    } catch (e) {\n      window.alert('token khng hp l')\n    }\n  }\n\n  _renderTitleCard() {\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/'}>Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Chn nh cho bi ng</b>\n          </p>\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderImageCard(url) {\n    return (\n      <Card>\n        <CardContent>\n          <center>\n            <Img alt=''\n              src={url}\n              style={imgStyle}\n              loader={<div style={imgLoaderStyle}><center><br/><br/><CircularProgress /></center></div>}\n            />  \n          </center>\n          <Button\n              variant='outlined'\n              size='small'\n              style={{ float: 'right', margin: '10px' }}\n              onClick={() => {\n                const _data = JSON.parse(JSON.stringify(this.props.data))\n                _data.url = url\n                this.props.gotoPublish(_data, 'publish')\n              }}>Chn nh ny</Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  _renderGetTokenCard() {\n    return (\n      <Card>\n        <CardContent>\n          <p>\n            <Button\n              variant='outlined'\n              size='small'\n              onClick={() => window.location.hash = '#/'}\n            >Tr v</Button>\n            &nbsp;&nbsp;&nbsp;\n            <b>Ly token</b><br/>\n            <br/>\n            Bn cha c token hoc token  b ht hn. Hy lm theo hng dn ny  ly token: <a href=\"https://blog.ngxson.com/tonghopevent/#lay-token\" target=\"_blank\" rel=\"noopener noreferrer\">[Bm vo y]</a><br/>\n            Lu : token s c lu trn my ny. Bn c th ly token t my tnh  dng trn T.<br/>\n            in token ca bn vo  di y:<br/>\n          </p>\n          <TextField\n            multiline\n            rowsMax=\"5\"\n            value={this.state.access_token}\n            onChange={event => {this.setState({ access_token: event.target.value });}}\n            margin=\"normal\"\n            variant=\"outlined\"\n            fullWidth\n          /><br/>\n          <Button\n            variant='outlined'\n            onClick={this.onSaveToken.bind(this)}\n          >Tip tc</Button>\n        </CardContent>        \n      </Card>\n    )\n  }\n\n  _renderMain() {\n    return (\n      <React.Fragment>\n        {this.state.showGetToken &&\n          <div style={classes.cardStyle}>\n            {this._renderGetTokenCard()}\n          </div>\n        }\n        {!this.state.showGetToken &&\n          <div style={classes.cardStyle}>\n            {this._renderTitleCard()}\n          </div>\n        }\n        {!this.state.showGetToken &&\n          this.state.imgs.map((url, i) =>\n            <div style={classes.cardStyle} key={i}>\n              {this._renderImageCard(url)}\n            </div>\n          )\n        }\n        <br />\n        <br />\n      </React.Fragment>\n    )\n  }\n\n  _renderError() {\n    return (\n      <center>\n        <br/><br/>\n        <h2>C li xy ra</h2>\n        {this.state.error}<br/><br/>\n        <Button\n          variant='outlined'\n          size='small'\n          onClick={() => window.location.hash = '#/'}\n        >Tr v</Button>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const loading = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    if (this.state.loading) return loading\n    if (this.state.error) return this._renderError()\n\n    return this._renderMain()\n  }\n}\n\nexport default GetImage","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nclass Alert extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      open: false,\n      onClickOK: null\n    }\n    window.showAlert = this.show.bind(this)\n  }\n\n  show(data) {\n    this.setState({\n      open: true,\n      title: data.title,\n      text: data.text,\n      onClickOK: data.onClickOK || null,\n      showCancel: data.showCancel\n    })\n  }\n\n  handleClickOK = () => {\n    if (this.state.onClickOK) {\n      this.state.onClickOK();\n      this.setState({ onClickOK: null });\n    }\n    this.setState({ open: false });\n  };\n\n  handleCancel = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return (\n      <div>\n        <Dialog\n          open={this.state.open}\n          onClose={this.handleCancel}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">{this.state.title}</DialogTitle>\n          <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n              {this.state.text}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleClickOK.bind(this)} color=\"primary\" autoFocus>OK</Button>\n            {this.state.showCancel\n              ? <Button onClick={this.handleCancel.bind(this)} color=\"primary\" autoFocus>Cancel</Button>\n              : null}\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n}\n\nexport default Alert;","import React from 'react'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport PropTypes from 'prop-types'\nimport Utils from '../Utils'\n\nclass FBPostEditDialog extends React.Component {\n  constructor(props) {\n    super(props)\n    console.log(props.post)\n    this.state = {\n      title: props.post.message.split('\\n')[0] || '',\n      message: props.post.message,\n      loading: false,\n    }\n  }\n\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    post: PropTypes.any.isRequired,\n    editPostEndpoint: PropTypes.string.isRequired,\n  }\n\n  onEditPost = async () => {\n    const { message } = this.state\n    const { post, onClose } = this.props\n    this.setState({ loading: true })\n    const token = Utils.getLocalStorage('token')\n    await axios.patch(`${this.props.editPostEndpoint}/${post.id}?token=${token}`, {\n      message: message\n    })\n    onClose(true);\n  }\n\n  render() {\n    const { title, message, loading } = this.state\n    const { post, onClose } = this.props\n\n    return (\n      <React.Fragment>\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\n          {loading ? <center><br/><br/><CircularProgress /><br/><br/></center> : <>\n            <DialogTitle id=\"form-dialog-title\">Sa bi vit</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                Bi vit: {title}<br/>\n                ng lc: {Utils.getTimeStr(post.time)} ngy {Utils.getDateStr(post.time)}\n              </DialogContentText>\n              <TextField\n                multiline\n                rowsMax=\"20\"\n                value={message}\n                onChange={event => {this.setState({ message: event.target.value })}}\n                margin=\"normal\"\n                variant=\"outlined\"\n                fullWidth\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => onClose(false)} color=\"primary\">\n                Quay li\n              </Button>\n              <Button onClick={this.onEditPost} color=\"primary\">\n                LU POST\n              </Button>\n            </DialogActions>\n          </>}\n        </Dialog>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default FBPostEditDialog\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport axios from 'axios'\nimport Img from 'react-image'\nimport Utils from '../../Utils'\nimport Config from '../../Config'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport Button from '@material-ui/core/Button'\nimport FBPostEditDialog from '../../components/FBPostEditDialog'\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nconst imgStyle = {\n  height: '300px',\n  maxWidth: '100%',\n}\n\nconst ImgLoader = () => <div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>\n\nclass PostList extends React.Component {\n  constructor(props) {\n    super()\n    this.props = props\n    this.state = {\n      loading: true,\n      posts: [],\n      editingPost: null,\n    }\n    window.changeHeader('Bi  ln lch - TongHopEvent')\n  }\n\n  static propTypes = {\n    loadFeedEndpoint: PropTypes.string.isRequired,\n    editPostEndpoint: PropTypes.string.isRequired,\n    deletePostEndpoint: PropTypes.string.isRequired,\n    timeFieldName: PropTypes.string.isRequired,\n    newestFirst: PropTypes.bool,\n  };\n\n  componentDidMount() {\n    this.loadData()\n  }\n\n  async loadData() {\n    const { newestFirst } = this.props;\n    this.setState({loading: true, editingPost: null})\n    const token = Utils.getLocalStorage('token')\n    const res = await axios.get(`${this.props.loadFeedEndpoint}?token=${token}`)\n    if (res.data.error)\n      this.setState({loading: false, posts: []})\n    else {\n      const arr = newestFirst ? res.data : res.data.reverse()\n      this.setState({loading: false, posts: this.processTimeField(arr) })\n    }\n  }\n\n  processTimeField = (data) => {\n    if (this.props.timeFieldName === 'created_time') {\n      return data.map(p => ({\n        ...p,\n        created_time: (new Date(p.created_time)).getTime() / 1000,\n      }))\n    } else {\n      return data\n    }\n  }\n\n  deletePost = (post) => async () => {\n    if (window.confirm('Bn c chc chn xa?')) {\n      this.setState({loading: true})\n      const token = Utils.getLocalStorage('token')\n      await axios.delete(`${this.props.deletePostEndpoint}/${post.id}?token=${token}`)\n      this.loadData()\n    }\n  }\n\n  openOnFB = (post) => () => {\n    window.open(`https://www.facebook.com/${post.id}`, '_blank').focus();\n  }\n\n  onEditDialogClose = (shouldReload) => {\n    if (shouldReload) {\n      this.loadData()\n    } else {\n      this.setState({editingPost: null})\n    }\n  }\n\n  _renderMainView() {\n    const { timeFieldName } = this.props;\n\n    return this.state.posts.map((post, i) => {\n      const isFromUser = post.from && post.from.id !== Config.SELF_PAGE_ID;\n      return <div style={classes.cardStyle} key={post.id}>\n        <Card>\n          <CardContent>\n            <p><b>{Utils.getTimeStr(post[timeFieldName] * 1000)} ngy {Utils.getDateStr(post[timeFieldName] * 1000)}</b></p>\n            <Img alt=''\n              src={post.full_picture}\n              style={imgStyle}\n              loader={<ImgLoader />}\n            />\n            {isFromUser && <p style={{\n                backgroundColor: '#eee',\n                padding: '10px',\n                fontWeight: 'bold',\n              }}\n              children=\"(Bi vit ny do c gi ng ln page)\"\n            />}\n            <p>\n              {Utils.nl2br(post.expanded ? post.message : post.message.substring(0, 250))}\n              <br/>\n              {/* eslint-disable */}\n              <a href=\"#\" onClick={(e) => {\n                e.preventDefault()\n                this.setState({posts: this.state.posts.map((p, j) => {\n                  const cloned = JSON.parse(JSON.stringify(p))\n                  if (i === j) cloned.expanded = !cloned.expanded\n                  return cloned\n                })})\n              }}>{post.expanded ? 'Thu gn' : '... c thm'}</a><br/>\n              {/* eslint-enable */}\n            </p>\n            <p>\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.deletePost(post)}>Xa</Button>\n              &nbsp;&nbsp;\n              <Button color=\"primary\" variant=\"outlined\" onClick={() => this.setState({ editingPost: post })} disabled={isFromUser}>Sa</Button>\n              &nbsp;&nbsp;\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.openOnFB(post)}>Xem trn FB</Button>\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    })\n  }\n\n  _renderDocNotFound() {\n    return (\n      <center>\n        <br/><br/>\n        (Khng c d liu)<br/>\n        <br/><br/>\n      </center>\n    )\n  }\n\n  render() {\n    const { editingPost, loading, posts } = this.state\n\n    const loadingComponent = <div>\n      <br/><br/><br/>\n      <center><CircularProgress /></center>\n    </div>\n\n    return <>\n      {editingPost && <FBPostEditDialog\n        post={editingPost}\n        onClose={this.onEditDialogClose}\n        editPostEndpoint={this.props.editPostEndpoint}\n      />}\n      {loading ? loadingComponent : \n        posts.length > 0 ? this._renderMainView() : this._renderDocNotFound()\n      }\n    </>\n  }\n}\n\nexport default PostList","import React from 'react'\nimport PostList from './PostList'\nimport Config from '../../Config'\n\nconst Scheduled = () => {\n  return <PostList\n    loadFeedEndpoint={`${Config.BACKEND}/publish/scheduled`}\n    editPostEndpoint={`${Config.BACKEND}/publish/post`}\n    deletePostEndpoint={`${Config.BACKEND}/publish/post`}\n    timeFieldName=\"scheduled_publish_time\"\n    newestFirst={false}\n  />\n}\n\nexport default Scheduled","import React from 'react'\nimport PostList from './PostList'\nimport Config from '../../Config'\n\nconst FBFeed = () => {\n  return <PostList\n    loadFeedEndpoint={`${Config.BACKEND}/fbfeed`}\n    editPostEndpoint={`${Config.BACKEND}/fbfeed`}\n    deletePostEndpoint={`${Config.BACKEND}/fbfeed`}\n    timeFieldName=\"created_time\"\n    newestFirst={true}\n  />\n}\n\nexport default FBFeed","import React from 'react'\nimport Utils from '../Utils'\nimport Card from '@material-ui/core/Card'\nimport CardContent from '@material-ui/core/CardContent'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport Button from '@material-ui/core/Button'\n\n\nconst classes = {\n  cardStyle: {\n    maxWidth: '800px',\n    marginTop: '20px',\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  }\n}\n\nclass Settings extends React.Component {\n  state = {\n    ...Utils.settings,\n  }\n\n  saveSettings = () => {\n    Utils.setSettings({\n      ...this.state,\n    });\n    window.toastr.success(' lu ci t');\n  }\n\n  render() {\n    const { markReadOnOpenInbox } = this.state;\n\n    return (\n      <div style={classes.cardStyle}>\n        <Card>\n          <CardContent>\n            <p>\n              <h2>Ci t</h2><br/>\n              Lu : Cc ci t sau s c lu trn trnh duyt ny. Nu bn i thit b khc, bn cn chnh li cho thit b .\n            </p>\n            <FormControlLabel\n              control={\n                <Switch\n                  checked={markReadOnOpenInbox}\n                  onChange={() => this.setState({ markReadOnOpenInbox: !markReadOnOpenInbox })}\n                  color=\"primary\"\n                />\n              }\n              label={'nh du \" c\" khi bm vo c inbox'}\n            />\n            <br/>\n            <br/>\n            <Button\n              variant='outlined'\n              onClick={this.saveSettings}\n            >Lu ci t</Button>\n          </CardContent>        \n        </Card>\n      </div>\n    )\n  }\n}\n\nexport default Settings","import { io } from 'socket.io-client';\nimport Utils from '../../Utils';\nimport Config from '../../Config';\n\nclass Socket {\n  static socket = null;\n  static getSocket() {\n    if (!Config.SOCKETIO) return null;\n    if (!Socket.socket) {\n      Socket.socket = io(Config.SOCKETIO, {\n        transports: ['websocket'],\n        query: `module=${Config.SOCKETIO_MODULE}&token=${Utils.getToken()}`,\n      });\n      Socket.socket.on('connect', () => console.log('connected'));\n    }\n    return Socket.socket;\n  }\n\n  static subscribeInbox(handler) {\n    const socket = Socket.getSocket();\n    if (socket) socket.on('inbox', handler);\n  }\n\n  static unsubscribeInbox(handler) {\n    const socket = Socket.getSocket();\n    if (socket) socket.offAny(handler);\n  }\n}\n\n/* eslint-disable */\nfunction uuidv4() {\n  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\n/* eslint-enable */\n\n/**\n * make HTTP requests via socket.io\n * @param {*} method \n * @param {*} endpoint \n * @param {*} query \n * @param {*} body \n */\nexport const makeRequest = (method, endpoint, query = {}, body = {}) => new Promise(resolve => {\n  if (!Config.PROD) console.log(method, endpoint, query, body);\n  const socket = Socket.getSocket();\n  const requestId = uuidv4();\n  const callback = (data) => {\n    socket.offAny(callback);\n    resolve(data);\n  };\n  socket.on(requestId, callback);\n  socket.emit(`${method.toLowerCase()} ${endpoint.replace(/\\/$/, '')}`, {\n    requestId,\n    query,\n    body,\n  });\n});\n\nexport default Socket;","import React from 'react';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\n\nexport const MessengerContext = React.createContext();\n\nexport class MessengerContextProvider extends React.Component {\n  state = {\n    unreadMark: {},\n  };\n\n  componentDidMount() {\n    if (Config.INBOX_UNREAD_ABILITY) {\n      this.fetchUnread();\n    }\n  }\n\n  fetchUnread = async () => {\n    const res = await makeRequest('get', '/unread');\n    const unreadMark = {};\n    for (const { id } of res) {\n      unreadMark[id] = true;\n    }\n    this.setState({ unreadMark });\n  }\n\n  markUnread = (psid) => {\n    Socket.getSocket().emit('mark_unread', psid);\n    const unreadMark = {...this.state.unreadMark};\n    unreadMark[psid] = true;\n    this.setState({ unreadMark });\n  }\n\n  markRead = (psid) => {\n    Socket.getSocket().emit('mark_read', psid);\n    const unreadMark = {...this.state.unreadMark};\n    delete unreadMark[psid];\n    this.setState({ unreadMark });\n  }\n\n  render() {\n    return (\n      <MessengerContext.Provider value={{\n        unreadMark: this.state.unreadMark,\n        markUnread: this.markUnread,\n        markRead: this.markRead,\n      }}>\n        {this.props.children}\n      </MessengerContext.Provider>\n    );\n  }\n}\n\n\nexport function withMessengerContext(Component) {\n  return function HOC(props) {\n    return (\n      <MessengerContext.Consumer>\n        {(contexts) => <Component {...props} {...contexts} />}\n      </MessengerContext.Consumer>\n    )\n  }\n}\n","import React from 'react';\nimport {\n  ConversationList,\n  Conversation,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { removeVietnameseTones, mergeNewConversations, getTargetId } from './utils';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\nimport { withMessengerContext } from './Context';\n\nclass Conversations extends React.Component {\n  state = {\n    ready: false,\n    loading: false,\n    conversations: [],\n    next: null,\n  };\n\n  openConversation = (id, name) => () => {\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\n    window.location.hash = `#/msg/${id}/${n}`;\n  }\n\n  componentDidMount() {\n    this.loadMoreConversations();\n    Socket.subscribeInbox(this.inboxUpdateHandler);\n  }\n\n  componentWillUnmount() {\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\n  }\n\n  inboxUpdateHandler = async (ev) => {\n    const { data: newArr } = await makeRequest('get', '/conversations', {limit: 5});\n    this.setState((prevState) => ({\n      conversations: mergeNewConversations(prevState.conversations, newArr),\n    }));\n  }\n\n  async loadMoreConversations() {\n    if (!this.state.loading) {\n      this.setState({ loading: true });\n\n      const qs = {};\n      if (this.state.next) qs.after = this.state.next;\n      let { data, paging } = await makeRequest('get', '/conversations', qs);\n\n      if (Config.PROD) {\n        data = data.filter(c => c.id !== Config.INBOX_IGNORED_CONVERSATION);\n      }\n\n      if (data) this.setState({\n        conversations: [...this.state.conversations, ...data],\n        loading: false,\n        ready: true,\n        next: (paging?.next) ? (paging?.cursors?.after) : null,\n      });\n    }\n  }\n\n  onYReachEnd = () => {\n    if (this.state.next && !this.state.loading) {\n      this.loadMoreConversations();\n    }\n  }\n\n  render() {\n    const { unreadMark } = this.props;\n\n    return (\n      <ConversationList\n        loading={!this.state.ready}\n        loadingMore={this.state.ready && this.state.loading}\n        onYReachEnd={this.onYReachEnd}\n      >\n        {this.state.conversations.map(conv => {\n          const name = conv.senders.data[0].name;\n          const psid = getTargetId(conv);\n          return (\n            <Conversation\n              key={conv.id}\n              name={`${name} (${conv.message_count})`}\n              info={conv.snippet}\n              onClick={this.openConversation(conv.id, name)}\n              active={this.props.tid === conv.id}\n              unreadDot={!!unreadMark[psid]}\n            ></Conversation>\n          );\n        })}\n      </ConversationList>\n    );\n  }\n}\n\nexport default withMessengerContext(Conversations);","import React from 'react';\nimport {\n  ConversationHeader,\n  Avatar,\n  InfoButton,\n  Button,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { withMessengerContext } from './Context';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faEnvelope } from \"@fortawesome/free-solid-svg-icons/faEnvelope\";\nimport { faEnvelopeOpenText } from \"@fortawesome/free-solid-svg-icons/faEnvelopeOpenText\";\nimport Config from '../../Config';\n\nconst MarkButton = withMessengerContext(({psid, unreadMark, markRead, markUnread}) => {\n  const btnClick = () => {\n    if (unreadMark[psid]) {\n      markRead(psid);\n    } else {\n      markUnread(psid);\n    }\n  }\n\n  return (\n    <Button\n      className={'cs-button cs-button--info'}\n      style={{marginRight: '20px'}}\n      icon={<FontAwesomeIcon icon={unreadMark[psid] ? faEnvelopeOpenText : faEnvelope} />}\n      onClick={btnClick}\n    ></Button>\n  );\n});\n\nconst Header = ({loading, profile, openConversationOnFB, openMainMenu, psid}) => {\n  return loading\n    ? (\n      <ConversationHeader>\n        <ConversationHeader.Back onClick={openMainMenu} />\n        <ConversationHeader.Content userName=\"Loading...\" />        \n      </ConversationHeader>\n    ) : (\n      <ConversationHeader>\n        <ConversationHeader.Back onClick={openMainMenu} />\n        <Avatar\n          src={profile.profile_pic}\n          name={profile.name}\n          onClick={openConversationOnFB}\n        />\n        <ConversationHeader.Content userName={profile.name} />\n        <ConversationHeader.Actions>\n          {Config.INBOX_UNREAD_ABILITY && (\n            <MarkButton\n              as=\"InfoButton\"\n              psid={psid}\n            />\n          )}\n          <InfoButton onClick={openConversationOnFB} />\n        </ConversationHeader.Actions>          \n      </ConversationHeader>\n    );\n}\n\nexport default Header;","import React from 'react';\nimport {\n  MessageList,\n  ChatContainer,\n  Message,\n  MessageInput,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { getMessageDirection, getTargetId, mergeNewMessages } from './utils';\nimport TimeAgo from 'javascript-time-ago';\nimport en from 'javascript-time-ago/locale/en';\nimport Socket, { makeRequest } from './socket';\nimport Config from '../../Config';\nimport './styles.css';\nimport Header from './Header';\nimport { withMessengerContext } from './Context';\n\nTimeAgo.addLocale(en);\nconst timeAgo = new TimeAgo('en-US');\n\nclass MessageView extends React.Component {\n  state = {\n    loading: true,\n    loadingMore: false,\n    psid: null,\n    profile: {},\n    threadInfo: {},\n    messages: [],\n    messageAfter: null,\n    messagePending: null,\n    messagePendingId: null,\n    input: '',\n  }\n  originalTitle = document.title;\n\n  componentDidMount() {\n    this.fetchConversation(this.props.tid);\n    Socket.subscribeInbox(this.inboxUpdateHandler);\n    window.setMessageInput = (input) => this.setState({ input });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.tid !== this.props.tid) {\n      this.fetchConversation(this.props.tid);\n    }\n    if (this.state.psid\n      && this.state.psid !== prevState.psid\n      && Config.INBOX_MARK_READ_ON_OPEN\n    ) {\n      this.props.markRead(this.state.psid);\n    }\n  }\n\n  componentWillUnmount() {\n    document.title = this.originalTitle;\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\n  }\n\n  inboxUpdateHandler = async (ev) => {\n    const { psid, messagePendingId } = this.state;\n    const tid = this.props.tid;\n    if (getTargetId(ev) === psid) {\n      const { data: newMessages } = await makeRequest('get', '/thread/messages', {tid, limit: 5});\n      this.setState((prevState) => ({\n        messages: mergeNewMessages(prevState.messages, newMessages),\n      }));\n    }\n    if (ev.message?.mid === messagePendingId) {\n      this.setState({ messagePending: null, messagePendingId: null });\n    }\n  }\n\n  async fetchConversation(tid) {\n    document.title = Config.INBOX_TITLE;\n    this.setState({ loading: true });\n    const [threadInfo, messages] = await Promise.all([\n      makeRequest('get', '/thread/info', {tid}),\n      makeRequest('get', '/thread/messages', {tid}),\n    ]);\n    messages.data = messages.data.reverse();\n    const psid = threadInfo.senders.data[0].id;\n    const profile = await makeRequest('get', '/profile', { psid });\n    this.setState({\n      threadInfo,\n      psid,\n      profile,\n      messages: messages.data,\n      messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\n      loading: false,\n    });\n    document.title = `${profile.name} - ${Config.INBOX_TITLE}`;\n  }\n\n  onYReachStart = async () => {\n    const {messageAfter, loadingMore} = this.state;\n    if (messageAfter && !loadingMore) {\n      this.setState({ loadingMore: true });\n      const messages = await makeRequest('get', '/thread/messages', {\n        tid: this.props.tid,\n        after: messageAfter,\n      });\n      this.setState((prevState) => {\n        const newMsgArr = messages.data.reverse().concat(prevState.messages);\n        return {\n          messages: newMsgArr,\n          messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\n          loadingMore: false,\n        };\n      });\n    }\n  }\n\n  openConversationOnFB = () => {\n    window.open(`https://fb.com${this.state.threadInfo.link}`, '_blank');\n  }\n\n  openInNewTab = (url) => () => {\n    window.open(url, '_blank');\n  }\n\n  openMainMenu = () => {\n    const { goBackTo } = this.props;\n    window.location.hash = goBackTo || '#/msg';\n  }\n\n  _renderMessages() {\n    const {loading, messages, messagePending, loadingMore} = this.state;\n    if (loading) return <MessageList loading/>\n\n    let lastDirection = '';\n    const showTimeHeader = (msg) => {\n      const direction = getMessageDirection(msg);\n      if (lastDirection !== direction) {\n        lastDirection = direction;\n        return <Message.Footer sender={timeAgo.format(new Date(msg.created_time))} />\n      } else {\n        return null;\n      }\n    };\n\n    const showTextMsg = (msg) => <Message key={msg.id} model={{\n      message: msg.message,\n      sentTime: timeAgo.format(new Date(msg.created_time)),\n      sender: msg.from.name,\n      direction: getMessageDirection(msg),\n      position: 'single',\n    }}>\n      {showTimeHeader(msg)}\n    </Message>\n\n    const getImages = (msg) => (msg.attachments?.data || [])\n      .filter(a => !!a.image_data)\n      .map(a => a.image_data);\n\n    const showImages = (msg, images) => images.map((img, i) => (\n      <Message key={msg.id + i} type=\"image\" model={{\n        direction: getMessageDirection(msg),\n        type: 'custom',\n      }}>\n        {showTimeHeader(msg)}\n        <Message.CustomContent>\n          <img src={img.preview_url} alt=\"\" onClick={this.openInNewTab(img.url)} style={{width: '200px'}}></img>\n        </Message.CustomContent>\n      </Message>\n    ));\n\n    const showPendingMsg = () => <Message model={{\n      message: messagePending,\n      sender: Config.INBOX_TITLE,\n      direction: 'outgoing',\n      position: 'single',\n    }} className=\"pending\" />\n\n    return (\n      <MessageList loadingMore={loadingMore} onYReachStart={this.onYReachStart}>\n        {messages.map(msg => {\n          const images = getImages(msg);\n          if (images.length > 0) {\n            return <>\n              {showImages(msg, images)}\n            </>\n          } else {\n            return showTextMsg(msg);\n          }\n        })}\n        {messagePending && showPendingMsg()}\n        {!Config.INBOX_SEND_ABILITY && // add margin bottom\n          <Message style={{ marginBottom: '2em', opacity: '0' }} />\n        }\n      </MessageList>\n    );\n  }\n\n  handleInputChange = (_, v, innerText) => this.setState({ input: innerText });\n  handleSendMessage = async () => {\n    const { psid, input } = this.state;\n    const { markRead } = this.props;\n    const messagePending = input.trim();\n    this.setState({ messagePending, input: '' });\n    try {\n      const { message_id } = await makeRequest('post', '/messages', {}, {\n        messaging_type: 'MESSAGE_TAG',\n        tag: 'HUMAN_AGENT',\n        recipient: { id: psid },\n        message: { text: messagePending },\n      });\n      markRead(psid);\n      this.setState({ messagePendingId: message_id });\n    } catch (e) {\n      this.setState({ messagePending: null, input: messagePending });\n      window.alert(JSON.stringify(e.response.data));\n    }\n  };\n  _renderInput() {\n    const { input, messagePending } = this.state;\n    return <MessageInput\n      value={input.replace(/\\n/g, '<br>')}\n      onChange={this.handleInputChange}\n      onSend={this.handleSendMessage}\n      disabled={!!messagePending}\n      sendDisabled={!!messagePending && input.length > 0}\n      sendOnReturnDisabled={true}\n      onAttachClick={window.openTemplateDialog}\n      placeholder=\"Type here...\"\n    />\n  }\n\n  render() {\n    const { loading, profile, psid } = this.state;\n    return (\n      <ChatContainer>\n        <Header\n          as=\"ConversationHeader\"\n          loading={loading}\n          profile={profile}\n          psid={psid}\n          openConversationOnFB={this.openConversationOnFB}\n          openMainMenu={this.openMainMenu}\n        />\n        {this._renderMessages()}\n        {Config.INBOX_SEND_ABILITY && this._renderInput()}\n      </ChatContainer>\n    );\n  }\n}\n\nexport default withMessengerContext(MessageView);","import React from 'react';\nimport Conversations from './Conversations';\nimport MessageView from './MessageView';\nimport Config from '../../Config';\nimport { HashRouter, Route, withRouter } from 'react-router-dom';\nimport \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\nimport {\n  MainContainer,\n  Sidebar,\n  ChatContainer,\n} from \"@chatscope/chat-ui-kit-react\";\nimport { MessengerContextProvider } from './Context';\n\nclass Messenger extends React.Component {\n  state = { tid: null, viewHeight: '100vh' };\n\n  updateHeight = () => {\n    if (window.NUI_VIEW_HEIGHT && this.state.viewHeight !== window.NUI_VIEW_HEIGHT) {\n      this.setState({ viewHeight: window.NUI_VIEW_HEIGHT });\n    }\n  }\n\n  componentDidMount() {\n    this.intervalId = setInterval(this.updateHeight, 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  MessageView = () => {\n    const { tid, viewHeight } = this.state;\n    const { goBackTo } = this.props;\n    return <div style={{ position: \"relative\", height: viewHeight }} className={!tid ? 'home' : 'chat'}>\n      <MainContainer>\n        <Sidebar position=\"left\" scrollable={true}>\n          <Conversations tid={tid} />\n        </Sidebar>\n        {tid\n          ? <MessageView tid={tid} goBackTo={goBackTo} />\n          : <ChatContainer />\n        }\n      </MainContainer>\n      <Config.CustomMessengerWidget />\n    </div>;\n  }\n\n  MessageTidChanged = ({match}) => {\n    if (match.params.tid !== this.state.tid)\n      this.setState({ tid: match.params.tid });\n    return null;\n  }\n\n  MessageTidReset = () => {\n    if (this.state.tid !== null)\n      this.setState({ tid: null });\n    return null;\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <MessengerContextProvider>\n          <Route path=\"/msg\" component={this.MessageView} />\n          <Route exact path=\"/msg\" component={this.MessageTidReset} />\n          <Route exact path=\"/msg/:tid/:name\" component={this.MessageTidChanged} />\n        </MessengerContextProvider>\n      </HashRouter>\n    );\n  }\n}\n\nexport default withRouter(Messenger);","import Messenger from './Messenger';\n\nexport default Messenger;","import { makeStyles } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\nexport const useSidebarStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px) !important`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: 0,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n  },\n  content: {\n    flexGrow: 1,\n  },\n}));","import React from 'react';\nimport {\n  Forum,\n  Receipt,\n  EventAvailable,\n  Help,\n  CheckCircle,\n  ExitToApp,\n  ListAlt,\n  Settings,\n} from '@material-ui/icons';\n\nexport const SidebarItems = [\n  { list: [\n    {\n      title: 'Inbox',\n      href: '#/msg',\n      icon: <Forum />,\n    },\n    {\n      title: 'Qun l',\n      href: '#/manage',\n      icon: <Receipt />,\n    },\n    {\n      title: 'Bi  ln lch',\n      href: '#/scheduled',\n      icon: <EventAvailable />,\n    },\n    {\n      title: 'Bi  ng',\n      href: '#/fbfeed',\n      icon: <ListAlt />,\n    }\n  ] },\n  { separator: true },\n  { list: [\n    {\n      title: 'Hng dn',\n      href: 'https://blog.ngxson.com/tonghopevent/',\n      icon: <Help />,\n    },\n    {\n      title: 'iu khon s dng',\n      href: 'https://sites.google.com/view/tonghopevent/',\n      icon: <CheckCircle />,\n    }\n  ] },\n  { separator: true },\n  { list: [\n    {\n      title: 'Ty chnh',\n      href: '#/settings',\n      icon: <Settings />,\n    },\n    {\n      title: 'ng xut',\n      href: '#/logout',\n      icon: <ExitToApp />,\n    }\n  ] },\n  { list: [\n    {\n      title: 'Tng hp cc d n v cuc thi',\n      href: '#/',\n      icon: null,\n    },\n    {\n      title: 'ng bi (Ly nh)',\n      href: '#/getimage',\n      icon: null,\n    },\n    {\n      title: 'ng bi',\n      href: '#/publish',\n      icon: null,\n    },\n    {\n      title: 'Xem bi vit',\n      href: '#/view',\n      icon: null,\n    }\n  ], hidden: true }\n];\n\nexport const getCurrentMenuItem = (currentHash) => {\n  for (const { list } of SidebarItems) {\n    if (!list) continue;\n    for (const item of list) {\n      if (currentHash.startsWith(item.href)) return item;\n    }\n  }\n  return null;\n}\n","import React from 'react';\nimport { useTheme } from '@material-ui/core/styles';\nimport { useSidebarStyles } from './styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { getCurrentMenuItem, SidebarItems } from './SidebarItems';\nimport { withRouter } from 'react-router';\n\nfunction Sidebar({children, location: {pathname}}) {\n  const classes = useSidebarStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n  const currentMenuItem = getCurrentMenuItem('#' + pathname);\n  const isPublicView = pathname.match(/\\/(view\\/|login)/);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const handleClickItem = (item) => () => {\n    const { href } = item;\n    if (href.startsWith('http')) {\n      window.open(href, '_blank').focus(); // open in new tab\n    } else {\n      window.location.href = href;\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <AppBar\n        position=\"fixed\"\n        style={{ zIndex: open ? 80 : 100 }}\n        className={`${classes.appBar} ${open ? classes.appBarShift : ''}`}\n      >\n        <Toolbar>\n          {!isPublicView && <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={handleDrawerOpen}\n            edge=\"start\"\n            className={`${classes.menuButton} ${open ? classes.hide : ''}`}\n          >\n            <MenuIcon />\n          </IconButton>}\n          <Typography variant=\"h6\" noWrap>\n            {currentMenuItem.title}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n      <Drawer\n        style={{ zIndex: 90 }}\n        variant={isPublicView ? 'temporary' : 'permanent'}\n        className={`${classes.drawer} ${open ? classes.drawerOpen : classes.drawerClose}`}\n        classes={{\n          paper: open ? classes.drawerOpen : classes.drawerClose,\n        }}\n      >\n        <div className={classes.toolbar}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        {SidebarItems.map((obj, i) => {\n          if (obj.list && !obj.hidden) {\n            return <List key={i}>\n              {obj.list.map((item, j) => (\n                <ListItem\n                  button\n                  selected={currentMenuItem.href === item.href}\n                  onClick={handleClickItem(item)} key={j}\n                >\n                  <ListItemIcon>{item.icon}</ListItemIcon>\n                  <ListItemText primary={item.title} />\n                </ListItem>\n              ))}\n            </List>\n          } else if (obj.separator) {\n            return <Divider key={i} />;\n          }\n          return null\n        })}\n      </Drawer>\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        {children}\n      </main>\n    </div>\n  );\n}\n\nexport default withRouter(Sidebar);","import React, { useEffect, useRef } from 'react';\n\nconst updateViewportSize = (div) => {\n  if (!div) return;\n  window.NUI_VIEW_HEIGHT = div.clientHeight - 64;\n  window.NUI_VIEW_WIDTH = div.clientWidth;\n};\n\nconst Measure = () => {\n  const elem = useRef(null);\n\n  useEffect(() => {\n    if (elem && elem.current) {\n      setInterval(() => {\n        updateViewportSize(elem.current);\n      }, 1000);\n    }\n  }, [elem]);\n\n  return (\n    <div ref={elem} style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height: '100%',\n      width: '100%',\n      pointerEvents: 'none',\n      //border: '2px solid red',\n      zIndex: 1000,\n    }}></div>\n  );\n}\n\nexport default Measure;","import React from 'react';\nimport Theme from './Theme';\nimport LoginLayout from './layouts/Login';\nimport HomeLayout from './layouts/Home';\nimport ViewLayout from './layouts/View';\nimport PublishLayout from './layouts/Publish';\nimport GetImageLayout from './layouts/GetImage';\nimport './App.css';\nimport './bootstrap.css';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport Alert from './components/Alert';\nimport Scheduled from './layouts/fb/Scheduled';\nimport FBFeed from './layouts/fb/FBFeed';\nimport Settings from './layouts/Settings';\nimport Messenger from './components/messenger';\nimport Sidebar from './components/sidebar/Sidebar';\nimport Measure from './components/Measure';\nimport Config from './Config';\nimport Utils from './Utils';\n\nclass Main extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      header: 'Home',\n      publishData: null,\n    }\n  }\n\n  changeHeader(header) {\n    if (this.state.header === header) return\n    else this.setState({header})\n  }\n\n  gotoPublish(data, publishAction) {\n    this.setState({publishData: data})\n    window.location.hash = '#/' + publishAction\n  }\n\n  Home = () => {\n    return <HomeLayout\n      gotoPublish={this.gotoPublish.bind(this)}\n    />\n  }\n\n  View = ({match}) => {\n    return <ViewLayout\n      id={match.params.id}\n    />\n  }\n\n  Publish = () => {\n    return <PublishLayout\n      data={this.state.publishData}\n    />\n  }\n\n  GetImage = () => {\n    return <GetImageLayout\n      data={this.state.publishData}\n      gotoPublish={this.gotoPublish.bind(this)}\n    />\n  }\n\n  Copyright = () => {\n    return <center>\n      <br/><br/>\n      Developed by&nbsp;\n      <b><a href=\"https://ngxson.com\" target=\"_blank\" rel=\"noopener noreferrer\">Nui</a></b><br/>\n      Version {Config.VERSION}\n      <br/><br/>\n    </center>\n  }\n\n  Logout = () => {\n    Utils.removeLocalStorage('token')\n    window.location.href = '#/'\n    window.location.reload()\n    return null\n  }\n\n  render() {\n    window.changeHeader = this.changeHeader.bind(this)\n\n    return (\n      <>\n        <Route path=\"/manage\" component={this.Home} />\n        <Route path=\"/login\" component={LoginLayout} />\n        <Route path=\"/view/:id\" component={this.View} />\n        <Route path=\"/publish\" component={this.Publish} />\n        <Route path=\"/getimage\" component={this.GetImage} />\n        <Route path=\"/scheduled\" component={Scheduled} />\n        <Route path=\"/fbfeed\" component={FBFeed} />\n        <Route path=\"/settings\" component={Settings} />\n        <Route path=\"/logout\" component={this.Logout} />\n        <this.Copyright />\n      </>\n    );\n  }\n}\n\nconst RedirectToHome = () => {\n  window.location.href = Utils.getLocalStorage('token')\n    ? '#/msg'\n    : '#/login'\n  return null\n}\n\nfunction App() {\n  return (\n    <HashRouter>\n      <MuiThemeProvider theme={Theme}>\n        <Sidebar>\n          <div className=\"mainView\">\n            <Switch>\n              <Route exact path=\"/\" component={RedirectToHome} />\n              <Route path=\"/msg\" component={Messenger} />\n              <Route component={Main} />\n            </Switch>\n          </div>\n          <Alert />\n        </Sidebar>\n        <Measure />\n      </MuiThemeProvider>\n    </HashRouter>\n  );\n}\n\nexport default App;","import React from 'react';\n\nclass Guide extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n        <div className=\"gtco-container\">\n          <div className=\"row\">\n            <div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n              <h2>Nhng lu  dnh cho bn</h2>\n              <p>c lp ra nhm mc ch tng hp, phn loi cc d n, nhng cuc thi ang din ra trong cng ng gii tr, chng mnh hi vng s gip  c cc bn tr tm kim thnh cng nhng hot ng ph hp nht vi bn thn mnh.<br /></p>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>NHP THNG TIN</h3>\n                  <p>Hy ch  nhp y  cc thng tin c trong form.</p>\n                </div>\n              </div>\n      \n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>I DUYT</h3>\n                  <p>Admin s ph duyt bi ca bn.<br />\n                    Bn s nhn c thng bo ngay sau khi bi ng c t lch  ng ln page.</p>\n                </div>\n              </div>\n      \n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\n                <span className=\"icon\">\n                  <i className=\"icon-check\"></i>\n                </span>\n                <div className=\"feature-copy\">\n                  <h3>NG VO GI VNG</h3>\n                  <p>Bi ca bn s c hn gi  up vo khung gi vng (20h - 21h).<br />\n                    V vy nu cha thy bi ca bn cha c ng ngay, <b>ng vi</b> gi li bi cho chng mnh nh!</p>\n                </div>\n              </div>\n      \n            </div>\n      \n            <div className=\"col-md-12\">\n              <center>\n                <p><br /><br />Bng vic bm nt &quot;Tip tc&quot;, bn ng  vi cc <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca fanpage</p>\n                <a className=\"btn btn-block btn-primary\" href=\"#/next\">TIP TC </a>\n                <br />\n                Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br />\n              </center>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Guide;","import React from 'react';\n\nclass NoPsid extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Hng dn</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\t ng d n, cuc thi ln fanpage, bn hy thc hin theo hng dn sau:<br/>\n\t    \t\t\t\t\tBn hy inbox vo fanpage ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br/>\n\t    \t\t\t\t\tSau  bm vo nt <b>ng d n/cuc thi</b>  menu nh!<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti thng qua inbox fanpage</small>\n\t    \t\t\t\t</p>\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default NoPsid;","import React from 'react';\n\nclass OldVersion extends React.Component {\n  render() {\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Hng dn</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\tBn dng link ti phin bn c ca fanpage<br/>\n\t    \t\t\t\t\tHy bm nt <b>ng d n/cuc thi</b>  trong menu inbox  nhn link mi nh!<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a></small>\n\t    \t\t\t\t</p>\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default OldVersion;","import React from 'react';\nimport Guide from './Guide';\nimport NoPsid from './NoPsid';\nimport OldVersion from './OldVersion';\nimport Utils from '../../Utils';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.psid = Utils.getPsid();\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <header id=\"gtco-header\" className=\"gtco-cover\" role=\"banner\" style={{backgroundImage: `url(theme/images/img_bg_1.jpg`}}>\n          <div className=\"gtco-container\">\n            <div className=\"row\">\n              <div className=\"col-md-8 col-md-offset-2 text-center\">\n                <div className=\"display-t\">\n                  <div className=\"display-tc animate-box\" data-animate-effect=\"fadeIn\">\n                    <h1>ng d n</h1>\n                    <h2>Tng hp cc d n v cuc thi dnh cho hc sinh, sinh vin</h2>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {this.psid !== 'none'\n          ? <Guide />\n          : !Utils.getParameterByName('psid') ? <NoPsid /> : <OldVersion />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Home;","import React from 'react';\n\nconst Data = [\n\n  // INDEX 0\n  (parent) => {\n    return {\n      type: 'small',\n      title: 'Bn mun ng bi v',\n      options: [\n        { text: 'D n', subtitle: 'Hot ng ngoi kha', value: 'D n' },\n        { text: 'Cuc thi', subtitle: 'Dnh cho HS, SV', value: 'Cuc thi' },\n        { text: 'S kin', subtitle: 'Dnh cho HS, SV' , value: 'S kin' },\n      ],\n      notice: 'Lu : Fanpage khng nhn ng bi v tuyn dng vic lm.',\n      next: (value) => {\n        const newState = {\n          screen: 1,\n          type: value,\n        };\n        if (value === 'Cuc thi') newState.tag = '#cuc_thi';\n        else if (value === 'S kin') newState.tag = '#s_kin';\n        parent.setState(newState);\n      }\n    };\n  },\n\n  // INDEX 1\n  (parent) => {\n    return {\n      type: 'long',\n      title: <React.Fragment>{parent.state.type} ca bn c <b>iu hnh bi</b></React.Fragment>,\n      options: [\n        { text: 'Mt nhm hc sinh, sinh vin', subtitle: 'Hot ng phi li nhun', value: 'F1' },\n        { text: 'Mt cu lc b trong trng hc', subtitle: 'Hot ng phi li nhun', value: 'F2' },\n        { text: 'Mt trng hc cng lp', subtitle: 'VD: trng THCS, THPT, H, Cao ng,...', value: 'F3' },\n        { text: 'Mt t chc phi li nhun', subtitle: 'VD: AIESEC, VOGE, SOTB,...', value: 'F4' },\n        { text: 'T chc hot ng c li nhun', subtitle: 'VD: trung tm ngoi ng, ca hng,...', value: 'P1' },\n      ],\n      next: (value) => {\n        if (value === 'P1') {\n          parent.setState({ screen: 2 });\n        } else {\n          window.location.replace(parent.getFormUrl(value));\n        }\n      }\n    };\n  },\n\n  // INDEX 2\n  (parent) => {\n    return {\n      type: 'basic',\n      title: <React.Fragment>\n        Da theo <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca chng mnh, {parent.state.type.toLowerCase()} c t chc hoc c iu hnh bi mt hoc nhiu doanh nghip, t chc hay c nhn <b>hot ng c li nhun</b> phi tr ph theo <b>Gi P1</b><br/>\n        <br/>\n        Gi P1 c gi l 100.000 VN / 1 bi ng [<a href=\"https://sites.google.com/view/tonghopevent/gi-p1\" target=\"_blank\" rel=\"noopener noreferrer\">Bm y  xem chi tit</a>]<br/>\n        <br/>\n         tip tc, bn hy nhp thng tin vo form sau:\n        &nbsp;\n        <button className=\"btn btn-small btn-primary\"\n          style={{padding: '4px'}}\n          onClick={() => {\n            window.location.replace(parent.getFormUrl('P1'));\n          }}\n        >Ti Form </button><br/>\n        Sau , hng dn thanh ton s c gi ti inbox ca bn.\n      </React.Fragment>\n    };\n  },\n];\n\nexport default Data;","import React from 'react';\nimport Data from './Data';\nimport Utils from '../../Utils';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    const _psid = Utils.getPsid();\n    this.psid = _psid !== 'none' ? _psid : null;\n    this.state = {\n      screen: 0,\n      tag: null,\n    };\n  }\n\n  getFormUrl(plan) {\n    const psid = `${this.psid}${plan ? ';' + plan : ''}`;\n    return Utils.getFormUrl(psid, this.state.tag);\n  }\n\n  componentDidMount() {\n    setTimeout(window.scrollToTop, 50);\n  }\n\n  _renderSmallBtn(data) {\n    return data.options.map((option, i) => {\n      return (\n        <button\n          key={option.value + i}\n          className=\"btn btn-default btn-proj-cate\"\n          onClick={() => data.next(option.value)}\n        >{option.text}</button>\n      );\n    });\n  }\n\n  _renderLargeBtn(data) {\n    return data.options.map((option, i) => {\n      return (\n        <button\n          key={option.value + i}\n          className=\"btn btn-default btn-proj-type\"\n          onClick={() => data.next(option.value)}\n        >\n          <b>{option.text}</b><br/>\n          <small>{option.subtitle}</small>\n        </button>\n      );\n    });\n  }\n\n  render() {\n    const data = Data[this.state.screen](this);\n\n    return (\n      <div id=\"gtco-features\">\n\t    \t<div className=\"gtco-container\">\n\t    \t\t<div className=\"row\">\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\n\t    \t\t\t\t<h2>Thng tin chung</h2>\n\t    \t\t\t\t<p>\n\t    \t\t\t\t\t{data.title}\n\t    \t\t\t\t</p>\n              {data.type !== 'basic' && <p>\n                {data.type === 'small'\n                  ? this._renderSmallBtn(data)\n                  : this._renderLargeBtn(data)\n                }\n              </p>}\n              {data.notice && <p style={{fontSize: '0.8em'}}>\n                {data.notice}\n              </p>}\n\t    \t\t\t</div>\n\t    \t\t</div>\n\t    \t</div>\n\t    </div>\n    );\n  }\n}\n\nexport default Home;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer id=\"gtco-footer\" role=\"contentinfo\">\n      <div className=\"gtco-container\">\n        <div className=\"row copyright\">\n          <div className=\"col-md-12\">\n            <p className=\"pull-left\">\n              <small className=\"block\">Lp trnh bi <a rel=\"noopener noreferrer\" href=\"https://ngxson.com\" target=\"_blank\">Nui</a></small>\n              <small className=\"block\">Theme by <a rel=\"noopener noreferrer\" href=\"http://gettemplates.co/\" target=\"_blank\">GetTemplates.co</a></small>\n            </p>\n            <div className=\"pull-right\">\n              <ul className=\"gtco-social-icons pull-right\">\n                <li><a href=\"https://www.facebook.com/tonghopevent/\"><i className=\"icon-facebook\"></i></a></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport Home from './home/Home';\nimport Quiz from './quiz/Quiz';\nimport Footer from './Footer';\nimport { HashRouter, Route } from 'react-router-dom';\nimport './Landing.css';\n\nclass Main extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  Home = () => {\n    return <Home />;\n  };\n\n  Quiz = () => {\n    return <Quiz />;\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <Route exact path=\"/\" component={this.Home} />\n        <Route path=\"/next\" component={this.Quiz} />\n        <Footer />\n      </React.Fragment>\n    );\n  }\n}\n\nfunction Landing() {\n  return (\n    <HashRouter>\n      <Main />\n    </HashRouter>\n  );\n}\n\nexport default Landing;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `/data/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Landing from './landing/Landing';\nimport * as serviceWorker from './serviceWorker';\nimport Config from './Config';\nimport Utils from './Utils';\n\nif (window.location.pathname.match(/\\/data/)) {\n  console.log(Config.VERSION);\n  Utils.loadSettings();\n  ReactDOM.render(<App />, document.getElementById('root'));\n} else {\n  ReactDOM.render(<Landing />, document.getElementById('root'));\n}\n\nserviceWorker.unregister();\n"],"sourceRoot":""}