{"version":3,"sources":["Theme.js","components/messenger/utils.js","Utils.js","components/messenger/custom/TongHopEvent.jsx","Config.js","layouts/Login.jsx","components/NoteEditDialog.jsx","components/Doc.jsx","components/ToolsDialog.jsx","components/DuplicateDocDialog.jsx","DuplicateHelper.js","layouts/Home.jsx","layouts/View.jsx","components/DatePicker.jsx","components/Timeslots.jsx","layouts/Publish.jsx","layouts/GetImage.jsx","components/Alert.jsx","components/FBPostEditDialog.jsx","layouts/fb/PostList.jsx","layouts/fb/Scheduled.jsx","layouts/fb/FBFeed.jsx","components/messenger/socket.js","components/messenger/Context.jsx","components/messenger/Conversations.jsx","components/messenger/Header.jsx","components/messenger/MessageView.jsx","components/messenger/Messenger.jsx","components/messenger/index.js","components/sidebar/styles.js","components/sidebar/SidebarItems.js","components/sidebar/Sidebar.jsx","components/Measure.jsx","App.jsx","landing/home/Guide.jsx","landing/home/NoPsid.jsx","landing/home/OldVersion.jsx","landing/home/Home.jsx","landing/quiz/Data.jsx","landing/quiz/Quiz.jsx","landing/Footer.jsx","landing/Landing.jsx","serviceWorker.js","index.js"],"names":["createMuiTheme","palette","primary","main","blueGrey","secondary","error","orange","getMessageDirectionLastData","arg","res","getMessageDirection","message","senderId","from","id","isFromPage","Config","SELF_PAGE_ID","mergeNewMessages","oldArr","newArr","addedMessages","isExistInOldArr","some","msg","unshift","mergeNewConversations","convIds","filter","conv","getTargetId","ev","senders","recipient","sender","data","s","removeVietnameseTones","str","replace","trim","ORG_CODE","Utils","token","getLocalStorage","window","location","href","name","lastRun","last","now","Date","removeLocalStorage","reload","value","localStorage","setItem","JSON","stringify","getItem","parse","removeItem","timestamp","date","d","getDate","m","getMonth","y","getFullYear","hh","getHours","mm","getMinutes","text","matched","match","length","uname","_id","url","method","payload","_url","indexOf","axios","doc","org","textArea","document","createElement","style","top","left","position","body","appendChild","focus","select","execCommand","console","log","err","removeChild","navigator","clipboard","writeText","then","fallbackCopyTextToClipboard","split","map","item","i","arr","isLast","key","psid","tag","euc","encodeURIComponent","results","RegExp","exec","decodeURIComponent","_psid","getParameterByName","inboxData","n","toLowerCase","baseUrl","open","makeRequest","endpoint","a","qs","getToken","post","BACKEND","params","checkError","Card","children","padding","marginBottom","border","SOCKETIO","SOCKETIO_MODULE","INBOX_TITLE","INBOX_SEND_ABILITY","INBOX_UNREAD_ABILITY","INBOX_IGNORED_CONVERSATION","VERSION","CustomMessengerWidget","state","templates","loading","editingIndex","editingText","showing","openTemplateDialog","setState","loadTemplates","Object","keys","save","fillToInput","t","setMessageInput","this","maxWidth","width","height","Maxheight","background","zIndex","transform","overflow","right","onClick","onChange","e","target","rows","cursor","nl2br","React","Component","Login","props","handleChange","event","changeHeader","username","password","showAlert","title","setLocalStorage","classes","input","container","display","flexWrap","cardStyle","marginTop","marginRight","marginLeft","CircularProgress","form","CardContent","Typography","variant","component","color","TextField","label","type","margin","Button","onLogin","bind","NoteEditDialog","comment","onClose","Fragment","Dialog","fullWidth","aria-labelledby","DialogTitle","DialogContent","DialogContentText","multiline","rowsMax","DialogActions","Doc","isNoteEditOpen","isCopied","isExpanded","admin","copyContent","getCopyContent","linkfb","fbusername","extractFacebookUsername","image","publishAction","field","val","success","newDoc","setDoc","trashed","updateDocField","approved","cmt","generateLocationTag","join","description","cleanFBLink","wanted","deadline","benefit","backgroundColor","duplicateHelper","openDuplicateDocDialog","duplicatedDocs","checkDoc","Fab","size","getTimeStr","created","getDateStr","getOrgName","feedback","gotoPublish","content","maxHeight","className","_renderNonAdminInfo","disabled","_renderDuplicatedWarningIcon","plan","toUpperCase","componentDecorator","rel","_renderPostContent","Divider","toggleTrashDoc","toggleApproved","caption","getImageUrl","openToolsDialog","paddingBottom","updateComment","_renderTrashedDoc","_renderMainCard","TEMPLATES","desc","ToolsDialog","showTemplates","sendInboxData","isLinkCopied","response","obj","closeToolsDialog","toastr","goToInbox","isWithin24HWindow","handleClose","copyTextToClipboard","sendInbox","goToPageInbox","List","ListItem","button","ListItemText","protocol","host","onCopy","_renderSendInboxDialogAsk","onEnter","fetchData","onBackdropClick","substr","_renderError","_renderContent","DuplicateDocDialog","docs","selectedDocID","daysAgo","Math","floor","closeDuplicateDocDialog","DuplicateHelper","seen","lookbackArr","fbname","push","Home","markDocApproved","DOCID_APPROVED","dispatchDocApproved","prevState","list","toolsDialogOpen","toolsDialogDoc","duplicateDocDialog","loadData","Promise","all","get","pushLookbackData","edit","docid","home","columnsCountBreakPoints","350","1000","1550","gutter","View","_renderDocView","_renderDocNotFound","MaterialUIPickers","publish_time","handleDateChange","getTime","utils","DateFnsUtils","KeyboardButtonProps","isSlotTaken","stat","time","INTERVAL_BETWEEN_POSTS_IN_MS","splice","ScheduledList","TimeslotPicker","statArr","useState","useOldPicker","setUseOldPicker","timeslots","beginOfDay","day","startAt","slotsOfDay","generateTimeslots","round","DatePicker","Publish","getErrorMessage","completed","scheduled_publish_time","loadStat","loadInbox","idInDatabase","postData","toast","info","timeOut","hash","clear","imgStyle","alt","src","loader","isDateOK","onClickOK","doPublish","showCancel","messages","750","900","_renderComposerCard","_renderPublishCard","_renderInboxCard","_renderCompletedCard","_renderMain","imgLoaderStyle","GetImage","showGetToken","access_token","imgs","fetchFacebookApi","fbtoken","feed","full_picture","picture","status","urlNow","setTimeout","alert","float","_data","onSaveToken","_renderGetTokenCard","_renderTitleCard","_renderImageCard","Alert","handleClickOK","handleCancel","show","aria-describedby","autoFocus","FBPostEditDialog","onEditPost","patch","editPostEndpoint","ImgLoader","PostList","processTimeField","timeFieldName","p","created_time","deletePost","confirm","delete","deletePostEndpoint","onEditDialogClose","shouldReload","editingPost","posts","newestFirst","loadFeedEndpoint","reverse","expanded","substring","preventDefault","j","cloned","loadingComponent","_renderMainView","Scheduled","FBFeed","Socket","socket","io","transports","query","on","handler","getSocket","offAny","MessengerContext","createContext","MessengerContextProvider","unreadMark","fetchUnread","markUnread","emit","markRead","Provider","withMessengerContext","Consumer","contexts","ready","conversations","next","openConversation","inboxUpdateHandler","limit","onYReachEnd","loadMoreConversations","subscribeInbox","unsubscribeInbox","after","paging","c","cursors","loadingMore","message_count","snippet","active","tid","unreadDot","MarkButton","icon","faEnvelopeOpenText","faEnvelope","Header","profile","openConversationOnFB","openMainMenu","Back","Content","userName","profile_pic","Actions","as","TimeAgo","addLocale","en","timeAgo","threadInfo","messageAfter","messagePending","messagePendingId","originalTitle","newMessages","mid","onYReachStart","concat","link","openInNewTab","goBackTo","handleInputChange","_","v","innerText","handleSendMessage","messaging_type","message_id","fetchConversation","prevProps","lastDirection","showTimeHeader","direction","Footer","format","images","attachments","image_data","getImages","img","model","CustomContent","preview_url","showImages","sentTime","showTextMsg","opacity","onSend","sendDisabled","sendOnReturnDisabled","onAttachClick","placeholder","_renderMessages","_renderInput","Messenger","viewHeight","updateHeight","NUI_VIEW_HEIGHT","MessageView","scrollable","MessageTidChanged","MessageTidReset","intervalId","setInterval","clearInterval","path","exact","withRouter","useSidebarStyles","makeStyles","theme","root","appBar","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","menuButton","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","spacing","toolbar","alignItems","justifyContent","mixins","flexGrow","SidebarItems","separator","hidden","pathname","useTheme","setOpen","currentMenuItem","currentHash","startsWith","getCurrentMenuItem","isPublicView","handleClickItem","CssBaseline","AppBar","Toolbar","IconButton","aria-label","edge","noWrap","Drawer","paper","selected","ListItemIcon","Measure","elem","useRef","useEffect","current","div","clientHeight","NUI_VIEW_WIDTH","clientWidth","ref","pointerEvents","Main","publishData","Copyright","Logout","header","RedirectToHome","App","Theme","Guide","data-animate-effect","NoPsid","OldVersion","getPsid","role","backgroundImage","Data","parent","options","subtitle","notice","newState","screen","getFormUrl","scrollToTop","option","_renderSmallBtn","_renderLargeBtn","fontSize","Quiz","Landing","Boolean","hostname","ReactDOM","render","getElementById","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.199bf413.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blueGrey from '@material-ui/core/colors/blueGrey';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nexport default createMuiTheme({\r\n  palette: {\r\n    primary: { main: blueGrey[700] },\r\n    secondary: { main: blueGrey[200] },\r\n    error: { main: orange[900] }\r\n  }\r\n})","import Config from '../../Config';\r\n\r\nconst getMessageDirectionLastData = {arg: null, res: null};\r\nexport const getMessageDirection = (message) => {\r\n  if (getMessageDirectionLastData.arg === message) {\r\n    return getMessageDirectionLastData.res;\r\n  } else {\r\n    getMessageDirectionLastData.arg = message;\r\n    const senderId = message.from.id;\r\n    const isFromPage = senderId === Config.SELF_PAGE_ID || senderId === '182794865548469';\r\n    getMessageDirectionLastData.res = isFromPage ? 'outgoing' : 'incoming';\r\n    return getMessageDirectionLastData.res;\r\n  }\r\n};\r\n\r\nexport const mergeNewMessages = (oldArr, newArr) => {\r\n  const addedMessages = [];\r\n  const isExistInOldArr = (id) => oldArr.some(msg => msg.id === id);\r\n  for (const msg of newArr) {\r\n    if (isExistInOldArr(msg.id)) break;\r\n    addedMessages.unshift(msg);\r\n  }\r\n  return [...oldArr, ...addedMessages];\r\n};\r\n\r\nexport const mergeNewConversations = (oldArr, newArr) => {\r\n  const convIds = {};\r\n  return [...newArr, ...oldArr].filter(conv => {\r\n    if (!convIds[conv.id]) {\r\n      convIds[conv.id] = true;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  });\r\n}\r\n\r\nexport const getTargetId = (ev) => {\r\n  if (ev.senders) {\r\n    for (const s of ev.senders.data) {\r\n      if (s.id !== Config.SELF_PAGE_ID) return s.id;\r\n    }\r\n  } else if (ev.recipient && ev.recipient.id !== Config.SELF_PAGE_ID) {\r\n    return ev.recipient.id;\r\n  } else if (ev.sender && ev.sender.id !== Config.SELF_PAGE_ID) {\r\n    return ev.sender.id;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\n/*eslint-disable */\r\nexport const removeVietnameseTones = (str) => {\r\n  str = str.replace(/||||||||||||||||/g,\"a\"); \r\n  str = str.replace(/||||||||||/g,\"e\"); \r\n  str = str.replace(/||||/g,\"i\"); \r\n  str = str.replace(/||||||||||||||||/g,\"o\"); \r\n  str = str.replace(/||||||||||/g,\"u\"); \r\n  str = str.replace(/||||/g,\"y\"); \r\n  str = str.replace(//g,\"d\");\r\n  str = str.replace(/||||||||||||||||/g, \"A\");\r\n  str = str.replace(/||||||||||/g, \"E\");\r\n  str = str.replace(/||||/g, \"I\");\r\n  str = str.replace(/||||||||||||||||/g, \"O\");\r\n  str = str.replace(/||||||||||/g, \"U\");\r\n  str = str.replace(/||||/g, \"Y\");\r\n  str = str.replace(//g, \"D\");\r\n  // Some system encode vietnamese combining accent as individual utf-8 characters\r\n  // Mt vi b encode coi cc du m, du ch nh mt k t ring bit nn thm hai dng ny\r\n  str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); //       huyn, sc, ng, hi, nng\r\n  str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); //     , , , , \r\n  // Remove extra spaces\r\n  // B cc khong trng lin nhau\r\n  str = str.replace(/ + /g,\" \");\r\n  str = str.trim();\r\n  // Remove punctuations\r\n  // B du cu, k t c bit\r\n  str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\" \");\r\n  return str;\r\n};\r\n/*eslint-enable */","import React from 'react'\r\nimport axios from 'axios'\r\nimport Config from './Config'\r\nimport { removeVietnameseTones } from './components/messenger/utils'\r\n\r\nconst ORG_CODE = {\r\n  'f1': 'Nhm HS, SV',\r\n  'f2': 'CLB thuc trng hc',\r\n  'f3': 'Trng cng lp',\r\n  'f4': 'T chc phi li nhun',\r\n  'p1': 'T chc c li nhun',\r\n}\r\n\r\nclass Utils {\r\n  static getToken() {\r\n    const token = Utils.getLocalStorage('token')\r\n    if (!token) window.location.href = '#/login'\r\n    else return token\r\n  }\r\n\r\n  static checkDebounce(name) {\r\n    if (!window.lastRun) window.lastRun = {}\r\n    const last = window.lastRun[name] || 0\r\n    const now = Date.now()\r\n    if (now - last < 500) {\r\n      return true\r\n    } else {\r\n      window.lastRun[name] = now\r\n    }\r\n  }\r\n\r\n  static checkError(res) {\r\n    if (res && res.data && res.data.error === 'Invalid token') {\r\n      Utils.removeLocalStorage('token')\r\n      window.location.href = '#/'\r\n      window.location.reload()\r\n    }\r\n  }\r\n\r\n  static setLocalStorage(name, value) {\r\n    localStorage.setItem(name, JSON.stringify(value))\r\n  }\r\n  \r\n  static getLocalStorage(name) {\r\n    const item = localStorage.getItem(name) || null\r\n    if (item === null) return null\r\n    return JSON.parse(localStorage.getItem(name))\r\n  }\r\n  \r\n  static removeLocalStorage(name) {\r\n    localStorage.removeItem(name)\r\n  }\r\n  \r\n  static getDateStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let d = date.getDate()\r\n    let m = date.getMonth() + 1\r\n    let y = date.getFullYear()\r\n    return `${d < 10 ? '0' : ''}${d}-${m < 10 ? '0' : ''}${m}-${y}`\r\n  }\r\n\r\n  static getTimeStr(timestamp) {\r\n    let date = new Date(timestamp || 1)\r\n    let hh = date.getHours()\r\n    let mm = date.getMinutes()\r\n    return `${hh < 10 ? '0' : ''}${hh}h${mm < 10 ? '0' : ''}${mm}`\r\n  }\r\n\r\n  static extractFacebookUsername(text = '') {\r\n    const matched = text.replace('/pg/', '/').match(/[facebok]+\\.com\\/([^?/]+)/)\r\n    if (!matched || matched.length < 1) return null\r\n    const uname = matched[1]\r\n    if (uname === 'events') return null\r\n    const _id = uname.match(/-([0-9]{7,20})$/)\r\n    if (!_id || _id.length < 1) return uname\r\n    else return _id[1]\r\n  }\r\n\r\n  static makeRequest(url, method = 'get', payload = {}) {\r\n    const token = Utils.getLocalStorage('token')\r\n    const _url = url + (url.indexOf('?') !== -1 ? '&' : '?') + 'token=' + token\r\n    return axios[method](_url, payload)\r\n  }\r\n\r\n  static cleanFBLink(url = '') {\r\n    return url.replace(/[&?](__|eid|fref)[^&?\\s]+/g, '')\r\n  }\r\n\r\n  static getOrgName(doc) {\r\n    return ORG_CODE[doc.org]\r\n  }\r\n\r\n  static fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n    \r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n  \r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n  \r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n  \r\n    document.body.removeChild(textArea);\r\n  }\r\n\r\n  static copyTextToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n      Utils.fallbackCopyTextToClipboard(text);\r\n      return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function() {\r\n      console.log('Async: Copying to clipboard was successful!');\r\n    }, function(err) {\r\n      console.error('Async: Could not copy text: ', err);\r\n    });\r\n  }\r\n\r\n  static nl2br(text) {\r\n    return text.trim().replace(/\\r/g, '').split('\\n').map(function(item, i, arr) {\r\n      const isLast = i === arr.length - 1\r\n      return <span key={i}>{item}{!isLast && <br/>}</span>\r\n    })\r\n  }\r\n\r\n  static getFormUrl(psid, tag) {\r\n    const euc = encodeURIComponent;\r\n    return `https://docs.google.com/forms/d/e/1FAIpQLSds9-as5kOcCr9_gtQ-4xic8-CTSmsQaHEajU-OX4xGpz8wHQ/viewform?usp=pp_url&entry.450789842=${euc(psid)}${tag ? '&entry.1699976597=' + euc(tag) : ''}`;\r\n  }\r\n\r\n  static getParameterByName(name) {\r\n    const url = window.location.href;\r\n    /*eslint-disable */\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    /*eslint-enable */\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\");\r\n    var results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n\r\n  static getPsid() {\r\n    const _id = Utils.getParameterByName('psid_hashed') || '';\r\n    const _psid = _id.match(/[0-9]{3,20}[A-Z]{3,10}/);\r\n    const psid = _psid ? _psid[0] : 'none';\r\n    return psid;\r\n  }\r\n\r\n  static goToInbox(inboxData) {\r\n    const {id, senders} = inboxData;\r\n    const name = senders.data[0].name;\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\r\n    const baseUrl = window.location.href.replace(/#.*/, '');\r\n    window.open(`${baseUrl}#/msg/${id}/${n}`, '_blank').focus();\r\n  }\r\n}\r\n\r\n// used by inbox component\r\nexport const makeRequest = async (method, endpoint, qs = {}, body = {}) => {\r\n  qs.token = Utils.getToken()\r\n  endpoint = endpoint.replace('/inbox/', '/inbox2/');\r\n  const res = method === 'post'\r\n    ? await axios.post(`${Config.BACKEND}${endpoint}`, body, { params: qs })\r\n    : await axios[method](`${Config.BACKEND}${endpoint}`, { params: qs })\r\n  Utils.checkError(res)\r\n  return res.data\r\n}\r\n\r\nexport default Utils\r\n","import React from 'react';\r\nimport nl2br from 'react-nl2br';\r\nimport Loader from '@chatscope/chat-ui-kit-react/dist/cjs/Loader';\r\nimport { makeRequest } from '../../../Utils';\r\n\r\nfunction Card({children}) {\r\n  return <div style={{\r\n    padding: '10px',\r\n    marginBottom: '10px',\r\n    border: '#cecece solid 2px',\r\n    position: 'relative',\r\n  }}>{children}</div>\r\n}\r\n\r\nclass TongHopEvent extends React.Component {\r\n  state = {\r\n    templates: [],\r\n    loading: true,\r\n    editingIndex: null,\r\n    editingText: null,\r\n    showing: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadTemplates();\r\n    window.openTemplateDialog = this.openTemplateDialog;\r\n  }\r\n\r\n  openTemplateDialog = () => {\r\n    this.setState({ showing: true });\r\n  };\r\n\r\n  loadTemplates = async () => {\r\n    this.setState({ loading: true });\r\n    let templates = (await makeRequest('get', '/inbox/templates'));\r\n    templates = Object.keys(templates).map(id => ({ id, ...templates[id] }));\r\n    this.setState({\r\n      templates, loading: false,\r\n      editingIndex: null, editingText: null\r\n    });\r\n  }\r\n\r\n  save = async () => {\r\n    const { templates, editingIndex, editingText } = this.state;\r\n    this.setState({ loading: true });\r\n    await makeRequest('post', '/inbox/templates', {}, {\r\n      id: templates[editingIndex].id,\r\n      text: editingText ? editingText : '(empty)',\r\n    });\r\n    this.loadTemplates();\r\n  }\r\n\r\n  fillToInput = (t) => () => {\r\n    window.setMessageInput(t.text);\r\n    this.setState({ showing: false });\r\n  }\r\n\r\n  render() {\r\n    const { loading, templates, editingIndex, editingText, showing } = this.state;\r\n    if (!showing) return null;\r\n\r\n    return <div style={{\r\n      position: 'fixed',\r\n      maxWidth: '100vw',\r\n      width: '600px',\r\n      height: '80vh',\r\n      Maxheight: '80vh',\r\n      background: 'white',\r\n      zIndex: '100',\r\n      top: '50%',\r\n      left: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      border: '#bbb solid 2px',\r\n      padding: '10px',\r\n      overflow: 'auto',\r\n    }}>\r\n      <button style={{ position: 'absolute', right: '10px' }} onClick={() => this.setState({ showing: false })}>[x] Thot</button>\r\n      <br/><br/>\r\n      {!loading && templates.map((t, i) => {\r\n        return editingIndex === i\r\n          ? <Card key={i}>\r\n            <textarea\r\n              style={{width: '100%'}}\r\n              value={editingText}\r\n              onChange={(e) => this.setState({ editingText: e.target.value })}\r\n              rows={5}\r\n            ></textarea>\r\n            <button onClick={this.save}>Save</button>\r\n            {'  '}\r\n            <button onClick={() => this.setState({ editingIndex: null, editingText: null })}>Cancel</button>\r\n          </Card>\r\n          : <Card key={i}>\r\n            <p style={{cursor: 'pointer'}} onClick={this.fillToInput(t)}>\r\n              {nl2br(t.text)}\r\n            </p>\r\n            <button onClick={() => this.setState({ editingIndex: i, editingText: t.text })}>Edit</button>\r\n            {'  '}\r\n            <button onClick={this.fillToInput(t)}>COPY &amp; PASTE</button>\r\n            {'  '}\r\n            {/* <button onClick={() => }>Delete</button> */}\r\n          </Card>\r\n      })}\r\n      {loading && <center><Loader /></center>}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default TongHopEvent;","import TongHopEvent from './components/messenger/custom/TongHopEvent';\r\n\r\n/*var ConfigDebug = {\r\n  BACKEND: 'http://localhost:5000/tonghopevent'\r\n}\r\nvar ConfigProduction = {\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent'\r\n}\r\n\r\nvar Config = ConfigDebug\r\nvar MODE = process.env.REACT_APP_MODE\r\nif (MODE === 'production')\r\n  Config = ConfigProduction*/\r\n\r\nconst Config = {\r\n  BACKEND: 'https://nuichatbot.herokuapp.com/tonghopevent',\r\n  SOCKETIO: 'https://nuichatbot.herokuapp.com/',\r\n  SOCKETIO_MODULE: 'tonghopevent',\r\n  SELF_PAGE_ID: '242401956152220',\r\n  INBOX_TITLE: 'tonghopevent',\r\n  INBOX_SEND_ABILITY: true,\r\n  INBOX_UNREAD_ABILITY: true,\r\n  INBOX_IGNORED_CONVERSATION: 't_229190944264162',\r\n  VERSION: '4.21_r1',\r\n  CustomMessengerWidget: TongHopEvent,\r\n}\r\n\r\nexport default Config","import React from 'react'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {}\r\n    window.changeHeader('Login')\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value })\r\n  }\r\n\r\n  async onLogin() {\r\n    if (this.state.username === '' || this.state.password === '') {\r\n      return window.showAlert({\r\n        title: 'Please fill in',\r\n        text: 'Please fill in your username and password'\r\n      })\r\n    } else {\r\n      this.setState({loading: true})\r\n      const {username, password} = this.state\r\n      const res = await axios.post(`${Config.BACKEND}/login`, {\r\n        username, password\r\n      })\r\n      this.setState({loading: false})\r\n      if (res.data.token) {\r\n        Utils.setLocalStorage('token', res.data.token)\r\n        window.location.href = '#/'\r\n      } else {\r\n        return window.showAlert({\r\n          title: 'Error',\r\n          text: res.data.error\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  async onRegister() {}\r\n\r\n  render() {\r\n    var classes = {\r\n      input: {\r\n        marginBottom: '20px',\r\n        width: '500px',\r\n        maxWidth: '100%'\r\n      },\r\n      container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n      },\r\n      cardStyle: {\r\n        maxWidth: '500px',\r\n        marginTop: '20px',\r\n        marginRight: 'auto',\r\n        marginLeft: 'auto',\r\n      }\r\n    }\r\n\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    const form = (\r\n      <div>\r\n        <Card style={classes.cardStyle}>\r\n          <CardContent>\r\n            <Typography variant=\"h5\" component=\"h2\">Admin - TongHopEvent</Typography>\r\n            <Typography color=\"textSecondary\">Please login to continue</Typography>\r\n            <TextField\r\n              label=\"Username\"\r\n              type=\"text\"\r\n              value={this.state.username}\r\n              style={classes.input}\r\n              onChange={this.handleChange('username')}\r\n              margin=\"normal\"\r\n            />\r\n            <TextField\r\n              label=\"Password\"\r\n              type=\"password\"\r\n              value={this.state.password}\r\n              style={classes.input}\r\n              onChange={this.handleChange('password')}\r\n              margin=\"normal\"\r\n            />\r\n            <div>\r\n              <Button onClick={this.onLogin.bind(this)} color='primary'>Login</Button>\r\n            </div>\r\n          </CardContent>        \r\n        </Card>\r\n      </div>\r\n    )\r\n\r\n    return this.state.loading ? loading : form\r\n  }\r\n}\r\n\r\nexport default Login","import React from 'react'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport PropTypes from 'prop-types'\r\n\r\nclass NoteEditDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      comment: props.doc.comment || '',\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    doc: PropTypes.any.isRequired,\r\n  }\r\n\r\n  render() {\r\n    const { comment } = this.state\r\n    const { onClose } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\r\n          <DialogTitle id=\"form-dialog-title\">Ghi ch</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              Bn c th  li ghi ch cho bi vit ny. Ch c Admin mi nhn thy ghi ch.\r\n            </DialogContentText>\r\n            <TextField\r\n              multiline\r\n              rowsMax=\"20\"\r\n              value={comment}\r\n              onChange={event => {this.setState({ comment: event.target.value })}}\r\n              margin=\"normal\"\r\n              variant=\"outlined\"\r\n              fullWidth\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => onClose(false)} color=\"primary\">\r\n              Quay li\r\n            </Button>\r\n            <Button onClick={() => onClose(comment)} color=\"primary\">\r\n              LU GHI CH\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NoteEditDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport Linkify from 'react-linkify'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport CheckIcon from '@material-ui/icons/Check'\r\nimport WarningIcon from '@material-ui/icons/Warning'\r\nimport NoteEditDialog from './NoteEditDialog'\r\nimport './Doc.css'\r\n\r\nclass Doc extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: false,\r\n      isNoteEditOpen: false,\r\n      isCopied: false,\r\n      isExpanded: !this.props.admin,\r\n      copyContent: this.props.admin ? this.getCopyContent() : '',\r\n    }\r\n\r\n    if (this.props.doc && this.props.doc.linkfb) {\r\n      this.fbusername = Utils.extractFacebookUsername(this.props.doc.linkfb)\r\n    }\r\n\r\n    if (props.admin) {\r\n      if (props.doc.image)\r\n        this.state.publishAction = 'publish'\r\n      else if (this.fbusername)\r\n        this.state.publishAction = 'getimage'\r\n      else\r\n        this.state.publishAction = null\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    doc: PropTypes.object.isRequired,\r\n  }\r\n\r\n  async updateDocField(field, val, url, data) {\r\n    this.setState({loading: true})\r\n    const {doc} = this.props\r\n    const res = await axios.post(url, data)\r\n    if (res.data.success) {\r\n      const newDoc = JSON.parse(JSON.stringify(doc))\r\n      newDoc[field] = val\r\n      this.props.setDoc(this.props.i, newDoc)\r\n    } else {\r\n      window.showAlert({\r\n        title: 'Error',\r\n        text: res.data.error\r\n      })\r\n    }\r\n    this.setState({loading: false})\r\n  }\r\n\r\n  async toggleTrashDoc() {\r\n    const { doc } = this.props\r\n    const trashed = !doc.trashed\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'trashed', trashed,\r\n      `${Config.BACKEND}/doc/${doc.id}/trashed?token=${token}`, {trashed}\r\n    )\r\n  }\r\n\r\n  async toggleApproved() {\r\n    const {doc} = this.props\r\n    const approved = !doc.approved\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'approved', approved,\r\n      `${Config.BACKEND}/doc/${doc.id}/approved?token=${token}`, {approved}\r\n    )\r\n  }\r\n\r\n  async updateComment(cmt) {\r\n    const {doc} = this.props\r\n    const token = Utils.getLocalStorage('token')\r\n    await this.updateDocField(\r\n      'comment', cmt || '',\r\n      `${Config.BACKEND}/doc/${doc.id}/comment?token=${token}`, {comment: cmt}\r\n    )\r\n  }\r\n\r\n  getCopyContent() {\r\n    const { doc } = this.props\r\n\r\n    const content = `-- ${doc.name} --\\n` +\r\n    `${this.generateLocationTag(doc)} ${doc.type.join(' ')}\\n\\n` +\r\n    ` M t: ${doc.description.trim()}\\n\\n` +\r\n    ` Link facebook: ${Utils.cleanFBLink(doc.linkfb)}\\n` +\r\n    (!!doc.wanted ? ' Yu cu i tng: ' + doc.wanted.join(', ').trim() + '\\n' : '') + \r\n    (!!doc.deadline ? ' Deadline tuyn nhn s: ' + doc.deadline.trim() + '\\n' : '') +\r\n    (!!doc.benefit ? ' Quyn li khi tham gia d n:\\n' + doc.benefit.trim() + '\\n' : '') +\r\n    `\\nTrackID:${doc.psid}:${doc.id}`\r\n\r\n    return content.trim()\r\n  }\r\n\r\n  generateLocationTag(doc) {\r\n    const { location } = doc\r\n    if (!location) return ''\r\n    return location === 'Ton quc'\r\n      ? `#d_n_ton_quc`\r\n      : `#d_n__${doc.location.replace(/\\s+/g, '_')}`\r\n  }\r\n\r\n  getImageUrl() {\r\n    const { doc } = this.props\r\n    return doc.image ? 'https://drive.google.com/uc?export=view&id=' + doc.image[0] : null\r\n  }\r\n\r\n  _renderNonAdminInfo() {\r\n    const { doc } = this.props\r\n    return <p style={{\r\n      backgroundColor: doc.trashed ? '#ffa3a3' : '#eee',\r\n      padding: '10px',\r\n      width: '100%'}}\r\n    >\r\n      <center>\r\n        {doc.trashed ? 'Bi vit ny  b t chi'\r\n          : (doc.approved\r\n            ? 'Bi vit ny  c duyt v s sm c ng ln fanpage'\r\n            : 'Bi vit ny ang i  c kim duyt')\r\n        }\r\n      </center>\r\n    </p>\r\n  }\r\n\r\n  _renderDuplicatedWarningIcon() {\r\n    const { doc, duplicateHelper, openDuplicateDocDialog } = this.props\r\n    if (!duplicateHelper || doc.approved) return null\r\n    const duplicatedDocs = duplicateHelper.checkDoc(doc)\r\n    if (!duplicatedDocs) return null\r\n    else return (\r\n      <Fab\r\n        size=\"small\"\r\n        color=\"primary\"\r\n        style={{marginRight: '15px'}}\r\n        onClick={() => openDuplicateDocDialog(duplicatedDocs, doc.id)}\r\n      >\r\n        <WarningIcon />\r\n      </Fab>\r\n    )\r\n  }\r\n\r\n  _renderPostContent() {\r\n    const { doc } = this.props\r\n    return (\r\n      <React.Fragment>\r\n        <p>{this.generateLocationTag(doc)} {doc.type.join(' ')}</p>\r\n        <p>{Utils.nl2br(doc.description)}</p>\r\n        <p>\r\n           Link facebook: {Utils.cleanFBLink(doc.linkfb)}<br/>\r\n          {!!doc.wanted && <span> Yu cu i tng: {doc.wanted.join(', ')}<br/></span>}\r\n          {!!doc.deadline && <span> Deadline tuyn nhn s: {Utils.nl2br(doc.deadline)}<br/></span>}\r\n          {!!doc.benefit && <span> Quyn li khi tham gia d n: <br/>{Utils.nl2br(doc.benefit)}<br/></span>}\r\n        </p>\r\n        {this.props.admin && <p>TrackID:{doc.psid}:{doc.id}</p>}\r\n        {!!doc.image && <p>nh tu chn: {'https://drive.google.com/open?id=' + doc.image[0]}</p>}\r\n        <p>\r\n          (Gi lc {Utils.getTimeStr(doc.created)} ngy {Utils.getDateStr(doc.created)})\r\n          {!!doc.org && <span><br/>n v t chc: {Utils.getOrgName(doc)}</span>}\r\n        </p>\r\n        {(!this.props.admin && !!doc.feedback) && <p> Cu hi, gp : {doc.feedback}</p>}\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  _renderMainCard() {\r\n    const { doc } = this.props\r\n    const { isExpanded, copyContent, publishAction, isNoteEditOpen } = this.state\r\n    const gotoPublish = this.props.gotoPublish || (() => {})\r\n\r\n    const componentDecorator = (href, text, key) => (\r\n      <a href={href} key={key} target=\"_blank\" rel=\"noopener noreferrer\">\r\n        {text}\r\n      </a>\r\n    )\r\n\r\n    /* TEXT CONTENT (visible for all) */\r\n\r\n    const content = <div>\r\n      <div style={isExpanded ? null : {maxHeight: '315px', overflow:'hidden', position: 'relative'}} className={isExpanded ? null : 'fade-out'}>\r\n        {!this.props.admin && this._renderNonAdminInfo()}\r\n        <p>\r\n          {doc.approved && <Fab size=\"small\" color=\"primary\" style={{marginRight: '15px'}} disabled>\r\n            <CheckIcon />\r\n          </Fab>}\r\n          {this._renderDuplicatedWarningIcon()}\r\n          <b>-- {doc.name} --</b>\r\n          {doc.plan && <p><span className='doc-plan'> Gi {doc.plan.toUpperCase()}</span></p>}\r\n        </p>\r\n        <Linkify componentDecorator={componentDecorator}>\r\n          {this._renderPostContent()}\r\n        </Linkify>\r\n      </div>\r\n      {this.props.admin && <div>\r\n        <center>\r\n          <Button onClick={() => this.setState({isExpanded: !isExpanded})}>\r\n            {isExpanded ? 'Thu gn' : 'Hin thm ...'}\r\n          </Button>\r\n        </center>\r\n      </div>}\r\n      <Divider />\r\n\r\n      {/* ADMIN BUTTONS */}\r\n\r\n      {this.props.admin &&\r\n        <React.Fragment>\r\n          {!this.state.loading ? <div>\r\n            {doc.comment && doc.comment.trim().length > 0 && <p><b> Ghi ch:</b> {Utils.nl2br(doc.comment)}</p>}\r\n            {!!doc.feedback && <p> Cu hi, gp : {doc.feedback}</p>}\r\n            <Button variant=\"outlined\" onClick={this.toggleTrashDoc.bind(this)} color='primary'>Xa</Button>\r\n            <Button variant=\"outlined\" onClick={this.toggleApproved.bind(this)} color='primary'>Tick</Button>\r\n            {publishAction &&\r\n              <Button variant=\"outlined\" onClick={() => {gotoPublish({\r\n                id: doc.id,\r\n                caption: copyContent,\r\n                url: this.getImageUrl(),\r\n                fbusername: this.fbusername,\r\n                psid: doc.psid,\r\n              }, publishAction)}} color='primary'>ng bi</Button>\r\n            }\r\n            <Button variant=\"outlined\" onClick={() => this.setState({isNoteEditOpen: true})} color='primary'>Ghi ch</Button>\r\n            <Button variant=\"outlined\" onClick={() => this.props.openToolsDialog(doc)} color='primary'>+</Button>\r\n          </div>\r\n          : <center>\r\n            <CircularProgress />\r\n          </center>}\r\n        </React.Fragment>\r\n      }\r\n    </div>\r\n\r\n    /* CARD BACKGROUND */\r\n\r\n    return (\r\n      <div style={{paddingBottom: '20px'}}>\r\n        <Card>\r\n          <CardContent\r\n            style={{backgroundColor: (doc.approved && this.props.admin) ? '#cfd8dc' : '#fff'}}\r\n            className={(doc.approved && this.props.admin) ? 'approved' : null}\r\n          >\r\n            {content}\r\n          </CardContent>\r\n        </Card>\r\n        {isNoteEditOpen && <NoteEditDialog doc={doc} onClose={(cmt) => {\r\n          this.setState({isNoteEditOpen: false})\r\n          if (cmt !== false) this.updateComment(cmt)\r\n        }}/>}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderTrashedDoc() {\r\n    const { doc } = this.props\r\n    if (this.state.loading) return <center><CircularProgress /></center>\r\n    else return <p>\r\n      <b>( xa)</b> {doc.name} &nbsp;&nbsp;&nbsp;\r\n      <Button\r\n        variant=\"outlined\"\r\n        size=\"small\"\r\n        color=\"primary\"\r\n        className=\"restore-btn\"\r\n        onClick={this.toggleTrashDoc.bind(this)}\r\n      >\r\n        Khi phc\r\n      </Button>\r\n    </p>\r\n  }\r\n\r\n  render() {\r\n    const { doc, admin } = this.props\r\n    return doc.trashed && admin\r\n      ? this._renderTrashedDoc()\r\n      : this._renderMainCard()\r\n  }\r\n}\r\n\r\nexport default Doc","import React from 'react'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Utils from '../Utils'\r\nimport Config from '../Config'\r\nimport PropTypes from 'prop-types'\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\r\nimport { removeVietnameseTones } from './messenger/utils'\r\nimport './ToolsDialog.css'\r\n\r\nconst copyObj = (obj) => JSON.parse(JSON.stringify(obj))\r\n\r\nconst TEMPLATES = [\r\n  {\r\n    desc: 'Bo trng bi',\r\n    text: ' c ngi nhp thng tin ca d n / cuc thi / s kin ny. Khng bit bn c mun b sung hay thay i g khng nh?\\n\\nNu khng, chng mnh s xa thng tin bn  nhp  khng b trng vi bi  ng.'\r\n  },{\r\n    desc: 'Bo b xa v ko ph hp',\r\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn  b xa do khng ph hp vi iu khon s dng ca chng mnh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\r\n  }, {\r\n    desc: 'Bo d n c li nhun',\r\n    text: 'Xin cho bn,\\n\\nD n / cuc thi / s kin ca bn c iu hnh bi mt t chc / c nhn hot ng c li nhun. Da theo iu khon s dng ca chng mnh, bi ca bn phi tr ph 100.000 VN  c th c ng bi ln fanpage nh.\\n\\nHy tham kho iu khon s dng ca fanpage ti y: https://sites.google.com/view/tonghopevent'\r\n  },\r\n  {\r\n    desc: 'Bo thiu thng tin',\r\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, do bi vit ca bn cn thiu mt s thng tin nn chng mnh cha th ph duyt c. Bn hy in li form vi y  thng tin hn nh!\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\r\n  },\r\n  {\r\n    desc: 'in li (khng paste link)',\r\n    text: 'Admin  xem bi vit ca bn. Tuy nhin, chng mnh khng th x l nu bn ch copy-paste mi link bi vit. Bn hy in li form tht r rng, bao gm c phn gii thiu,  ngha d n / cuc thi / s kin nh.\\n\\nHy tham kho v d sau: https://bit.ly/2TZKbee'\r\n  },\r\n]\r\n\r\nclass ToolsDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loading: true,\r\n      error: false,\r\n      showTemplates: true,\r\n      sendInboxData: null,\r\n      inboxData: {},\r\n      isLinkCopied: false,\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    open: PropTypes.bool.isRequired,\r\n    closeToolsDialog: PropTypes.func.isRequired,\r\n    name: PropTypes.string,\r\n    psid: PropTypes.string,\r\n    doc: PropTypes.any.isRequired,\r\n  }\r\n\r\n  async fetchData() {\r\n    this.setState({ error: false, loading: true, showTemplates: true, isLinkCopied: false })\r\n    const response = await Utils.makeRequest(\r\n      `${Config.BACKEND}/inbox/${this.props.psid}`\r\n    )\r\n    const { data } = response\r\n    if (data && Object.keys(data).length > 0) {\r\n      this.setState({\r\n        loading: false,\r\n        error: false,\r\n        inboxData: data,\r\n      })\r\n    } else {\r\n      this.setState({\r\n        loading: false,\r\n        error: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  async sendInbox() {\r\n    const inboxData = copyObj(this.state.sendInboxData)\r\n    this.setState({sendInboxData: null})\r\n    this.props.closeToolsDialog()\r\n    const res = await Utils.makeRequest(\r\n      `${Config.BACKEND}/inbox/${this.props.psid}`,\r\n      'post', { message: ' ' + inboxData.text }\r\n    )\r\n    if (res.data && res.data.success) {\r\n      window.toastr.success(' gi tin nhn thnh cng!')\r\n    } else {\r\n      window.toastr.error(' C li xy ra, ko th gi tin nhn ')\r\n    }\r\n  }\r\n\r\n  goToPageInbox() {\r\n    Utils.goToInbox(this.state.inboxData);\r\n    this.props.closeToolsDialog();\r\n  }\r\n\r\n  _renderSendInboxDialogAsk() {\r\n    const { sendInboxData } = this.state;\r\n    const isWithin24HWindow = (Date.now() - this.props.doc.created) < (86400 * 1000)\r\n    const handleClose = () => this.setState({sendInboxData: null});\r\n    if (!sendInboxData) return null;\r\n    else return <Dialog open={!!sendInboxData} onClose={handleClose}>\r\n      <DialogTitle id=\"alert-dialog-title\">{sendInboxData.desc}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText id=\"alert-dialog-description\">\r\n          {\r\n            isWithin24HWindow\r\n             ? 'Gi tin nhn c ni dung nh sau (c th sa):'\r\n             : 'Khng th t ng gi tin nhn. Hy copy-paste v inbox th cng:'\r\n          }<br/><br/>\r\n          <TextField\r\n            multiline\r\n            rowsMax=\"20\"\r\n            value={sendInboxData.text}\r\n            onChange={event => {this.setState({\r\n              sendInboxData: {\r\n                ...sendInboxData,\r\n                text: event.target.value,\r\n              }\r\n            })}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          />\r\n        </DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\"> Quay li </Button>\r\n        {!isWithin24HWindow\r\n          && <Button onClick={() => Utils.copyTextToClipboard(sendInboxData.text)} color=\"primary\"> Copy tin nhn </Button>\r\n        }\r\n        {isWithin24HWindow\r\n          ? <Button onClick={() => this.sendInbox()} color=\"primary\"> GI </Button>\r\n          : <Button onClick={() => this.goToPageInbox()} color=\"primary\"> i ti inbox </Button>\r\n        }\r\n      </DialogActions>\r\n    </Dialog>\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <List>\r\n        <ListItem button>\r\n          <ListItemText primary=\"(C li xy ra)\" />\r\n        </ListItem>\r\n        <ListItem button onClick={this.props.closeToolsDialog}>\r\n          <ListItemText primary=\"Quay li\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  _renderContent() {\r\n    const { inboxData, showTemplates, isLinkCopied } = this.state\r\n\r\n    return (\r\n      <List>\r\n        <ListItem button onClick={this.goToPageInbox.bind(this)}>\r\n          <ListItemText\r\n            primary=\"i ti inbox\"\r\n            secondary={`Tn FB: ${inboxData.senders.data[0].name}`}\r\n          />\r\n        </ListItem>\r\n        <Divider />\r\n        {!showTemplates && <ListItem button onClick={() => this.setState({showTemplates: true})}>\r\n          <ListItemText primary={` (Hin cc mu tin nhn)`} />\r\n        </ListItem>}\r\n        {showTemplates && TEMPLATES.map((t, i) => {\r\n          return <ListItem button onClick={() => this.setState({ sendInboxData: t })} key={i}>\r\n            <ListItemText primary={` ${t.desc}`} />\r\n          </ListItem>\r\n        })}\r\n        <Divider />\r\n          <CopyToClipboard\r\n            text={`${window.location.protocol}//${window.location.host}/data/#/view/${this.props.doc.id}`}\r\n            onCopy={() => this.setState({isLinkCopied: true})}\r\n          >\r\n            <ListItem button>\r\n              <ListItemText primary={isLinkCopied ? \"( copy link)\" : \"Copy link bi vit\"} />\r\n            </ListItem>\r\n          </CopyToClipboard>\r\n        <Divider />\r\n        <ListItem button onClick={this.props.closeToolsDialog}>\r\n          <ListItemText primary=\"Quay li\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { name, open } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {this._renderSendInboxDialogAsk()}\r\n        <Dialog\r\n          open={open}\r\n          onEnter={this.fetchData.bind(this)}\r\n          onBackdropClick={this.props.closeToolsDialog}\r\n          className=\"tools-dialog\"\r\n          aria-labelledby=\"simple-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"simple-dialog-title\">{name ? name.substr(0,24) : ''}</DialogTitle>\r\n          {this.state.loading\r\n            ? <center><CircularProgress /></center>\r\n            : this.state.error ? this._renderError() : this._renderContent()\r\n          }\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ToolsDialog\r\n","import React from 'react'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport PropTypes from 'prop-types'\r\nimport Utils from '../Utils'\r\n\r\nclass DuplicateDocDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {}\r\n  }\r\n\r\n  static propTypes = {\r\n    docs: PropTypes.any,\r\n    selectedDocID: PropTypes.any,\r\n    closeDuplicateDocDialog: PropTypes.func.isRequired,\r\n  }\r\n\r\n  _renderContent() {\r\n    const { docs, selectedDocID } = this.props\r\n    const now = Date.now()\r\n\r\n    return (\r\n      <List>\r\n        {docs.map((doc) => {\r\n          if (doc.id === selectedDocID) return null\r\n          const daysAgo = Math.floor((now - doc.created) / 86400 / 1000)\r\n          return <ListItem button onClick={\r\n            () => window.open(`/data/#/view/${doc.id}`, '_blank')\r\n          } key={doc.id}>\r\n            <ListItemText\r\n              primary={doc.name}\r\n              secondary={`${\r\n                Utils.getDateStr(doc.created)\r\n              } lc ${\r\n                Utils.getTimeStr(doc.created)\r\n              } ${daysAgo > 0 ? ` (${daysAgo} ngy trc)` : ''}`}\r\n            />\r\n          </ListItem>\r\n        })}\r\n        <Divider />\r\n        <ListItem button onClick={this.props.closeDuplicateDocDialog}>\r\n          <ListItemText primary=\"Quay li\" />\r\n        </ListItem>\r\n      </List>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { docs } = this.props\r\n\r\n    return (\r\n      <Dialog\r\n        open={!!docs}\r\n        aria-labelledby=\"simple-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"simple-dialog-title\">Bi ng trng</DialogTitle>\r\n        <DialogContent>\r\n          Bi ng ny c th b trng vi nhng bi sau:\r\n        </DialogContent>\r\n        {docs && this._renderContent()}\r\n      </Dialog>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DuplicateDocDialog\r\n","\r\nimport Utils from './Utils'\r\n\r\nclass DuplicateHelper {\r\n  seen = {}\r\n\r\n  pushLookbackData(lookbackArr) {\r\n    for (const doc of lookbackArr) {\r\n      const { fbname } = doc;\r\n      if (this.seen[fbname]) {\r\n        this.seen[fbname].push(doc)\r\n      } else {\r\n        this.seen[fbname] = [doc]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remember that we've seen this doc\r\n   * @param {*} doc \r\n   */\r\n  pushDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    if (!uname) return null\r\n    if (this.seen[uname]) {\r\n      this.seen[uname].push(doc)\r\n    } else {\r\n      this.seen[uname] = [doc]\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns arr of docs if doc is seen\r\n   * Returns null if doc isn't seen\r\n   * @param {*} doc \r\n   */\r\n  checkDoc(doc) {\r\n    const uname = Utils.extractFacebookUsername(doc.linkfb)\r\n    const arr = this.seen[uname]\r\n    return (arr && arr.length > 1) ? arr : null\r\n  }\r\n\r\n  /**\r\n   * Clear all remembered docs\r\n   */\r\n  clear() {\r\n    this.seen = {}\r\n  }\r\n}\r\n\r\nexport default DuplicateHelper","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Doc from '../components/Doc'\r\nimport ToolsDialog from '../components/ToolsDialog'\r\nimport DuplicateDocDialog from '../components/DuplicateDocDialog'\r\nimport DuplicateHelper from '../DuplicateHelper'\r\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      list: [],\r\n      toolsDialogOpen: false,\r\n      toolsDialogDoc: {},\r\n      duplicateHelper: new DuplicateHelper(),\r\n      duplicateDocDialog: null,\r\n      selectedDocID: '',\r\n    }\r\n    window.changeHeader('Qun l d liu - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n    window.markDocApproved = this.markDocApproved\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.markDocApproved = null\r\n  }\r\n\r\n  markDocApproved = (id) => {\r\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\r\n    window.DOCID_APPROVED[id] = true\r\n    this.dispatchDocApproved()\r\n  }\r\n\r\n  dispatchDocApproved = () => {\r\n    if (!window.DOCID_APPROVED) window.DOCID_APPROVED = {}\r\n    this.setState(prevState => ({\r\n      list: prevState.list.map(doc => {\r\n        if (window.DOCID_APPROVED[doc.id]) doc.approved = true\r\n        return doc\r\n      })\r\n    }))\r\n  }\r\n\r\n  async loadData() {\r\n    const duplicateHelper = new DuplicateHelper()\r\n    const token = Utils.getToken()\r\n    const [res, {data: lookbackArr}] = await Promise.all([\r\n      axios.get(`${Config.BACKEND}/feed?token=${token}`),\r\n      axios.get(`${Config.BACKEND}/lookback?token=${token}`),\r\n    ])\r\n    Utils.checkError(res)\r\n    duplicateHelper.pushLookbackData(lookbackArr);\r\n    this.setState({\r\n      loading: false,\r\n      list: res.data,\r\n      duplicateHelper,\r\n    })\r\n    this.dispatchDocApproved()\r\n  }\r\n\r\n  handleChange = name => event => {\r\n    this.setState({ [name]: event.target.value })\r\n  }\r\n\r\n  onClickEdit() {\r\n    this.setState({edit: true})\r\n  }\r\n\r\n  setDoc(i, data) {\r\n    this.setState(state => {\r\n      const list = state.list\r\n      list[i] = data\r\n      return {list}\r\n    })\r\n  }\r\n\r\n  openToolsDialog(doc) {\r\n    this.setState({\r\n      toolsDialogOpen: true,\r\n      toolsDialogDoc: doc\r\n    })\r\n  }\r\n\r\n  openDuplicateDocDialog(docs, docid) {\r\n    this.setState({\r\n      duplicateDocDialog: docs,\r\n      selectedDocID: docid,\r\n    })\r\n  }\r\n\r\n  render() {\r\n    var classes = {\r\n      input: {\r\n        marginBottom: '20px',\r\n        width: '500px',\r\n        maxWidth: '100%'\r\n      },\r\n      container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n      },\r\n      cardStyle: {\r\n        //maxWidth: '800px',\r\n        marginTop: '20px',\r\n        marginRight: '20px',\r\n        marginLeft: '20px',\r\n      }\r\n    }\r\n\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    const { gotoPublish } = this.props\r\n    const { duplicateDocDialog, duplicateHelper, selectedDocID } = this.state\r\n    const home = (\r\n      <React.Fragment>\r\n        <div style={classes.cardStyle}>\r\n          { this.state.list.length === 0 && <center><h2>Cha c bi ng no</h2></center> }\r\n          <ResponsiveMasonry\r\n            columnsCountBreakPoints={{350: 1, 1000: 2, 1550: 3}}\r\n          >\r\n            <Masonry gutter=\"10px\">\r\n              {this.state.list.map((doc, i) => {\r\n                return doc ? (\r\n                  <div key={doc.id}>\r\n                    <Doc\r\n                      doc={doc}\r\n                      setDoc={this.setDoc.bind(this)}\r\n                      i={i}\r\n                      admin\r\n                      gotoPublish={gotoPublish}\r\n                      openToolsDialog={this.openToolsDialog.bind(this)}\r\n                      openDuplicateDocDialog={this.openDuplicateDocDialog.bind(this)}\r\n                      duplicateHelper={duplicateHelper}\r\n                    />\r\n                  </div>\r\n                ) : null\r\n              })}\r\n            </Masonry>\r\n          </ResponsiveMasonry>\r\n        </div>\r\n        <ToolsDialog\r\n          open={this.state.toolsDialogOpen}\r\n          closeToolsDialog={() => this.setState({toolsDialogOpen: false})}\r\n          name={this.state.toolsDialogDoc.name}\r\n          psid={this.state.toolsDialogDoc.psid}\r\n          doc={this.state.toolsDialogDoc}\r\n        />\r\n        <DuplicateDocDialog\r\n          docs={duplicateDocDialog}\r\n          selectedDocID={selectedDocID}\r\n          closeDuplicateDocDialog={() => this.setState({duplicateDocDialog: null})}\r\n        />\r\n      </React.Fragment>\r\n    )\r\n\r\n    return this.state.loading ? loading : home\r\n  }\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Doc from '../components/Doc'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass View extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      doc: {},\r\n    }\r\n    window.changeHeader('Qun l d liu - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n  }\r\n\r\n  async loadData() {\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${Config.BACKEND}/doc/${this.props.id}?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, doc: null})\r\n    else\r\n      this.setState({loading: false, doc: res.data})\r\n  }\r\n\r\n  _renderDocView() {\r\n    return (\r\n      <div style={classes.cardStyle}>\r\n        <Doc doc={this.state.doc || {}} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderDocNotFound() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>C li xy ra</h2>\r\n        Bi ng ny khng tn ti hoc  b xo<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    return this.state.loading ? loading : \r\n      this.state.doc ? this._renderDocView() : this._renderDocNotFound()\r\n  }\r\n}\r\n\r\nexport default View","import 'date-fns';\r\nimport React from 'react';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardTimePicker,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\n\r\nclass MaterialUIPickers extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      publish_time: new Date(\r\n        Date.now() + 20 * 60 * 1000\r\n      )\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.handleDateChange(this.state.publish_time.getTime() / 1000)\r\n  }\r\n\r\n  handleDateChange(date) {\r\n    this.setState({publish_time: date})\r\n    this.props.handleDateChange(date.getTime() / 1000)\r\n  }\r\n\r\n  render() {\r\n    const { publish_time } = this.state;\r\n\r\n    return (\r\n      <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n          margin=\"normal\"\r\n          id=\"mui-pickers-date\"\r\n          label=\"Date picker\"\r\n          value={publish_time}\r\n          onChange={this.handleDateChange.bind(this)}\r\n          KeyboardButtonProps={{\r\n            'aria-label': 'change date',\r\n          }}\r\n        />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n        <KeyboardTimePicker\r\n          margin=\"normal\"\r\n          id=\"mui-pickers-time\"\r\n          label=\"Time picker\"\r\n          value={publish_time}\r\n          onChange={this.handleDateChange.bind(this)}\r\n          KeyboardButtonProps={{\r\n            'aria-label': 'change time',\r\n          }}\r\n        />\r\n      </MuiPickersUtilsProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MaterialUIPickers;","import React, {useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Utils from '../Utils';\r\nimport DatePicker from '../components/DatePicker';\r\n\r\nconst ONE_DAY_IN_MS = 86400 * 1000;\r\nconst INTERVAL_BETWEEN_POSTS_IN_MS = 15 * 60000; // 10 mins\r\nconst TIMESLOT_BEGIN_AT = (-7 + 20) * 60 * 60000; // 20h everyday GMT+7\r\nconst MIN_SCHEDULED_TIME_INTERVAL = 20 * 60000; // must schedule at least 20 mins in advance\r\nconst NUMBER_OF_DAYS = 5;\r\nconst NUMBER_OF_TIMESLOT = 9;\r\n\r\nconst generateTimeslots = () => {\r\n  const now = Date.now();\r\n  const beginOfDay = Math.floor(now / ONE_DAY_IN_MS) * ONE_DAY_IN_MS;\r\n\r\n  const timeslots = [];\r\n  let day = 0;\r\n  while (timeslots.length < NUMBER_OF_DAYS) {\r\n    const startAt = beginOfDay + TIMESLOT_BEGIN_AT + day*ONE_DAY_IN_MS;\r\n    const slotsOfDay = [];\r\n    for (let i = 0; i < NUMBER_OF_TIMESLOT; i++) {\r\n      const time = startAt + INTERVAL_BETWEEN_POSTS_IN_MS*i;\r\n      if (time - now > MIN_SCHEDULED_TIME_INTERVAL) {\r\n        slotsOfDay.push(time);\r\n      }\r\n    }\r\n    if (slotsOfDay.length > 2) timeslots.push({\r\n      startAt,\r\n      slotsOfDay,\r\n    });\r\n    day++;\r\n  }\r\n\r\n  return timeslots;\r\n};\r\n\r\nconst isSlotTaken = (stat, time) => {\r\n  return stat.some((t, i) => {\r\n    if (time - INTERVAL_BETWEEN_POSTS_IN_MS/2 < t\r\n      && t < time + INTERVAL_BETWEEN_POSTS_IN_MS/2\r\n    ) {\r\n      stat.splice(i, 1);\r\n      return true;\r\n    }\r\n    return false;\r\n  });\r\n}\r\n\r\nconst ScheduledList = ({stat}) => {\r\n  return <>\r\n    <p><b>Cc bi ng  ln lch</b></p>\r\n    <ul>\r\n      {stat.map(s => {\r\n        return <li key={s}>{Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</li>\r\n      })}\r\n    </ul>\r\n  </>;\r\n}\r\n\r\n// statArr = [int, int...]\r\nexport const TimeslotPicker = ({ statArr, value, onChange }) => {\r\n  const [useOldPicker, setUseOldPicker] = useState(false);\r\n  const timeslots = generateTimeslots();\r\n  const stat = JSON.parse(JSON.stringify(statArr));\r\n  const val = value * 1000;\r\n\r\n  return <>\r\n    <p>\r\n      <b>Ln lch bi ng</b>{'   '}\r\n      <Button\r\n        variant='outlined'\r\n        size='small'\r\n        onClick={() => setUseOldPicker(!useOldPicker)}\r\n      >{useOldPicker ? 'Chn gi theo slot' : 'Chn gi th cng'}</Button>\r\n    </p>\r\n\r\n    {!useOldPicker && timeslots.map(day => <p key={day.startAt}>\r\n      {Utils.getDateStr(day.startAt)}<br/>\r\n      {day.slotsOfDay.map(time => <React.Fragment key={time}>\r\n        <Button\r\n          variant={val === time ? 'contained' : 'outlined'} size='small'\r\n          onClick={() => onChange(Math.round(time/1000))}\r\n          disabled={isSlotTaken(stat, time)}\r\n        >{Utils.getTimeStr(time)}</Button>\r\n        {'  '}\r\n      </React.Fragment>)}\r\n    </p>)}\r\n\r\n    {useOldPicker && <>\r\n      <DatePicker\r\n        handleDateChange={(date) => onChange(Math.round(date))}\r\n      />\r\n      <ScheduledList stat={statArr} />\r\n    </>}\r\n  </>\r\n}\r\n","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Img from 'react-image'\r\nimport { TimeslotPicker } from '../components/Timeslots'\r\nimport Masonry, {ResponsiveMasonry} from 'react-responsive-masonry'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    marginTop: '20px',\r\n    marginRight: '1em',\r\n    marginLeft: '1em',\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  }\r\n}\r\n\r\nclass Publish extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      completed: false,\r\n      loading: true,\r\n      stat: [],\r\n      inboxData: null,\r\n    }\r\n    if (props.data) {\r\n      this.state.id = props.data.id\r\n      this.state.caption = props.data.caption\r\n      this.state.url = props.data.url\r\n      this.state.psid = props.data.psid\r\n      this.state.scheduled_publish_time = 0\r\n    }\r\n    window.changeHeader('Cng c ng bi - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadStat()\r\n    this.loadInbox()\r\n  }\r\n\r\n  async loadStat() {\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${Config.BACKEND}/publish/stat?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, stat: []})\r\n    else\r\n      this.setState({loading: false, stat: res.data})\r\n  }\r\n\r\n  async loadInbox() {\r\n    const { data } = await Utils.makeRequest(`${Config.BACKEND}/inbox/${this.state.psid}`)\r\n    if (data && Object.keys(data).length > 0) {\r\n      this.setState({ inboxData: data })\r\n    }\r\n  }\r\n\r\n  getErrorMessage = (data) => {\r\n    if (data?.error?.message) {\r\n      return 'L do: ' + data.error.message\r\n    } else {\r\n      return 'Hy bo li cho Nui.'\r\n    }\r\n  }\r\n  \r\n  async doPublish() {\r\n    //this.setState({loading: true})\r\n    const token = Utils.getLocalStorage('token')\r\n    const idInDatabase = this.state.id\r\n    const postData = {\r\n      caption: this.state.caption,\r\n      url: this.state.url,\r\n      scheduled_publish_time: this.state.scheduled_publish_time\r\n    }\r\n    const toast = window.toastr.info('ang ng bi...', 'Publish tool', {timeOut: 60000})\r\n    window.location.hash = '#/manage'\r\n    const { data } = await axios.post(`${Config.BACKEND}/publish?token=${token}`, postData)\r\n    window.toastr.clear(toast)\r\n    if (data.id) {\r\n      window.toastr.success(' ng bi thnh cng!', 'Publish tool')\r\n      if (window.markDocApproved) window.markDocApproved(idInDatabase)\r\n    } else {\r\n      window.toastr.error('Li: Khng th ng bi. ' + this.getErrorMessage(data), 'Publish tool', {timeOut: 20000})\r\n    }\r\n  }\r\n\r\n  _renderComposerCard() {\r\n    const imgStyle = {\r\n      height: '300px',\r\n      maxWidth: '100%',\r\n    }\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/manage'}>Tr v</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Son bi ng</b>\r\n          </p>\r\n          <center>\r\n            <Img alt=''\r\n              src={this.state.url}\r\n              style={imgStyle}\r\n              loader={<div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>}\r\n            />  \r\n          </center>\r\n          <TextField\r\n            label=\"Ni dung bi ng\"\r\n            multiline\r\n            rowsMax=\"20\"\r\n            value={this.state.caption}\r\n            onChange={event => {this.setState({ caption: event.target.value });}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          />\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderPublishCard() {\r\n    const { scheduled_publish_time, stat } = this.state\r\n    const isDateOK = (scheduled_publish_time - (Date.now() / 1000)) > 15*60\r\n    const s = scheduled_publish_time * 1000\r\n\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <TimeslotPicker\r\n            value={scheduled_publish_time}\r\n            statArr={stat}\r\n            onChange={(time) => this.setState({ scheduled_publish_time: time })}\r\n          />\r\n          <br/><br/>\r\n          {isDateOK && <Button variant='outlined' onClick={() => {\r\n            window.showAlert({\r\n              title: 'Xc nhn ng bi',\r\n              text: `ng bi vo lc ${Utils.getTimeStr(s)} ngy ${Utils.getDateStr(s)} ?`,\r\n              onClickOK: this.doPublish.bind(this),\r\n              showCancel: true\r\n            })\r\n          }}>ng bi</Button>}\r\n          {!isDateOK && scheduled_publish_time > 0\r\n            && <p style={{color: 'red'}}>Gi ng bi phi cch hin ti t nht 15 pht</p>\r\n          }\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderCompletedCard() {\r\n    const { scheduled_publish_time } = this.state\r\n    const s = scheduled_publish_time * 1000\r\n\r\n    return (\r\n      <div style={classes.cardStyle}>\r\n        <Card>\r\n          <CardContent>\r\n            <h2>ng bi thnh cng</h2>\r\n            <p>Bi vit  c t gi  ng vo lc {Utils.getTimeStr(s)} ngy {Utils.getDateStr(s)}</p>\r\n            <Button\r\n              variant='outlined'\r\n              onClick={() => window.location.hash = '#/'}>Tr v trang ch</Button>\r\n          </CardContent>\r\n        </Card>\r\n      <br/><br/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderInboxCard() {\r\n    const { inboxData } = this.state;\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          {!inboxData && <center><CircularProgress /></center>}\r\n          {inboxData && <>\r\n            <b>Tin nhn mi nht ( trn l mi, di l c)</b>\r\n            {'   '}\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => Utils.goToInbox(inboxData)}\r\n            >M inbox</Button>\r\n            <br/>\r\n            ------<br/>\r\n            {inboxData.messages.data.map(msg => <p key={msg.id}>\r\n              <b>{msg.from.name}</b>: {msg.message}\r\n            </p>)}\r\n          </>}\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderMain() {\r\n    return (\r\n      <div style={{margin: '20px'}}>\r\n        <ResponsiveMasonry\r\n          columnsCountBreakPoints={{350: 1, 750: 2, 900: 2}}\r\n        >\r\n          <Masonry gutter=\"10px\">\r\n            {this._renderComposerCard()}\r\n            <div></div> {/* this is to make sure inboxCard is on the right */}\r\n            {this._renderPublishCard()}\r\n            {this._renderInboxCard()}\r\n          </Masonry>\r\n        </ResponsiveMasonry>\r\n        <br/><br/><br/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>C li xy ra</h2>\r\n        Hy vo trang ch v th li<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    if (this.state.loading) return loading\r\n    if (this.state.completed) return this._renderCompletedCard()\r\n\r\n    return this.props.data ? this._renderMain() : this._renderError()\r\n  }\r\n}\r\n\r\nexport default Publish","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Utils from '../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport Img from 'react-image'\r\n\r\nconst imgStyle = {\r\n  maxHeight: '300px',\r\n  maxWidth: '100%',\r\n}\r\n\r\nconst imgLoaderStyle = {\r\n  height: '300px',\r\n  width: '100%',\r\n}\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nclass GetImage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      showGetToken: false,\r\n      access_token: '',\r\n      completed: false,\r\n      loading: true,\r\n      imgs: [],\r\n    }\r\n    if (props.data) {\r\n      this.state.caption = props.data.caption\r\n      this.state.fbusername = props.data.fbusername\r\n    } else {\r\n      this.state.error = 'Hy v trang ch v th li'\r\n    }\r\n    window.changeHeader('Chn nh bi ng - TongHopEvent')\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchFacebookApi()\r\n  }\r\n\r\n  async fetchFacebookApi() {\r\n    const fbtoken = Utils.getLocalStorage('fbtoken')\r\n    try {\r\n      const res = await axios.get(`https://graph.facebook.com/${this.state.fbusername}?fields=feed.limit(20)%7Bfull_picture%7D%2Cpicture.width(720)%7Burl%7D&access_token=${fbtoken}`)\r\n      if (res.data.error) {\r\n        this.setState({loading: false, showGetToken: true})\r\n      } else {\r\n        const imgs = res.data.feed.data.map(post => post.full_picture)\r\n        imgs.unshift(res.data.picture.data.url)\r\n        this.setState({\r\n          loading: false,\r\n          showGetToken: false,\r\n          imgs: imgs,\r\n        })\r\n      }\r\n    } catch (e) {\r\n      if (e.response.status === 404) {\r\n        this.setState({loading: false, error: 'Khng th m trang facebook ny'})\r\n      } else {\r\n        this.setState({loading: false, showGetToken: true})\r\n      }\r\n    }\r\n  }\r\n\r\n  onSaveToken() {\r\n    let fbtoken = this.state.access_token\r\n    fbtoken = fbtoken.match(/EA[a-zA-Z0-9]+/)\r\n    try {\r\n      Utils.setLocalStorage('fbtoken', fbtoken[0])\r\n      const urlNow = window.location.hash\r\n      window.location.hash = '#/reload'\r\n      setTimeout(() => { window.location.hash = urlNow }, 50)\r\n    } catch (e) {\r\n      window.alert('token khng hp l')\r\n    }\r\n  }\r\n\r\n  _renderTitleCard() {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/'}>Tr v</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Chn nh cho bi ng</b>\r\n          </p>\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderImageCard(url) {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <center>\r\n            <Img alt=''\r\n              src={url}\r\n              style={imgStyle}\r\n              loader={<div style={imgLoaderStyle}><center><br/><br/><CircularProgress /></center></div>}\r\n            />  \r\n          </center>\r\n          <Button\r\n              variant='outlined'\r\n              size='small'\r\n              style={{ float: 'right', margin: '10px' }}\r\n              onClick={() => {\r\n                const _data = JSON.parse(JSON.stringify(this.props.data))\r\n                _data.url = url\r\n                this.props.gotoPublish(_data, 'publish')\r\n              }}>Chn nh ny</Button>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderGetTokenCard() {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <p>\r\n            <Button\r\n              variant='outlined'\r\n              size='small'\r\n              onClick={() => window.location.hash = '#/'}\r\n            >Tr v</Button>\r\n            &nbsp;&nbsp;&nbsp;\r\n            <b>Ly token</b><br/>\r\n            <br/>\r\n            Bn cha c token hoc token  b ht hn. Hy lm theo hng dn ny  ly token: <a href=\"https://blog.ngxson.com/tonghopevent/#lay-token\" target=\"_blank\" rel=\"noopener noreferrer\">[Bm vo y]</a><br/>\r\n            Lu : token s c lu trn my ny. Bn c th ly token t my tnh  dng trn T.<br/>\r\n            in token ca bn vo  di y:<br/>\r\n          </p>\r\n          <TextField\r\n            multiline\r\n            rowsMax=\"5\"\r\n            value={this.state.access_token}\r\n            onChange={event => {this.setState({ access_token: event.target.value });}}\r\n            margin=\"normal\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n          /><br/>\r\n          <Button\r\n            variant='outlined'\r\n            onClick={this.onSaveToken.bind(this)}\r\n          >Tip tc</Button>\r\n        </CardContent>        \r\n      </Card>\r\n    )\r\n  }\r\n\r\n  _renderMain() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.showGetToken &&\r\n          <div style={classes.cardStyle}>\r\n            {this._renderGetTokenCard()}\r\n          </div>\r\n        }\r\n        {!this.state.showGetToken &&\r\n          <div style={classes.cardStyle}>\r\n            {this._renderTitleCard()}\r\n          </div>\r\n        }\r\n        {!this.state.showGetToken &&\r\n          this.state.imgs.map((url, i) =>\r\n            <div style={classes.cardStyle} key={i}>\r\n              {this._renderImageCard(url)}\r\n            </div>\r\n          )\r\n        }\r\n        <br />\r\n        <br />\r\n      </React.Fragment>\r\n    )\r\n  }\r\n\r\n  _renderError() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        <h2>C li xy ra</h2>\r\n        {this.state.error}<br/><br/>\r\n        <Button\r\n          variant='outlined'\r\n          size='small'\r\n          onClick={() => window.location.hash = '#/'}\r\n        >Tr v</Button>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const loading = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    if (this.state.loading) return loading\r\n    if (this.state.error) return this._renderError()\r\n\r\n    return this._renderMain()\r\n  }\r\n}\r\n\r\nexport default GetImage","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nclass Alert extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      open: false,\r\n      onClickOK: null\r\n    }\r\n    window.showAlert = this.show.bind(this)\r\n  }\r\n\r\n  show(data) {\r\n    this.setState({\r\n      open: true,\r\n      title: data.title,\r\n      text: data.text,\r\n      onClickOK: data.onClickOK || null,\r\n      showCancel: data.showCancel\r\n    })\r\n  }\r\n\r\n  handleClickOK = () => {\r\n    if (this.state.onClickOK) {\r\n      this.state.onClickOK();\r\n      this.setState({ onClickOK: null });\r\n    }\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  handleCancel = () => {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleCancel}\r\n          aria-labelledby=\"alert-dialog-title\"\r\n          aria-describedby=\"alert-dialog-description\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">{this.state.title}</DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n              {this.state.text}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleClickOK.bind(this)} color=\"primary\" autoFocus>OK</Button>\r\n            {this.state.showCancel\r\n              ? <Button onClick={this.handleCancel.bind(this)} color=\"primary\" autoFocus>Cancel</Button>\r\n              : null}\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Alert;","import React from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Config from '../Config'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Button from '@material-ui/core/Button'\r\nimport PropTypes from 'prop-types'\r\nimport Utils from '../Utils'\r\n\r\nclass FBPostEditDialog extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    console.log(props.post)\r\n    this.state = {\r\n      title: props.post.message.split('\\n')[0] || '',\r\n      message: props.post.message,\r\n      loading: false,\r\n    }\r\n  }\r\n\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    post: PropTypes.any.isRequired,\r\n    editPostEndpoint: PropTypes.string.isRequired,\r\n  }\r\n\r\n  onEditPost = async () => {\r\n    const { message } = this.state\r\n    const { post, onClose } = this.props\r\n    this.setState({ loading: true })\r\n    const token = Utils.getLocalStorage('token')\r\n    await axios.patch(`${this.props.editPostEndpoint}/${post.id}?token=${token}`, {\r\n      message: message\r\n    })\r\n    onClose(true);\r\n  }\r\n\r\n  render() {\r\n    const { title, message, loading } = this.state\r\n    const { post, onClose } = this.props\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Dialog fullWidth={true} open={true} onClose={() => onClose(false)} aria-labelledby=\"form-dialog-title\">\r\n          {loading ? <center><br/><br/><CircularProgress /><br/><br/></center> : <>\r\n            <DialogTitle id=\"form-dialog-title\">Sa bi vit</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText>\r\n                Bi vit: {title}<br/>\r\n                ng lc: {Utils.getTimeStr(post.time)} ngy {Utils.getDateStr(post.time)}\r\n              </DialogContentText>\r\n              <TextField\r\n                multiline\r\n                rowsMax=\"20\"\r\n                value={message}\r\n                onChange={event => {this.setState({ message: event.target.value })}}\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n                fullWidth\r\n              />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={() => onClose(false)} color=\"primary\">\r\n                Quay li\r\n              </Button>\r\n              <Button onClick={this.onEditPost} color=\"primary\">\r\n                LU POST\r\n              </Button>\r\n            </DialogActions>\r\n          </>}\r\n        </Dialog>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FBPostEditDialog\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport axios from 'axios'\r\nimport Img from 'react-image'\r\nimport Utils from '../../Utils'\r\nimport Card from '@material-ui/core/Card'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Button from '@material-ui/core/Button'\r\nimport FBPostEditDialog from '../../components/FBPostEditDialog'\r\n\r\nconst classes = {\r\n  cardStyle: {\r\n    maxWidth: '800px',\r\n    marginTop: '20px',\r\n    marginRight: 'auto',\r\n    marginLeft: 'auto',\r\n  }\r\n}\r\n\r\nconst imgStyle = {\r\n  height: '300px',\r\n  maxWidth: '100%',\r\n}\r\n\r\nconst ImgLoader = () => <div style={imgStyle}><center><br/><br/><CircularProgress /></center></div>\r\n\r\nclass PostList extends React.Component {\r\n  constructor(props) {\r\n    super()\r\n    this.props = props\r\n    this.state = {\r\n      loading: true,\r\n      posts: [],\r\n      editingPost: null,\r\n    }\r\n    window.changeHeader('Bi  ln lch - TongHopEvent')\r\n  }\r\n\r\n  static propTypes = {\r\n    loadFeedEndpoint: PropTypes.string.isRequired,\r\n    editPostEndpoint: PropTypes.string.isRequired,\r\n    deletePostEndpoint: PropTypes.string.isRequired,\r\n    timeFieldName: PropTypes.string.isRequired,\r\n    newestFirst: PropTypes.bool,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadData()\r\n  }\r\n\r\n  async loadData() {\r\n    const { newestFirst } = this.props;\r\n    this.setState({loading: true, editingPost: null})\r\n    const token = Utils.getLocalStorage('token')\r\n    const res = await axios.get(`${this.props.loadFeedEndpoint}?token=${token}`)\r\n    if (res.data.error)\r\n      this.setState({loading: false, posts: []})\r\n    else {\r\n      const arr = newestFirst ? res.data : res.data.reverse()\r\n      this.setState({loading: false, posts: this.processTimeField(arr) })\r\n    }\r\n  }\r\n\r\n  processTimeField = (data) => {\r\n    if (this.props.timeFieldName === 'created_time') {\r\n      return data.map(p => ({\r\n        ...p,\r\n        created_time: (new Date(p.created_time)).getTime() / 1000,\r\n      }))\r\n    } else {\r\n      return data\r\n    }\r\n  }\r\n\r\n  deletePost = (post) => async () => {\r\n    if (window.confirm('Bn c chc chn xa?')) {\r\n      this.setState({loading: true})\r\n      const token = Utils.getLocalStorage('token')\r\n      await axios.delete(`${this.props.deletePostEndpoint}/${post.id}?token=${token}`)\r\n      this.loadData()\r\n    }\r\n  }\r\n\r\n  onEditDialogClose = (shouldReload) => {\r\n    if (shouldReload) {\r\n      this.loadData()\r\n    } else {\r\n      this.setState({editingPost: null})\r\n    }\r\n  }\r\n\r\n  _renderMainView() {\r\n    const { timeFieldName } = this.props;\r\n\r\n    return this.state.posts.map((post, i) => (\r\n      <div style={classes.cardStyle} key={post.id}>\r\n        <Card>\r\n          <CardContent>\r\n            <p><b>{Utils.getTimeStr(post[timeFieldName] * 1000)} ngy {Utils.getDateStr(post[timeFieldName] * 1000)}</b></p>\r\n            <Img alt=''\r\n              src={post.full_picture}\r\n              style={imgStyle}\r\n              loader={<ImgLoader />}\r\n            />  \r\n            <p>\r\n              {Utils.nl2br(post.expanded ? post.message : post.message.substring(0, 250))}\r\n              <br/>\r\n              <a href=\"#\" onClick={(e) => {\r\n                e.preventDefault()\r\n                this.setState({posts: this.state.posts.map((p, j) => {\r\n                  const cloned = JSON.parse(JSON.stringify(p))\r\n                  if (i === j) cloned.expanded = !cloned.expanded\r\n                  return cloned\r\n                })})\r\n              }}>{post.expanded ? 'Thu gn' : '... c thm'}</a><br/>\r\n            </p>\r\n            <p>\r\n              <Button color=\"primary\" variant=\"outlined\" onClick={this.deletePost(post)}>Xa</Button>\r\n              &nbsp;&nbsp;\r\n              <Button color=\"primary\" variant=\"outlined\" onClick={() => this.setState({ editingPost: post })}>Sa</Button>\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    ))\r\n  }\r\n\r\n  _renderDocNotFound() {\r\n    return (\r\n      <center>\r\n        <br/><br/>\r\n        (Khng c d liu)<br/>\r\n        <br/><br/>\r\n      </center>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const { editingPost, loading, posts } = this.state\r\n\r\n    const loadingComponent = <div>\r\n      <br/><br/><br/>\r\n      <center><CircularProgress /></center>\r\n    </div>\r\n\r\n    return <>\r\n      {editingPost && <FBPostEditDialog\r\n        post={editingPost}\r\n        onClose={this.onEditDialogClose}\r\n        editPostEndpoint={this.props.editPostEndpoint}\r\n      />}\r\n      {loading ? loadingComponent : \r\n        posts.length > 0 ? this._renderMainView() : this._renderDocNotFound()\r\n      }\r\n    </>\r\n  }\r\n}\r\n\r\nexport default PostList","import React from 'react'\r\nimport PostList from './PostList'\r\nimport Config from '../../Config'\r\n\r\nconst Scheduled = () => {\r\n  return <PostList\r\n    loadFeedEndpoint={`${Config.BACKEND}/publish/scheduled`}\r\n    editPostEndpoint={`${Config.BACKEND}/publish/post`}\r\n    deletePostEndpoint={`${Config.BACKEND}/publish/post`}\r\n    timeFieldName=\"scheduled_publish_time\"\r\n    newestFirst={false}\r\n  />\r\n}\r\n\r\nexport default Scheduled","import React from 'react'\r\nimport PostList from './PostList'\r\nimport Config from '../../Config'\r\n\r\nconst FBFeed = () => {\r\n  return <PostList\r\n    loadFeedEndpoint={`${Config.BACKEND}/fbfeed`}\r\n    editPostEndpoint={`${Config.BACKEND}/fbfeed`}\r\n    deletePostEndpoint={`${Config.BACKEND}/fbfeed`}\r\n    timeFieldName=\"created_time\"\r\n    newestFirst={true}\r\n  />\r\n}\r\n\r\nexport default FBFeed","import { io } from 'socket.io-client';\r\nimport Utils from '../../Utils';\r\nimport Config from '../../Config';\r\n\r\nclass Socket {\r\n  static socket = null;\r\n  static getSocket() {\r\n    if (!Config.SOCKETIO) return null;\r\n    if (!Socket.socket) {\r\n      Socket.socket = io(Config.SOCKETIO, {\r\n        transports: ['websocket'],\r\n        query: `module=${Config.SOCKETIO_MODULE}&token=${Utils.getToken()}`,\r\n      });\r\n      Socket.socket.on('connect', () => console.log('connected'));\r\n    }\r\n    return Socket.socket;\r\n  }\r\n\r\n  static subscribeInbox(handler) {\r\n    const socket = Socket.getSocket();\r\n    if (socket) socket.on('inbox', handler);\r\n  }\r\n\r\n  static unsubscribeInbox(handler) {\r\n    const socket = Socket.getSocket();\r\n    if (socket) socket.offAny(handler);\r\n  }\r\n}\r\n\r\nexport default Socket;","import React from 'react';\r\nimport { makeRequest } from '../../Utils';\r\nimport Socket from './socket';\r\nimport Config from '../../Config';\r\n\r\nexport const MessengerContext = React.createContext();\r\n\r\nexport class MessengerContextProvider extends React.Component {\r\n  state = {\r\n    unreadMark: {},\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (Config.INBOX_UNREAD_ABILITY) {\r\n      this.fetchUnread();\r\n    }\r\n  }\r\n\r\n  fetchUnread = async () => {\r\n    const res = await makeRequest('get', '/inbox/unread');\r\n    const unreadMark = {};\r\n    for (const { id } of res) {\r\n      unreadMark[id] = true;\r\n    }\r\n    this.setState({ unreadMark });\r\n  }\r\n\r\n  markUnread = (psid) => {\r\n    Socket.getSocket().emit('mark_unread', psid);\r\n    const unreadMark = {...this.state.unreadMark};\r\n    unreadMark[psid] = true;\r\n    this.setState({ unreadMark });\r\n  }\r\n\r\n  markRead = (psid) => {\r\n    Socket.getSocket().emit('mark_read', psid);\r\n    const unreadMark = {...this.state.unreadMark};\r\n    delete unreadMark[psid];\r\n    this.setState({ unreadMark });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <MessengerContext.Provider value={{\r\n        unreadMark: this.state.unreadMark,\r\n        markUnread: this.markUnread,\r\n        markRead: this.markRead,\r\n      }}>\r\n        {this.props.children}\r\n      </MessengerContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport function withMessengerContext(Component) {\r\n  return function HOC(props) {\r\n    return (\r\n      <MessengerContext.Consumer>\r\n        {(contexts) => <Component {...props} {...contexts} />}\r\n      </MessengerContext.Consumer>\r\n    )\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {\r\n  ConversationList,\r\n  Conversation,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { removeVietnameseTones, mergeNewConversations, getTargetId } from './utils';\r\nimport { makeRequest } from '../../Utils';\r\nimport Socket from './socket';\r\nimport Config from '../../Config';\r\nimport { withMessengerContext } from './Context';\r\n\r\nclass Conversations extends React.Component {\r\n  state = {\r\n    ready: false,\r\n    loading: false,\r\n    conversations: [],\r\n    next: null,\r\n  };\r\n\r\n  openConversation = (id, name) => () => {\r\n    const n = removeVietnameseTones(name.toLowerCase()).replace(/[^a-z0-9]+/g, '-');\r\n    window.location.hash = `#/msg/${id}/${n}`;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadMoreConversations();\r\n    Socket.subscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  inboxUpdateHandler = async (ev) => {\r\n    const { data: newArr } = await makeRequest('get', '/inbox/conversations', {limit: 5});\r\n    this.setState((prevState) => ({\r\n      conversations: mergeNewConversations(prevState.conversations, newArr),\r\n    }));\r\n  }\r\n\r\n  async loadMoreConversations() {\r\n    if (!this.state.loading) {\r\n      this.setState({ loading: true });\r\n\r\n      const qs = {};\r\n      if (this.state.next) qs.after = this.state.next;\r\n      let { data, paging } = await makeRequest('get', '/inbox/conversations', qs);\r\n\r\n      if (process.env.REACT_APP_MODE === 'production') {\r\n        data = data.filter(c => c.id !== Config.INBOX_IGNORED_CONVERSATION);\r\n      }\r\n\r\n      if (data) this.setState({\r\n        conversations: [...this.state.conversations, ...data],\r\n        loading: false,\r\n        ready: true,\r\n        next: (paging?.next) ? (paging?.cursors?.after) : null,\r\n      });\r\n    }\r\n  }\r\n\r\n  onYReachEnd = () => {\r\n    if (this.state.next && !this.state.loading) {\r\n      this.loadMoreConversations();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { unreadMark } = this.props;\r\n\r\n    return (\r\n      <ConversationList\r\n        loading={!this.state.ready}\r\n        loadingMore={this.state.ready && this.state.loading}\r\n        onYReachEnd={this.onYReachEnd}\r\n      >\r\n        {this.state.conversations.map(conv => {\r\n          const name = conv.senders.data[0].name;\r\n          const psid = getTargetId(conv);\r\n          return (\r\n            <Conversation\r\n              key={conv.id}\r\n              name={`${name} (${conv.message_count})`}\r\n              info={conv.snippet}\r\n              onClick={this.openConversation(conv.id, name)}\r\n              active={this.props.tid === conv.id}\r\n              unreadDot={!!unreadMark[psid]}\r\n            ></Conversation>\r\n          );\r\n        })}\r\n      </ConversationList>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withMessengerContext(Conversations);","import React from 'react';\r\nimport {\r\n  ConversationHeader,\r\n  Avatar,\r\n  InfoButton,\r\n  Button,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { withMessengerContext } from './Context';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faEnvelope } from \"@fortawesome/free-solid-svg-icons/faEnvelope\";\r\nimport { faEnvelopeOpenText } from \"@fortawesome/free-solid-svg-icons/faEnvelopeOpenText\";\r\nimport Config from '../../Config';\r\n\r\nconst MarkButton = withMessengerContext(({psid, unreadMark, markRead, markUnread}) => {\r\n  const btnClick = () => {\r\n    if (unreadMark[psid]) {\r\n      markRead(psid);\r\n    } else {\r\n      markUnread(psid);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      className={'cs-button cs-button--info'}\r\n      style={{marginRight: '20px'}}\r\n      icon={<FontAwesomeIcon icon={unreadMark[psid] ? faEnvelopeOpenText : faEnvelope} />}\r\n      onClick={btnClick}\r\n    ></Button>\r\n  );\r\n});\r\n\r\nconst Header = ({loading, profile, openConversationOnFB, openMainMenu, psid}) => {\r\n  return loading\r\n    ? (\r\n      <ConversationHeader>\r\n        <ConversationHeader.Back onClick={openMainMenu} />\r\n        <ConversationHeader.Content userName=\"Loading...\" />        \r\n      </ConversationHeader>\r\n    ) : (\r\n      <ConversationHeader>\r\n        <ConversationHeader.Back onClick={openMainMenu} />\r\n        <Avatar\r\n          src={profile.profile_pic}\r\n          name={profile.name}\r\n          onClick={openConversationOnFB}\r\n        />\r\n        <ConversationHeader.Content userName={profile.name} />\r\n        <ConversationHeader.Actions>\r\n          {Config.INBOX_UNREAD_ABILITY && (\r\n            <MarkButton\r\n              as=\"InfoButton\"\r\n              psid={psid}\r\n            />\r\n          )}\r\n          <InfoButton onClick={openConversationOnFB} />\r\n        </ConversationHeader.Actions>          \r\n      </ConversationHeader>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport {\r\n  MessageList,\r\n  ChatContainer,\r\n  Message,\r\n  MessageInput,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { makeRequest } from '../../Utils';\r\nimport { getMessageDirection, getTargetId, mergeNewMessages } from './utils';\r\nimport TimeAgo from 'javascript-time-ago';\r\nimport en from 'javascript-time-ago/locale/en';\r\nimport Socket from './socket';\r\nimport Config from '../../Config';\r\nimport './styles.css';\r\nimport Header from './Header';\r\nimport { withMessengerContext } from './Context';\r\n\r\nTimeAgo.addLocale(en);\r\nconst timeAgo = new TimeAgo('en-US');\r\n\r\nclass MessageView extends React.Component {\r\n  state = {\r\n    loading: true,\r\n    loadingMore: false,\r\n    psid: null,\r\n    profile: {},\r\n    threadInfo: {},\r\n    messages: [],\r\n    messageAfter: null,\r\n    messagePending: null,\r\n    messagePendingId: null,\r\n    input: '',\r\n  }\r\n  originalTitle = document.title;\r\n\r\n  componentDidMount() {\r\n    this.fetchConversation(this.props.tid);\r\n    Socket.subscribeInbox(this.inboxUpdateHandler);\r\n    window.setMessageInput = (input) => this.setState({ input });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.tid !== this.props.tid) {\r\n      this.fetchConversation(this.props.tid);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.title = this.originalTitle;\r\n    Socket.unsubscribeInbox(this.inboxUpdateHandler);\r\n  }\r\n\r\n  inboxUpdateHandler = async (ev) => {\r\n    const { psid, messagePendingId } = this.state;\r\n    const tid = this.props.tid;\r\n    if (getTargetId(ev) === psid) {\r\n      const { data: newMessages } = await makeRequest('get', '/inbox/thread/messages', {tid, limit: 5});\r\n      this.setState((prevState) => ({\r\n        messages: mergeNewMessages(prevState.messages, newMessages),\r\n      }));\r\n    }\r\n    if (ev.message?.mid === messagePendingId) {\r\n      this.setState({ messagePending: null, messagePendingId: null });\r\n    }\r\n  }\r\n\r\n  async fetchConversation(tid) {\r\n    document.title = Config.INBOX_TITLE;\r\n    this.setState({ loading: true });\r\n    const [threadInfo, messages] = await Promise.all([\r\n      makeRequest('get', '/inbox/thread/info', {tid}),\r\n      makeRequest('get', '/inbox/thread/messages', {tid}),\r\n    ]);\r\n    messages.data = messages.data.reverse();\r\n    const psid = threadInfo.senders.data[0].id;\r\n    const profile = await makeRequest('get', '/inbox/profile', { psid });\r\n    this.setState({\r\n      threadInfo,\r\n      psid,\r\n      profile,\r\n      messages: messages.data,\r\n      messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\r\n      loading: false,\r\n    });\r\n    document.title = `${profile.name} - ${Config.INBOX_TITLE}`;\r\n  }\r\n\r\n  onYReachStart = async () => {\r\n    const {messageAfter, loadingMore} = this.state;\r\n    if (messageAfter && !loadingMore) {\r\n      this.setState({ loadingMore: true });\r\n      const messages = await makeRequest('get', '/inbox/thread/messages', {\r\n        tid: this.props.tid,\r\n        after: messageAfter,\r\n      });\r\n      this.setState((prevState) => {\r\n        const newMsgArr = messages.data.reverse().concat(prevState.messages);\r\n        return {\r\n          messages: newMsgArr,\r\n          messageAfter: (messages.paging?.next) ? (messages.paging?.cursors?.after) : null,\r\n          loadingMore: false,\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  openConversationOnFB = () => {\r\n    window.open(`https://fb.com${this.state.threadInfo.link}`, '_blank');\r\n  }\r\n\r\n  openInNewTab = (url) => () => {\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openMainMenu = () => {\r\n    const { goBackTo } = this.props;\r\n    window.location.hash = goBackTo || '#/msg';\r\n  }\r\n\r\n  _renderMessages() {\r\n    const {loading, messages, messagePending, loadingMore} = this.state;\r\n    if (loading) return <MessageList loading/>\r\n\r\n    let lastDirection = '';\r\n    const showTimeHeader = (msg) => {\r\n      const direction = getMessageDirection(msg);\r\n      if (lastDirection !== direction) {\r\n        lastDirection = direction;\r\n        return <Message.Footer sender={timeAgo.format(new Date(msg.created_time))} />\r\n      } else {\r\n        return null;\r\n      }\r\n    };\r\n\r\n    const showTextMsg = (msg) => <Message key={msg.id} model={{\r\n      message: msg.message,\r\n      sentTime: timeAgo.format(new Date(msg.created_time)),\r\n      sender: msg.from.name,\r\n      direction: getMessageDirection(msg),\r\n      position: 'single',\r\n    }}>\r\n      {showTimeHeader(msg)}\r\n    </Message>\r\n\r\n    const getImages = (msg) => (msg.attachments?.data || [])\r\n      .filter(a => !!a.image_data)\r\n      .map(a => a.image_data);\r\n\r\n    const showImages = (msg, images) => images.map((img, i) => (\r\n      <Message key={msg.id + i} type=\"image\" model={{\r\n        direction: getMessageDirection(msg),\r\n        type: 'custom',\r\n      }}>\r\n        {showTimeHeader(msg)}\r\n        <Message.CustomContent>\r\n          <img src={img.preview_url} alt=\"\" onClick={this.openInNewTab(img.url)} style={{width: '200px'}}></img>\r\n        </Message.CustomContent>\r\n      </Message>\r\n    ));\r\n\r\n    const showPendingMsg = () => <Message model={{\r\n      message: messagePending,\r\n      sender: Config.INBOX_TITLE,\r\n      direction: 'outgoing',\r\n      position: 'single',\r\n    }} className=\"pending\" />\r\n\r\n    return (\r\n      <MessageList loadingMore={loadingMore} onYReachStart={this.onYReachStart}>\r\n        {messages.map(msg => {\r\n          const images = getImages(msg);\r\n          if (images.length > 0) {\r\n            return <>\r\n              {showImages(msg, images)}\r\n            </>\r\n          } else {\r\n            return showTextMsg(msg);\r\n          }\r\n        })}\r\n        {messagePending && showPendingMsg()}\r\n        {!Config.INBOX_SEND_ABILITY && // add margin bottom\r\n          <Message style={{ marginBottom: '2em', opacity: '0' }} />\r\n        }\r\n      </MessageList>\r\n    );\r\n  }\r\n\r\n  handleInputChange = (_, v, innerText) => this.setState({ input: innerText });\r\n  handleSendMessage = async () => {\r\n    const { psid, input } = this.state;\r\n    const { markRead } = this.props;\r\n    const messagePending = input.trim();\r\n    this.setState({ messagePending, input: '' });\r\n    try {\r\n      const { message_id } = await makeRequest('post', '/inbox/messages', {}, {\r\n        messaging_type: 'MESSAGE_TAG',\r\n        tag: 'HUMAN_AGENT',\r\n        recipient: { id: psid },\r\n        message: { text: messagePending },\r\n      });\r\n      markRead(psid);\r\n      this.setState({ messagePendingId: message_id });\r\n    } catch (e) {\r\n      this.setState({ messagePending: null, input: messagePending });\r\n      window.alert(JSON.stringify(e.response.data));\r\n    }\r\n  };\r\n  _renderInput() {\r\n    const { input, messagePending } = this.state;\r\n    return <MessageInput\r\n      value={input.replace(/\\n/g, '<br>')}\r\n      onChange={this.handleInputChange}\r\n      onSend={this.handleSendMessage}\r\n      disabled={!!messagePending}\r\n      sendDisabled={!!messagePending && input.length > 0}\r\n      sendOnReturnDisabled={true}\r\n      onAttachClick={window.openTemplateDialog}\r\n      placeholder=\"Type here...\"\r\n    />\r\n  }\r\n\r\n  render() {\r\n    const { loading, profile, psid } = this.state;\r\n    return (\r\n      <ChatContainer>\r\n        <Header\r\n          as=\"ConversationHeader\"\r\n          loading={loading}\r\n          profile={profile}\r\n          psid={psid}\r\n          openConversationOnFB={this.openConversationOnFB}\r\n          openMainMenu={this.openMainMenu}\r\n        />\r\n        {this._renderMessages()}\r\n        {Config.INBOX_SEND_ABILITY && this._renderInput()}\r\n      </ChatContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withMessengerContext(MessageView);","import React from 'react';\r\nimport Conversations from './Conversations';\r\nimport MessageView from './MessageView';\r\nimport Config from '../../Config';\r\nimport { HashRouter, Route, withRouter } from 'react-router-dom';\r\nimport \"@chatscope/chat-ui-kit-styles/dist/default/styles.min.css\";\r\nimport {\r\n  MainContainer,\r\n  Sidebar,\r\n  ChatContainer,\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { MessengerContextProvider } from './Context';\r\n\r\nclass Messenger extends React.Component {\r\n  state = { tid: null, viewHeight: '100vh' };\r\n\r\n  updateHeight = () => {\r\n    if (window.NUI_VIEW_HEIGHT && this.state.viewHeight !== window.NUI_VIEW_HEIGHT) {\r\n      this.setState({ viewHeight: window.NUI_VIEW_HEIGHT });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.intervalId = setInterval(this.updateHeight, 1000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.intervalId);\r\n  }\r\n\r\n  MessageView = () => {\r\n    const { tid, viewHeight } = this.state;\r\n    const { goBackTo } = this.props;\r\n    return <div style={{ position: \"relative\", height: viewHeight }} className={!tid ? 'home' : 'chat'}>\r\n      <MainContainer>\r\n        <Sidebar position=\"left\" scrollable={true}>\r\n          <Conversations tid={tid} />\r\n        </Sidebar>\r\n        {tid\r\n          ? <MessageView tid={tid} goBackTo={goBackTo} />\r\n          : <ChatContainer />\r\n        }\r\n      </MainContainer>\r\n      <Config.CustomMessengerWidget />\r\n    </div>;\r\n  }\r\n\r\n  MessageTidChanged = ({match}) => {\r\n    if (match.params.tid !== this.state.tid)\r\n      this.setState({ tid: match.params.tid });\r\n    return null;\r\n  }\r\n\r\n  MessageTidReset = () => {\r\n    if (this.state.tid !== null)\r\n      this.setState({ tid: null });\r\n    return null;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <HashRouter>\r\n        <MessengerContextProvider>\r\n          <Route path=\"/msg\" component={this.MessageView} />\r\n          <Route exact path=\"/msg\" component={this.MessageTidReset} />\r\n          <Route exact path=\"/msg/:tid/:name\" component={this.MessageTidChanged} />\r\n        </MessengerContextProvider>\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Messenger);","import Messenger from './Messenger';\r\n\r\nexport default Messenger;","import { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst drawerWidth = 240;\r\n\r\nexport const useSidebarStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px) !important`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerClose: {\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: 0,\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9) + 1,\r\n    },\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n  },\r\n}));","import React from 'react';\r\nimport {\r\n  Forum,\r\n  Receipt,\r\n  EventAvailable,\r\n  Help,\r\n  CheckCircle,\r\n  ExitToApp,\r\n  ListAlt,\r\n} from '@material-ui/icons';\r\n\r\nexport const SidebarItems = [\r\n  { list: [\r\n    {\r\n      title: 'Inbox',\r\n      href: '#/msg',\r\n      icon: <Forum />,\r\n    },\r\n    {\r\n      title: 'Qun l',\r\n      href: '#/manage',\r\n      icon: <Receipt />,\r\n    },\r\n    {\r\n      title: 'Bi  ln lch',\r\n      href: '#/scheduled',\r\n      icon: <EventAvailable />,\r\n    },\r\n    {\r\n      title: 'Bi  ng',\r\n      href: '#/fbfeed',\r\n      icon: <ListAlt />,\r\n    }\r\n  ] },\r\n  { separator: true },\r\n  { list: [\r\n    {\r\n      title: 'Hng dn',\r\n      href: 'https://blog.ngxson.com/tonghopevent/',\r\n      icon: <Help />,\r\n    },\r\n    {\r\n      title: 'iu khon s dng',\r\n      href: 'https://sites.google.com/view/tonghopevent/',\r\n      icon: <CheckCircle />,\r\n    }\r\n  ] },\r\n  { separator: true },\r\n  { list: [\r\n    {\r\n      title: 'ng xut',\r\n      href: '#/logout',\r\n      icon: <ExitToApp />,\r\n    }\r\n  ] },\r\n  { list: [\r\n    {\r\n      title: 'Tng hp cc d n v cuc thi',\r\n      href: '#/',\r\n      icon: null,\r\n    },\r\n    {\r\n      title: 'ng bi (Ly nh)',\r\n      href: '#/getimage',\r\n      icon: null,\r\n    },\r\n    {\r\n      title: 'ng bi',\r\n      href: '#/publish',\r\n      icon: null,\r\n    },\r\n    {\r\n      title: 'Xem bi vit',\r\n      href: '#/view',\r\n      icon: null,\r\n    }\r\n  ], hidden: true }\r\n];\r\n\r\nexport const getCurrentMenuItem = (currentHash) => {\r\n  for (const { list } of SidebarItems) {\r\n    if (!list) continue;\r\n    for (const item of list) {\r\n      if (currentHash.startsWith(item.href)) return item;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport { useSidebarStyles } from './styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { getCurrentMenuItem, SidebarItems } from './SidebarItems';\r\nimport { withRouter } from 'react-router';\r\n\r\nfunction Sidebar({children, location: {pathname}}) {\r\n  const classes = useSidebarStyles();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = React.useState(false);\r\n  const currentMenuItem = getCurrentMenuItem('#' + pathname);\r\n  const isPublicView = pathname.match(/\\/(view\\/|login)/);\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleClickItem = (item) => () => {\r\n    const { href } = item;\r\n    if (href.startsWith('http')) {\r\n      window.open(href, '_blank').focus(); // open in new tab\r\n    } else {\r\n      window.location.href = href;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <AppBar\r\n        position=\"fixed\"\r\n        style={{ zIndex: open ? 80 : 100 }}\r\n        className={`${classes.appBar} ${open ? classes.appBarShift : ''}`}\r\n      >\r\n        <Toolbar>\r\n          {!isPublicView && <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}\r\n            edge=\"start\"\r\n            className={`${classes.menuButton} ${open ? classes.hide : ''}`}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>}\r\n          <Typography variant=\"h6\" noWrap>\r\n            {currentMenuItem.title}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer\r\n        style={{ zIndex: 90 }}\r\n        variant={isPublicView ? 'temporary' : 'permanent'}\r\n        className={`${classes.drawer} ${open ? classes.drawerOpen : classes.drawerClose}`}\r\n        classes={{\r\n          paper: open ? classes.drawerOpen : classes.drawerClose,\r\n        }}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        {SidebarItems.map((obj, i) => {\r\n          if (obj.list && !obj.hidden) {\r\n            return <List key={i}>\r\n              {obj.list.map((item, j) => (\r\n                <ListItem\r\n                  button\r\n                  selected={currentMenuItem.href === item.href}\r\n                  onClick={handleClickItem(item)} key={j}\r\n                >\r\n                  <ListItemIcon>{item.icon}</ListItemIcon>\r\n                  <ListItemText primary={item.title} />\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          } else if (obj.separator) {\r\n            return <Divider key={i} />;\r\n          }\r\n        })}\r\n      </Drawer>\r\n      <main className={classes.content}>\r\n        <div className={classes.toolbar} />\r\n        {children}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(Sidebar);","import React, { useEffect, useRef } from 'react';\r\n\r\nconst updateViewportSize = (div) => {\r\n  window.NUI_VIEW_HEIGHT = div.clientHeight - 64;\r\n  window.NUI_VIEW_WIDTH = div.clientWidth;\r\n};\r\n\r\nconst Measure = () => {\r\n  const elem = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (elem && elem.current) {\r\n      setInterval(() => {\r\n        updateViewportSize(elem.current);\r\n      }, 1000);\r\n    }\r\n  }, [elem]);\r\n\r\n  return (\r\n    <div ref={elem} style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      height: '100%',\r\n      width: '100%',\r\n      pointerEvents: 'none',\r\n      //border: '2px solid red',\r\n      zIndex: 1000,\r\n    }}></div>\r\n  );\r\n}\r\n\r\nexport default Measure;","import React from 'react';\r\nimport Theme from './Theme';\r\nimport LoginLayout from './layouts/Login';\r\nimport HomeLayout from './layouts/Home';\r\nimport ViewLayout from './layouts/View';\r\nimport PublishLayout from './layouts/Publish';\r\nimport GetImageLayout from './layouts/GetImage';\r\nimport './App.css';\r\nimport './bootstrap.css';\r\nimport { HashRouter, Route, Switch } from 'react-router-dom';\r\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\r\nimport Alert from './components/Alert';\r\nimport Scheduled from './layouts/fb/Scheduled';\r\nimport FBFeed from './layouts/fb/FBFeed';\r\nimport Messenger from './components/messenger';\r\nimport Sidebar from './components/sidebar/Sidebar';\r\nimport Measure from './components/Measure';\r\nimport Config from './Config';\r\nimport Utils from './Utils';\r\n\r\nclass Main extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      header: 'Home',\r\n      publishData: null,\r\n    }\r\n  }\r\n\r\n  changeHeader(header) {\r\n    if (this.state.header === header) return\r\n    else this.setState({header})\r\n  }\r\n\r\n  gotoPublish(data, publishAction) {\r\n    this.setState({publishData: data})\r\n    window.location.hash = '#/' + publishAction\r\n  }\r\n\r\n  Login = () => {\r\n    return <LoginLayout />\r\n  }\r\n\r\n  Scheduled = () => {\r\n    return <Scheduled />\r\n  }\r\n\r\n  FBFeed = () => {\r\n    return <FBFeed />\r\n  }\r\n\r\n  Home = () => {\r\n    return <HomeLayout\r\n      gotoPublish={this.gotoPublish.bind(this)}\r\n    />\r\n  }\r\n\r\n  View = ({match}) => {\r\n    return <ViewLayout\r\n      id={match.params.id}\r\n    />\r\n  }\r\n\r\n  Publish = () => {\r\n    return <PublishLayout\r\n      data={this.state.publishData}\r\n    />\r\n  }\r\n\r\n  GetImage = () => {\r\n    return <GetImageLayout\r\n      data={this.state.publishData}\r\n      gotoPublish={this.gotoPublish.bind(this)}\r\n    />\r\n  }\r\n\r\n  Copyright = () => {\r\n    return <center>\r\n      <br/><br/>\r\n      Developed by&nbsp;\r\n      <b><a href=\"https://ngxson.com\" target=\"_blank\" rel=\"noopener noreferrer\">Nui</a></b><br/>\r\n      Version {Config.VERSION}\r\n      <br/><br/>\r\n    </center>\r\n  }\r\n\r\n  Logout = () => {\r\n    Utils.removeLocalStorage('token')\r\n    window.location.href = '#/'\r\n    window.location.reload()\r\n    return null\r\n  }\r\n\r\n  render() {\r\n    window.changeHeader = this.changeHeader.bind(this)\r\n\r\n    return (\r\n      <>\r\n        <Route path=\"/manage\" component={this.Home} />\r\n        <Route path=\"/login\" component={this.Login} />\r\n        <Route path=\"/view/:id\" component={this.View} />\r\n        <Route path=\"/publish\" component={this.Publish} />\r\n        <Route path=\"/getimage\" component={this.GetImage} />\r\n        <Route path=\"/scheduled\" component={this.Scheduled} />\r\n        <Route path=\"/fbfeed\" component={this.FBFeed} />\r\n        <Route path=\"/logout\" component={this.Logout} />\r\n        <this.Copyright />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst RedirectToHome = () => {\r\n  window.location.href = Utils.getLocalStorage('token')\r\n    ? '#/msg'\r\n    : '#/login'\r\n  return null\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <HashRouter>\r\n      <MuiThemeProvider theme={Theme}>\r\n        <Sidebar>\r\n          <div className=\"mainView\">\r\n            <Switch>\r\n              <Route exact path=\"/\" component={RedirectToHome} />\r\n              <Route path=\"/msg\" component={Messenger} />\r\n              <Route component={Main} />\r\n            </Switch>\r\n          </div>\r\n          <Alert />\r\n        </Sidebar>\r\n        <Measure />\r\n      </MuiThemeProvider>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\n\r\nclass Guide extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n        <div className=\"gtco-container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n              <h2>Nhng lu  dnh cho bn</h2>\r\n              <p>c lp ra nhm mc ch tng hp, phn loi cc d n, nhng cuc thi ang din ra trong cng ng gii tr, chng mnh hi vng s gip  c cc bn tr tm kim thnh cng nhng hot ng ph hp nht vi bn thn mnh.<br /></p>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>NHP THNG TIN</h3>\r\n                  <p>Hy ch  nhp y  cc thng tin c trong form.</p>\r\n                </div>\r\n              </div>\r\n      \r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>I DUYT</h3>\r\n                  <p>Admin s ph duyt bi ca bn.<br />\r\n                    Bn s nhn c thng bo ngay sau khi bi ng c t lch  ng ln page.</p>\r\n                </div>\r\n              </div>\r\n      \r\n              <div className=\"feature-left animate-box\" data-animate-effect=\"fadeInLeft\">\r\n                <span className=\"icon\">\r\n                  <i className=\"icon-check\"></i>\r\n                </span>\r\n                <div className=\"feature-copy\">\r\n                  <h3>NG VO GI VNG</h3>\r\n                  <p>Bi ca bn s c hn gi  up vo khung gi vng (20h - 21h).<br />\r\n                    V vy nu cha thy bi ca bn cha c ng ngay, <b>ng vi</b> gi li bi cho chng mnh nh!</p>\r\n                </div>\r\n              </div>\r\n      \r\n            </div>\r\n      \r\n            <div className=\"col-md-12\">\r\n              <center>\r\n                <p><br /><br />Bng vic bm nt &quot;Tip tc&quot;, bn ng  vi cc <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca fanpage</p>\r\n                <a className=\"btn btn-block btn-primary\" href=\"#/next\">TIP TC </a>\r\n                <br />\r\n                Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br />\r\n              </center>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Guide;","import React from 'react';\r\n\r\nclass NoPsid extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Hng dn</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\t ng d n, cuc thi ln fanpage, bn hy thc hin theo hng dn sau:<br/>\r\n\t    \t\t\t\t\tBn hy inbox vo fanpage ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a><br/>\r\n\t    \t\t\t\t\tSau  bm vo nt <b>ng d n/cuc thi</b>  menu nh!<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti thng qua inbox fanpage</small>\r\n\t    \t\t\t\t</p>\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NoPsid;","import React from 'react';\r\n\r\nclass OldVersion extends React.Component {\r\n  render() {\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Hng dn</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\tBn dng link ti phin bn c ca fanpage<br/>\r\n\t    \t\t\t\t\tHy bm nt <b>ng d n/cuc thi</b>  trong menu inbox  nhn link mi nh!<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t<small>Nu bn gp li, hy thng bo cho admin ti: <a href=\"https://m.me/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">https://m.me/tonghopevent</a></small>\r\n\t    \t\t\t\t</p>\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OldVersion;","import React from 'react';\r\nimport Guide from './Guide';\r\nimport NoPsid from './NoPsid';\r\nimport OldVersion from './OldVersion';\r\nimport Utils from '../../Utils';\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.psid = Utils.getPsid();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <header id=\"gtco-header\" className=\"gtco-cover\" role=\"banner\" style={{backgroundImage: `url(theme/images/img_bg_1.jpg`}}>\r\n          <div className=\"gtco-container\">\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 col-md-offset-2 text-center\">\r\n                <div className=\"display-t\">\r\n                  <div className=\"display-tc animate-box\" data-animate-effect=\"fadeIn\">\r\n                    <h1>ng d n</h1>\r\n                    <h2>Tng hp cc d n v cuc thi dnh cho hc sinh, sinh vin</h2>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {this.psid !== 'none'\r\n          ? <Guide />\r\n          : !Utils.getParameterByName('psid') ? <NoPsid /> : <OldVersion />\r\n        }\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nconst Data = [\r\n\r\n  // INDEX 0\r\n  (parent) => {\r\n    return {\r\n      type: 'small',\r\n      title: 'Bn mun ng bi v',\r\n      options: [\r\n        { text: 'D n', subtitle: 'Hot ng ngoi kha', value: 'D n' },\r\n        { text: 'Cuc thi', subtitle: 'Dnh cho HS, SV', value: 'Cuc thi' },\r\n        { text: 'S kin', subtitle: 'Dnh cho HS, SV' , value: 'S kin' },\r\n      ],\r\n      notice: 'Lu : Fanpage khng nhn ng bi v tuyn dng vic lm.',\r\n      next: (value) => {\r\n        const newState = {\r\n          screen: 1,\r\n          type: value,\r\n        };\r\n        if (value === 'Cuc thi') newState.tag = '#cuc_thi';\r\n        else if (value === 'S kin') newState.tag = '#s_kin';\r\n        parent.setState(newState);\r\n      }\r\n    };\r\n  },\r\n\r\n  // INDEX 1\r\n  (parent) => {\r\n    return {\r\n      type: 'long',\r\n      title: <React.Fragment>{parent.state.type} ca bn c <b>iu hnh bi</b></React.Fragment>,\r\n      options: [\r\n        { text: 'Mt nhm hc sinh, sinh vin', subtitle: 'Hot ng phi li nhun', value: 'F1' },\r\n        { text: 'Mt cu lc b trong trng hc', subtitle: 'Hot ng phi li nhun', value: 'F2' },\r\n        { text: 'Mt trng hc cng lp', subtitle: 'VD: trng THCS, THPT, H, Cao ng,...', value: 'F3' },\r\n        { text: 'Mt t chc phi li nhun', subtitle: 'VD: AIESEC, VOGE, SOTB,...', value: 'F4' },\r\n        { text: 'T chc hot ng c li nhun', subtitle: 'VD: trung tm ngoi ng, ca hng,...', value: 'P1' },\r\n      ],\r\n      next: (value) => {\r\n        if (value === 'P1') {\r\n          parent.setState({ screen: 2 });\r\n        } else {\r\n          window.location.replace(parent.getFormUrl(value));\r\n        }\r\n      }\r\n    };\r\n  },\r\n\r\n  // INDEX 2\r\n  (parent) => {\r\n    return {\r\n      type: 'basic',\r\n      title: <React.Fragment>\r\n        Da theo <a href=\"https://sites.google.com/view/tonghopevent\" target=\"_blank\" rel=\"noopener noreferrer\">iu khon s dng</a> ca chng mnh, {parent.state.type.toLowerCase()} c t chc hoc c iu hnh bi mt hoc nhiu doanh nghip, t chc hay c nhn <b>hot ng c li nhun</b> phi tr ph theo <b>Gi P1</b><br/>\r\n        <br/>\r\n        Gi P1 c gi l 100.000 VN / 1 bi ng [<a href=\"https://sites.google.com/view/tonghopevent/gi-p1\" target=\"_blank\" rel=\"noopener noreferrer\">Bm y  xem chi tit</a>]<br/>\r\n        <br/>\r\n         tip tc, bn hy nhp thng tin vo form sau:\r\n        &nbsp;\r\n        <button className=\"btn btn-small btn-primary\"\r\n          style={{padding: '4px'}}\r\n          onClick={() => {\r\n            window.location.replace(parent.getFormUrl('P1'));\r\n          }}\r\n        >Ti Form </button><br/>\r\n        Sau , hng dn thanh ton s c gi ti inbox ca bn.\r\n      </React.Fragment>\r\n    };\r\n  },\r\n];\r\n\r\nexport default Data;","import React from 'react';\r\nimport Data from './Data';\r\nimport Utils from '../../Utils';\r\n\r\nclass Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const _psid = Utils.getPsid();\r\n    this.psid = _psid !== 'none' ? _psid : null;\r\n    this.state = {\r\n      screen: 0,\r\n      tag: null,\r\n    };\r\n  }\r\n\r\n  getFormUrl(plan) {\r\n    const psid = `${this.psid}${plan ? ';' + plan : ''}`;\r\n    return Utils.getFormUrl(psid, this.state.tag);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(window.scrollToTop, 50);\r\n  }\r\n\r\n  _renderSmallBtn(data) {\r\n    return data.options.map((option, i) => {\r\n      return (\r\n        <button\r\n          key={option.value + i}\r\n          className=\"btn btn-default btn-proj-cate\"\r\n          onClick={() => data.next(option.value)}\r\n        >{option.text}</button>\r\n      );\r\n    });\r\n  }\r\n\r\n  _renderLargeBtn(data) {\r\n    return data.options.map((option, i) => {\r\n      return (\r\n        <button\r\n          key={option.value + i}\r\n          className=\"btn btn-default btn-proj-type\"\r\n          onClick={() => data.next(option.value)}\r\n        >\r\n          <b>{option.text}</b><br/>\r\n          <small>{option.subtitle}</small>\r\n        </button>\r\n      );\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const data = Data[this.state.screen](this);\r\n\r\n    return (\r\n      <div id=\"gtco-features\">\r\n\t    \t<div className=\"gtco-container\">\r\n\t    \t\t<div className=\"row\">\r\n\t    \t\t\t<div className=\"col-md-8 col-md-offset-2 text-center gtco-heading\">\r\n\t    \t\t\t\t<h2>Thng tin chung</h2>\r\n\t    \t\t\t\t<p>\r\n\t    \t\t\t\t\t{data.title}\r\n\t    \t\t\t\t</p>\r\n              {data.type !== 'basic' && <p>\r\n                {data.type === 'small'\r\n                  ? this._renderSmallBtn(data)\r\n                  : this._renderLargeBtn(data)\r\n                }\r\n              </p>}\r\n              {data.notice && <p style={{fontSize: '0.8em'}}>\r\n                {data.notice}\r\n              </p>}\r\n\t    \t\t\t</div>\r\n\t    \t\t</div>\r\n\t    \t</div>\r\n\t    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer id=\"gtco-footer\" role=\"contentinfo\">\r\n      <div className=\"gtco-container\">\r\n        <div className=\"row copyright\">\r\n          <div className=\"col-md-12\">\r\n            <p className=\"pull-left\">\r\n              <small className=\"block\">Lp trnh bi <a rel=\"noopener noreferrer\" href=\"https://ngxson.com\" target=\"_blank\">Nui</a></small>\r\n              <small className=\"block\">Theme by <a rel=\"noopener noreferrer\" href=\"http://gettemplates.co/\" target=\"_blank\">GetTemplates.co</a></small>\r\n            </p>\r\n            <div className=\"pull-right\">\r\n              <ul className=\"gtco-social-icons pull-right\">\r\n                <li><a href=\"https://www.facebook.com/tonghopevent/\"><i className=\"icon-facebook\"></i></a></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport Home from './home/Home';\r\nimport Quiz from './quiz/Quiz';\r\nimport Footer from './Footer';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport './Landing.css';\r\n\r\nclass Main extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {};\r\n  }\r\n\r\n  Home = () => {\r\n    return <Home />;\r\n  };\r\n\r\n  Quiz = () => {\r\n    return <Quiz />;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Route exact path=\"/\" component={this.Home} />\r\n        <Route path=\"/next\" component={this.Quiz} />\r\n        <Footer />\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nfunction Landing() {\r\n  return (\r\n    <HashRouter>\r\n      <Main />\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default Landing;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `/data/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport Landing from './landing/Landing';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nif (window.location.pathname.match(/\\/data/)) {\r\n  ReactDOM.render(<App />, document.getElementById('root'));\r\n} else {\r\n  ReactDOM.render(<Landing />, document.getElementById('root'));\r\n}\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}